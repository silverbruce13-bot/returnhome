(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function t0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pc={exports:{}},or={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function Dw(){if(Om)return or;Om=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:c,ref:r!==void 0?r:null,props:l}}return or.Fragment=e,or.jsx=i,or.jsxs=i,or}var Gm;function Pw(){return Gm||(Gm=1,Pc.exports=Dw()),Pc.exports}var T=Pw(),Lc={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function Lw(){if(Bm)return ye;Bm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),_=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=_&&D[_]||D["@@iterator"],typeof D=="function"?D:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function N(D,F,Q){this.props=D,this.context=F,this.refs=x,this.updater=Q||A}N.prototype.isReactComponent={},N.prototype.setState=function(D,F){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,F,"setState")},N.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=N.prototype;function I(D,F,Q){this.props=D,this.context=F,this.refs=x,this.updater=Q||A}var L=I.prototype=new M;L.constructor=I,C(L,N.prototype),L.isPureReactComponent=!0;var K=Array.isArray;function G(){}var $={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function Y(D,F,Q){var ee=Q.ref;return{$$typeof:t,type:D,key:F,ref:ee!==void 0?ee:null,props:Q}}function pe(D,F){return Y(D.type,F,D.props)}function be(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function xe(D){var F={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return F[Q]})}var He=/\/+/g;function Ne(D,F){return typeof D=="object"&&D!==null&&D.key!=null?xe(""+D.key):F.toString(36)}function $e(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(G,G):(D.status="pending",D.then(function(F){D.status==="pending"&&(D.status="fulfilled",D.value=F)},function(F){D.status==="pending"&&(D.status="rejected",D.reason=F)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function V(D,F,Q,ee,he){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var Me=!1;if(D===null)Me=!0;else switch(ve){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(D.$$typeof){case t:case e:Me=!0;break;case v:return Me=D._init,V(Me(D._payload),F,Q,ee,he)}}if(Me)return he=he(D),Me=ee===""?"."+Ne(D,0):ee,K(he)?(Q="",Me!=null&&(Q=Me.replace(He,"$&/")+"/"),V(he,F,Q,"",function(Ai){return Ai})):he!=null&&(be(he)&&(he=pe(he,Q+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(He,"$&/")+"/")+Me)),F.push(he)),1;Me=0;var pt=ee===""?".":ee+":";if(K(D))for(var We=0;We<D.length;We++)ee=D[We],ve=pt+Ne(ee,We),Me+=V(ee,F,Q,ve,he);else if(We=E(D),typeof We=="function")for(D=We.call(D),We=0;!(ee=D.next()).done;)ee=ee.value,ve=pt+Ne(ee,We++),Me+=V(ee,F,Q,ve,he);else if(ve==="object"){if(typeof D.then=="function")return V($e(D),F,Q,ee,he);throw F=String(D),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Me}function X(D,F,Q){if(D==null)return D;var ee=[],he=0;return V(D,ee,"","",function(ve){return F.call(Q,ve,he++)}),ee}function ne(D){if(D._status===-1){var F=D._result;F=F(),F.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=F)}if(D._status===1)return D._result.default;throw D._result}var Ie=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ke={map:X,forEach:function(D,F,Q){X(D,function(){F.apply(this,arguments)},Q)},count:function(D){var F=0;return X(D,function(){F++}),F},toArray:function(D){return X(D,function(F){return F})||[]},only:function(D){if(!be(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ye.Activity=w,ye.Children=ke,ye.Component=N,ye.Fragment=i,ye.Profiler=r,ye.PureComponent=I,ye.StrictMode=s,ye.Suspense=m,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ye.__COMPILER_RUNTIME={__proto__:null,c:function(D){return $.H.useMemoCache(D)}},ye.cache=function(D){return function(){return D.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(D,F,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=C({},D.props),he=D.key;if(F!=null)for(ve in F.key!==void 0&&(he=""+F.key),F)!se.call(F,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&F.ref===void 0||(ee[ve]=F[ve]);var ve=arguments.length-2;if(ve===1)ee.children=Q;else if(1<ve){for(var Me=Array(ve),pt=0;pt<ve;pt++)Me[pt]=arguments[pt+2];ee.children=Me}return Y(D.type,he,ee)},ye.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},ye.createElement=function(D,F,Q){var ee,he={},ve=null;if(F!=null)for(ee in F.key!==void 0&&(ve=""+F.key),F)se.call(F,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=F[ee]);var Me=arguments.length-2;if(Me===1)he.children=Q;else if(1<Me){for(var pt=Array(Me),We=0;We<Me;We++)pt[We]=arguments[We+2];he.children=pt}if(D&&D.defaultProps)for(ee in Me=D.defaultProps,Me)he[ee]===void 0&&(he[ee]=Me[ee]);return Y(D,ve,he)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(D){return{$$typeof:f,render:D}},ye.isValidElement=be,ye.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ne}},ye.memo=function(D,F){return{$$typeof:p,type:D,compare:F===void 0?null:F}},ye.startTransition=function(D){var F=$.T,Q={};$.T=Q;try{var ee=D(),he=$.S;he!==null&&he(Q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(G,Ie)}catch(ve){Ie(ve)}finally{F!==null&&Q.types!==null&&(F.types=Q.types),$.T=F}},ye.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ye.use=function(D){return $.H.use(D)},ye.useActionState=function(D,F,Q){return $.H.useActionState(D,F,Q)},ye.useCallback=function(D,F){return $.H.useCallback(D,F)},ye.useContext=function(D){return $.H.useContext(D)},ye.useDebugValue=function(){},ye.useDeferredValue=function(D,F){return $.H.useDeferredValue(D,F)},ye.useEffect=function(D,F){return $.H.useEffect(D,F)},ye.useEffectEvent=function(D){return $.H.useEffectEvent(D)},ye.useId=function(){return $.H.useId()},ye.useImperativeHandle=function(D,F,Q){return $.H.useImperativeHandle(D,F,Q)},ye.useInsertionEffect=function(D,F){return $.H.useInsertionEffect(D,F)},ye.useLayoutEffect=function(D,F){return $.H.useLayoutEffect(D,F)},ye.useMemo=function(D,F){return $.H.useMemo(D,F)},ye.useOptimistic=function(D,F){return $.H.useOptimistic(D,F)},ye.useReducer=function(D,F,Q){return $.H.useReducer(D,F,Q)},ye.useRef=function(D){return $.H.useRef(D)},ye.useState=function(D){return $.H.useState(D)},ye.useSyncExternalStore=function(D,F,Q){return $.H.useSyncExternalStore(D,F,Q)},ye.useTransition=function(){return $.H.useTransition()},ye.version="19.2.4",ye}var qm;function Ad(){return qm||(qm=1,Lc.exports=Lw()),Lc.exports}var j=Ad();const n0=t0(j);var Uc={exports:{}},sr={},Oc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function Uw(){return Vm||(Vm=1,(function(t){function e(V,X){var ne=V.length;V.push(X);e:for(;0<ne;){var Ie=ne-1>>>1,ke=V[Ie];if(0<r(ke,X))V[Ie]=X,V[ne]=ke,ne=Ie;else break e}}function i(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var X=V[0],ne=V.pop();if(ne!==X){V[0]=ne;e:for(var Ie=0,ke=V.length,D=ke>>>1;Ie<D;){var F=2*(Ie+1)-1,Q=V[F],ee=F+1,he=V[ee];if(0>r(Q,ne))ee<ke&&0>r(he,Q)?(V[Ie]=he,V[ee]=ne,Ie=ee):(V[Ie]=Q,V[F]=ne,Ie=F);else if(ee<ke&&0>r(he,ne))V[Ie]=he,V[ee]=ne,Ie=ee;else break e}}return X}function r(V,X){var ne=V.sortIndex-X.sortIndex;return ne!==0?ne:V.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var m=[],p=[],v=1,w=null,_=3,E=!1,A=!1,C=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(V){for(var X=i(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=V)s(p),X.sortIndex=X.expirationTime,e(m,X);else break;X=i(p)}}function K(V){if(C=!1,L(V),!A)if(i(m)!==null)A=!0,G||(G=!0,xe());else{var X=i(p);X!==null&&$e(K,X.startTime-V)}}var G=!1,$=-1,se=5,Y=-1;function pe(){return x?!0:!(t.unstable_now()-Y<se)}function be(){if(x=!1,G){var V=t.unstable_now();Y=V;var X=!0;try{e:{A=!1,C&&(C=!1,M($),$=-1),E=!0;var ne=_;try{t:{for(L(V),w=i(m);w!==null&&!(w.expirationTime>V&&pe());){var Ie=w.callback;if(typeof Ie=="function"){w.callback=null,_=w.priorityLevel;var ke=Ie(w.expirationTime<=V);if(V=t.unstable_now(),typeof ke=="function"){w.callback=ke,L(V),X=!0;break t}w===i(m)&&s(m),L(V)}else s(m);w=i(m)}if(w!==null)X=!0;else{var D=i(p);D!==null&&$e(K,D.startTime-V),X=!1}}break e}finally{w=null,_=ne,E=!1}X=void 0}}finally{X?xe():G=!1}}}var xe;if(typeof I=="function")xe=function(){I(be)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Ne=He.port2;He.port1.onmessage=be,xe=function(){Ne.postMessage(null)}}else xe=function(){N(be,0)};function $e(V,X){$=N(function(){V(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(V){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var ne=_;_=X;try{return V()}finally{_=ne}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=_;_=V;try{return X()}finally{_=ne}},t.unstable_scheduleCallback=function(V,X,ne){var Ie=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ie+ne:Ie):ne=Ie,V){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=ne+ke,V={id:v++,callback:X,priorityLevel:V,startTime:ne,expirationTime:ke,sortIndex:-1},ne>Ie?(V.sortIndex=ne,e(p,V),i(m)===null&&V===i(p)&&(C?(M($),$=-1):C=!0,$e(K,ne-Ie))):(V.sortIndex=ke,e(m,V),A||E||(A=!0,G||(G=!0,xe()))),V},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(V){var X=_;return function(){var ne=_;_=X;try{return V.apply(this,arguments)}finally{_=ne}}}})(Gc)),Gc}var Hm;function Ow(){return Hm||(Hm=1,Oc.exports=Uw()),Oc.exports}var Bc={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function Gw(){if(zm)return bt;zm=1;var t=Ad();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,p,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:w==null?null:""+w,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bt.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},bt.flushSync=function(m){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=p,s.p=v,s.d.f()}},bt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},bt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},bt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,w=f(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:E}):v==="script"&&s.d.X(m,{crossOrigin:w,integrity:_,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},bt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,w=f(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bt.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},bt.requestFormReset=function(m){s.d.r(m)},bt.unstable_batchedUpdates=function(m,p){return m(p)},bt.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},bt.useFormStatus=function(){return c.H.useHostTransitionStatus()},bt.version="19.2.4",bt}var $m;function Bw(){if($m)return Bc.exports;$m=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bc.exports=Gw(),Bc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function qw(){if(Fm)return sr;Fm=1;var t=Ow(),e=Ad(),i=Bw();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,a=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(a=o.return),n=o.return;while(n)}return o.tag===3?a:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function f(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(s(188))}function p(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var a=n,u=o;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return m(g),n;if(y===u)return m(g),o;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var S=!1,b=g.child;b;){if(b===a){S=!0,a=g,u=y;break}if(b===u){S=!0,u=g,a=y;break}b=b.sibling}if(!S){for(b=y.child;b;){if(b===a){S=!0,a=y,u=g;break}if(b===u){S=!0,u=y,a=g;break}b=b.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var w=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function xe(n){return n===null||typeof n!="object"?null:(n=be&&n[be]||n["@@iterator"],typeof n=="function"?n:null)}var He=Symbol.for("react.client.reference");function Ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===He?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case N:return"Profiler";case x:return"StrictMode";case K:return"Suspense";case G:return"SuspenseList";case Y:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case I:return n.displayName||"Context";case M:return(n._context.displayName||"Context")+".Consumer";case L:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return o=n.displayName||null,o!==null?o:Ne(n.type)||"Memo";case se:o=n._payload,n=n._init;try{return Ne(n(o))}catch{}}return null}var $e=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Ie=[],ke=-1;function D(n){return{current:n}}function F(n){0>ke||(n.current=Ie[ke],Ie[ke]=null,ke--)}function Q(n,o){ke++,Ie[ke]=n.current,n.current=o}var ee=D(null),he=D(null),ve=D(null),Me=D(null);function pt(n,o){switch(Q(ve,o),Q(he,n),Q(ee,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?rm(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=rm(o),n=am(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(ee),Q(ee,n)}function We(){F(ee),F(he),F(ve)}function Ai(n){n.memoizedState!==null&&Q(Me,n);var o=ee.current,a=am(o,n.type);o!==a&&(Q(he,n),Q(ee,a))}function eo(n){he.current===n&&(F(ee),F(he)),Me.current===n&&(F(Me),er._currentValue=ne)}var Ci,ls;function Tn(n){if(Ci===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Ci=o&&o[1]||"",ls=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ci+n+ls}var us=!1;function cs(n,o){if(!n||us)return"";us=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var B=q}Reflect.construct(n,[],J)}else{try{J.call()}catch(q){B=q}n.call(J.prototype)}}else{try{throw Error()}catch(q){B=q}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],b=y[1];if(S&&b){var R=S.split(`
`),O=b.split(`
`);for(g=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===R.length||g===O.length)for(u=R.length-1,g=O.length-1;1<=u&&0<=g&&R[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(R[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||R[u]!==O[g]){var H=`
`+R[u].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=u&&0<=g);break}}}finally{us=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Tn(a):""}function wl(n,o){switch(n.tag){case 26:case 27:case 5:return Tn(n.type);case 16:return Tn("Lazy");case 13:return n.child!==o&&o!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return cs(n.type,!1);case 11:return cs(n.type.render,!1);case 1:return cs(n.type,!0);case 31:return Tn("Activity");default:return""}}function ds(n){try{var o="",a=null;do o+=wl(n,a),a=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var fs=Object.prototype.hasOwnProperty,to=t.unstable_scheduleCallback,ae=t.unstable_cancelCallback,me=t.unstable_shouldYield,ce=t.unstable_requestPaint,fe=t.unstable_now,at=t.unstable_getCurrentPriorityLevel,mt=t.unstable_ImmediatePriority,En=t.unstable_UserBlockingPriority,bn=t.unstable_NormalPriority,Kn=t.unstable_LowPriority,Yn=t.unstable_IdlePriority,no=t.log,Sl=t.unstable_setDisableYieldValue,Wn=null,Bt=null;function Xn(n){if(typeof no=="function"&&Sl(n),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Wn,n)}catch{}}var qt=Math.clz32?Math.clz32:_v,yv=Math.log,vv=Math.LN2;function _v(n){return n>>>=0,n===0?32:31-(yv(n)/vv|0)|0}var Tr=256,Er=262144,br=4194304;function xi(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ar(n,o,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~y,u!==0?g=xi(u):(S&=b,S!==0?g=xi(S):a||(a=b&~n,a!==0&&(g=xi(a))))):(b=u&~y,b!==0?g=xi(b):S!==0?g=xi(S):a||(a=u&~n,a!==0&&(g=xi(a)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,a=o&-o,y>=a||y===32&&(a&4194048)!==0)?o:g}function hs(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function wv(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qd(){var n=br;return br<<=1,(br&62914560)===0&&(br=4194304),n}function Tl(n){for(var o=[],a=0;31>a;a++)o.push(n);return o}function ps(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sv(n,o,a,u,g,y){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,R=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var H=31-qt(a),J=1<<H;b[H]=0,R[H]=-1;var B=O[H];if(B!==null)for(O[H]=null,H=0;H<B.length;H++){var q=B[H];q!==null&&(q.lane&=-536870913)}a&=~J}u!==0&&Vd(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~o))}function Vd(n,o,a){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-qt(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Hd(n,o){var a=n.entangledLanes|=o;for(n=n.entanglements;a;){var u=31-qt(a),g=1<<u;g&o|n[u]&o&&(n[u]|=o),a&=~g}}function zd(n,o){var a=o&-o;return a=(a&42)!==0?1:El(a),(a&(n.suspendedLanes|o))!==0?0:a}function El(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function bl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function $d(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:Im(n.type))}function Fd(n,o){var a=X.p;try{return X.p=n,o()}finally{X.p=a}}var Qn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Qn,Mt="__reactProps$"+Qn,io="__reactContainer$"+Qn,Al="__reactEvents$"+Qn,Tv="__reactListeners$"+Qn,Ev="__reactHandles$"+Qn,Jd="__reactResources$"+Qn,ms="__reactMarker$"+Qn;function Cl(n){delete n[gt],delete n[Mt],delete n[Al],delete n[Tv],delete n[Ev]}function oo(n){var o=n[gt];if(o)return o;for(var a=n.parentNode;a;){if(o=a[io]||a[gt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(n=pm(n);n!==null;){if(a=n[gt])return a;n=pm(n)}return o}n=a,a=n.parentNode}return null}function so(n){if(n=n[gt]||n[io]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function gs(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function ro(n){var o=n[Jd];return o||(o=n[Jd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function dt(n){n[ms]=!0}var jd=new Set,Kd={};function Ri(n,o){ao(n,o),ao(n+"Capture",o)}function ao(n,o){for(Kd[n]=o,n=0;n<o.length;n++)jd.add(o[n])}var bv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yd={},Wd={};function Av(n){return fs.call(Wd,n)?!0:fs.call(Yd,n)?!1:bv.test(n)?Wd[n]=!0:(Yd[n]=!0,!1)}function Cr(n,o,a){if(Av(o))if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+a)}}function xr(n,o,a){if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+a)}}function An(n,o,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(o,a,""+u)}}function Wt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xd(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Cv(n,o,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,y.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function xl(n){if(!n._valueTracker){var o=Xd(n)?"checked":"value";n._valueTracker=Cv(n,o,""+n[o])}}function Qd(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return n&&(u=Xd(n)?n.checked?"true":"false":n.value),n=u,n!==a?(o.setValue(n),!0):!1}function Rr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xv=/[\n"\\]/g;function Xt(n){return n.replace(xv,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rl(n,o,a,u,g,y,S,b){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),o!=null?S==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Wt(o)):n.value!==""+Wt(o)&&(n.value=""+Wt(o)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),o!=null?Nl(n,S,Wt(o)):a!=null?Nl(n,S,Wt(a)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Wt(b):n.removeAttribute("name")}function Zd(n,o,a,u,g,y,S,b){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){xl(n);return}a=a!=null?""+Wt(a):"",o=o!=null?""+Wt(o):a,b||o===n.value||(n.value=o),n.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),xl(n)}function Nl(n,o,a){o==="number"&&Rr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function lo(n,o,a,u){if(n=n.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=o.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Wt(a),o=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function ef(n,o,a){if(o!=null&&(o=""+Wt(o),o!==n.value&&(n.value=o),a==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=a!=null?""+Wt(a):""}function tf(n,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if($e(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Wt(o),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),xl(n)}function uo(n,o){if(o){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=o;return}}n.textContent=o}var Rv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(n,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,a):typeof a!="number"||a===0||Rv.has(o)?o==="float"?n.cssFloat=a:n[o]=(""+a).trim():n[o]=a+"px"}function of(n,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&nf(n,g,u)}else for(var y in o)o.hasOwnProperty(y)&&nf(n,y,o[y])}function Il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Iv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(n){return Iv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Cn(){}var kl=null;function Ml(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var co=null,fo=null;function sf(n){var o=so(n);if(o&&(n=o.stateNode)){var a=n[Mt]||null;e:switch(n=o.stateNode,o.type){case"input":if(Rl(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Xt(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==n&&u.form===n.form){var g=u[Mt]||null;if(!g)throw Error(s(90));Rl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===n.form&&Qd(u)}break e;case"textarea":ef(n,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&lo(n,!!a.multiple,o,!1)}}}var Dl=!1;function rf(n,o,a){if(Dl)return n(o,a);Dl=!0;try{var u=n(o);return u}finally{if(Dl=!1,(co!==null||fo!==null)&&(ga(),co&&(o=co,n=fo,fo=co=null,sf(o),n)))for(o=0;o<n.length;o++)sf(n[o])}}function ys(n,o){var a=n.stateNode;if(a===null)return null;var u=a[Mt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=!1;if(xn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Pl=!1}var Zn=null,Ll=null,Ir=null;function af(){if(Ir)return Ir;var n,o=Ll,a=o.length,u,g="value"in Zn?Zn.value:Zn.textContent,y=g.length;for(n=0;n<a&&o[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&o[a-u]===g[y-u];u++);return Ir=g.slice(n,1<u?1-u:void 0)}function kr(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Mr(){return!0}function lf(){return!1}function Dt(n){function o(a,u,g,y,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mr:lf,this.isPropagationStopped=lf,this}return w(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),o}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dr=Dt(Ni),_s=w({},Ni,{view:0,detail:0}),kv=Dt(_s),Ul,Ol,ws,Pr=w({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ws&&(ws&&n.type==="mousemove"?(Ul=n.screenX-ws.screenX,Ol=n.screenY-ws.screenY):Ol=Ul=0,ws=n),Ul)},movementY:function(n){return"movementY"in n?n.movementY:Ol}}),uf=Dt(Pr),Mv=w({},Pr,{dataTransfer:0}),Dv=Dt(Mv),Pv=w({},_s,{relatedTarget:0}),Gl=Dt(Pv),Lv=w({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Uv=Dt(Lv),Ov=w({},Ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gv=Dt(Ov),Bv=w({},Ni,{data:0}),cf=Dt(Bv),qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zv(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Hv[n])?!!o[n]:!1}function Bl(){return zv}var $v=w({},_s,{key:function(n){if(n.key){var o=qv[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=kr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(n){return n.type==="keypress"?kr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fv=Dt($v),Jv=w({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=Dt(Jv),jv=w({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),Kv=Dt(jv),Yv=w({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wv=Dt(Yv),Xv=w({},Pr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qv=Dt(Xv),Zv=w({},Ni,{newState:0,oldState:0}),e_=Dt(Zv),t_=[9,13,27,32],ql=xn&&"CompositionEvent"in window,Ss=null;xn&&"documentMode"in document&&(Ss=document.documentMode);var n_=xn&&"TextEvent"in window&&!Ss,ff=xn&&(!ql||Ss&&8<Ss&&11>=Ss),hf=" ",pf=!1;function mf(n,o){switch(n){case"keyup":return t_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ho=!1;function i_(n,o){switch(n){case"compositionend":return gf(o);case"keypress":return o.which!==32?null:(pf=!0,hf);case"textInput":return n=o.data,n===hf&&pf?null:n;default:return null}}function o_(n,o){if(ho)return n==="compositionend"||!ql&&mf(n,o)?(n=af(),Ir=Ll=Zn=null,ho=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ff&&o.locale!=="ko"?null:o.data;default:return null}}var s_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!s_[n.type]:o==="textarea"}function vf(n,o,a,u){co?fo?fo.push(u):fo=[u]:co=u,o=Ea(o,"onChange"),0<o.length&&(a=new Dr("onChange","change",null,a,u),n.push({event:a,listeners:o}))}var Ts=null,Es=null;function r_(n){em(n,0)}function Lr(n){var o=gs(n);if(Qd(o))return n}function _f(n,o){if(n==="change")return o}var wf=!1;if(xn){var Vl;if(xn){var Hl="oninput"in document;if(!Hl){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),Hl=typeof Sf.oninput=="function"}Vl=Hl}else Vl=!1;wf=Vl&&(!document.documentMode||9<document.documentMode)}function Tf(){Ts&&(Ts.detachEvent("onpropertychange",Ef),Es=Ts=null)}function Ef(n){if(n.propertyName==="value"&&Lr(Es)){var o=[];vf(o,Es,n,Ml(n)),rf(r_,o)}}function a_(n,o,a){n==="focusin"?(Tf(),Ts=o,Es=a,Ts.attachEvent("onpropertychange",Ef)):n==="focusout"&&Tf()}function l_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lr(Es)}function u_(n,o){if(n==="click")return Lr(o)}function c_(n,o){if(n==="input"||n==="change")return Lr(o)}function d_(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Vt=typeof Object.is=="function"?Object.is:d_;function bs(n,o){if(Vt(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var a=Object.keys(n),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!fs.call(o,g)||!Vt(n[g],o[g]))return!1}return!0}function bf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Af(n,o){var a=bf(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=o&&u>=o)return{node:a,offset:o-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bf(a)}}function Cf(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Cf(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function xf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Rr(n.document);o instanceof n.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)n=o.contentWindow;else break;o=Rr(n.document)}return o}function zl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var f_=xn&&"documentMode"in document&&11>=document.documentMode,po=null,$l=null,As=null,Fl=!1;function Rf(n,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fl||po==null||po!==Rr(u)||(u=po,"selectionStart"in u&&zl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),As&&bs(As,u)||(As=u,u=Ea($l,"onSelect"),0<u.length&&(o=new Dr("onSelect","select",null,o,a),n.push({event:o,listeners:u}),o.target=po)))}function Ii(n,o){var a={};return a[n.toLowerCase()]=o.toLowerCase(),a["Webkit"+n]="webkit"+o,a["Moz"+n]="moz"+o,a}var mo={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},Jl={},Nf={};xn&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function ki(n){if(Jl[n])return Jl[n];if(!mo[n])return n;var o=mo[n],a;for(a in o)if(o.hasOwnProperty(a)&&a in Nf)return Jl[n]=o[a];return n}var If=ki("animationend"),kf=ki("animationiteration"),Mf=ki("animationstart"),h_=ki("transitionrun"),p_=ki("transitionstart"),m_=ki("transitioncancel"),Df=ki("transitionend"),Pf=new Map,jl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jl.push("scrollEnd");function un(n,o){Pf.set(n,o),Ri(o,[n])}var Ur=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Qt=[],go=0,Kl=0;function Or(){for(var n=go,o=Kl=go=0;o<n;){var a=Qt[o];Qt[o++]=null;var u=Qt[o];Qt[o++]=null;var g=Qt[o];Qt[o++]=null;var y=Qt[o];if(Qt[o++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&Lf(a,g,y)}}function Gr(n,o,a,u){Qt[go++]=n,Qt[go++]=o,Qt[go++]=a,Qt[go++]=u,Kl|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Yl(n,o,a,u){return Gr(n,o,a,u),Br(n)}function Mi(n,o){return Gr(n,null,null,o),Br(n)}function Lf(n,o,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=n.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&o!==null&&(g=31-qt(a),n=y.hiddenUpdates,u=n[g],u===null?n[g]=[o]:u.push(o),o.lane=a|536870912),y):null}function Br(n){if(50<js)throw js=0,oc=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var yo={};function g_(n,o,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(n,o,a,u){return new g_(n,o,a,u)}function Wl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Rn(n,o){var a=n.alternate;return a===null?(a=Ht(n.tag,o,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=o,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,o=n.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Uf(n,o){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,o=a.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function qr(n,o,a,u,g,y){var S=0;if(u=n,typeof n=="function")Wl(n)&&(S=1);else if(typeof n=="string")S=Sw(n,a,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Y:return n=Ht(31,a,o,g),n.elementType=Y,n.lanes=y,n;case C:return Di(a.children,g,y,o);case x:S=8,g|=24;break;case N:return n=Ht(12,a,o,g|2),n.elementType=N,n.lanes=y,n;case K:return n=Ht(13,a,o,g),n.elementType=K,n.lanes=y,n;case G:return n=Ht(19,a,o,g),n.elementType=G,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:S=10;break e;case M:S=9;break e;case L:S=11;break e;case $:S=14;break e;case se:S=16,u=null;break e}S=29,a=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=Ht(S,a,o,g),o.elementType=n,o.type=u,o.lanes=y,o}function Di(n,o,a,u){return n=Ht(7,n,u,o),n.lanes=a,n}function Xl(n,o,a){return n=Ht(6,n,null,o),n.lanes=a,n}function Of(n){var o=Ht(18,null,null,0);return o.stateNode=n,o}function Ql(n,o,a){return o=Ht(4,n.children!==null?n.children:[],n.key,o),o.lanes=a,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Gf=new WeakMap;function Zt(n,o){if(typeof n=="object"&&n!==null){var a=Gf.get(n);return a!==void 0?a:(o={value:n,source:o,stack:ds(o)},Gf.set(n,o),o)}return{value:n,source:o,stack:ds(o)}}var vo=[],_o=0,Vr=null,Cs=0,en=[],tn=0,ei=null,vn=1,_n="";function Nn(n,o){vo[_o++]=Cs,vo[_o++]=Vr,Vr=n,Cs=o}function Bf(n,o,a){en[tn++]=vn,en[tn++]=_n,en[tn++]=ei,ei=n;var u=vn;n=_n;var g=32-qt(u)-1;u&=~(1<<g),a+=1;var y=32-qt(o)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,vn=1<<32-qt(o)+g|a<<g|u,_n=y+n}else vn=1<<y|a<<g|u,_n=n}function Zl(n){n.return!==null&&(Nn(n,1),Bf(n,1,0))}function eu(n){for(;n===Vr;)Vr=vo[--_o],vo[_o]=null,Cs=vo[--_o],vo[_o]=null;for(;n===ei;)ei=en[--tn],en[tn]=null,_n=en[--tn],en[tn]=null,vn=en[--tn],en[tn]=null}function qf(n,o){en[tn++]=vn,en[tn++]=_n,en[tn++]=ei,vn=o.id,_n=o.overflow,ei=n}var yt=null,Je=null,Re=!1,ti=null,nn=!1,tu=Error(s(519));function ni(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xs(Zt(o,n)),tu}function Vf(n){var o=n.stateNode,a=n.type,u=n.memoizedProps;switch(o[gt]=n,o[Mt]=u,a){case"dialog":Ee("cancel",o),Ee("close",o);break;case"iframe":case"object":case"embed":Ee("load",o);break;case"video":case"audio":for(a=0;a<Ys.length;a++)Ee(Ys[a],o);break;case"source":Ee("error",o);break;case"img":case"image":case"link":Ee("error",o),Ee("load",o);break;case"details":Ee("toggle",o);break;case"input":Ee("invalid",o),Zd(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ee("invalid",o);break;case"textarea":Ee("invalid",o),tf(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||om(o.textContent,a)?(u.popover!=null&&(Ee("beforetoggle",o),Ee("toggle",o)),u.onScroll!=null&&Ee("scroll",o),u.onScrollEnd!=null&&Ee("scrollend",o),u.onClick!=null&&(o.onclick=Cn),o=!0):o=!1,o||ni(n,!0)}function Hf(n){for(yt=n.return;yt;)switch(yt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:yt=yt.return}}function wo(n){if(n!==yt)return!1;if(!Re)return Hf(n),Re=!0,!1;var o=n.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||_c(n.type,n.memoizedProps)),a=!a),a&&Je&&ni(n),Hf(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Je=hm(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Je=hm(n)}else o===27?(o=Je,gi(n.type)?(n=bc,bc=null,Je=n):Je=o):Je=yt?sn(n.stateNode.nextSibling):null;return!0}function Pi(){Je=yt=null,Re=!1}function nu(){var n=ti;return n!==null&&(Ot===null?Ot=n:Ot.push.apply(Ot,n),ti=null),n}function xs(n){ti===null?ti=[n]:ti.push(n)}var iu=D(null),Li=null,In=null;function ii(n,o,a){Q(iu,o._currentValue),o._currentValue=a}function kn(n){n._currentValue=iu.current,F(iu)}function ou(n,o,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===a)break;n=n.return}}function su(n,o,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var b=y;y=g;for(var R=0;R<o.length;R++)if(b.context===o[R]){y.lanes|=a,b=y.alternate,b!==null&&(b.lanes|=a),ou(y.return,a,n),u||(S=null);break e}y=b.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=a,y=S.alternate,y!==null&&(y.lanes|=a),ou(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function So(n,o,a,u){n=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var b=g.type;Vt(g.pendingProps.value,S.value)||(n!==null?n.push(b):n=[b])}}else if(g===Me.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(er):n=[er])}g=g.return}n!==null&&su(o,n,a,u),o.flags|=262144}function Hr(n){for(n=n.firstContext;n!==null;){if(!Vt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ui(n){Li=n,In=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function vt(n){return zf(Li,n)}function zr(n,o){return Li===null&&Ui(n),zf(n,o)}function zf(n,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},In===null){if(n===null)throw Error(s(308));In=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else In=In.next=o;return a}var y_=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(a){return a()})}},v_=t.unstable_scheduleCallback,__=t.unstable_NormalPriority,nt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ru(){return{controller:new y_,data:new Map,refCount:0}}function Rs(n){n.refCount--,n.refCount===0&&v_(__,function(){n.controller.abort()})}var Ns=null,au=0,To=0,Eo=null;function w_(n,o){if(Ns===null){var a=Ns=[];au=0,To=cc(),Eo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return au++,o.then($f,$f),o}function $f(){if(--au===0&&Ns!==null){Eo!==null&&(Eo.status="fulfilled");var n=Ns;Ns=null,To=0,Eo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function S_(n,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Ff=V.S;V.S=function(n,o){Rp=fe(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&w_(n,o),Ff!==null&&Ff(n,o)};var Oi=D(null);function lu(){var n=Oi.current;return n!==null?n:ze.pooledCache}function $r(n,o){o===null?Q(Oi,Oi.current):Q(Oi,o.pool)}function Jf(){var n=lu();return n===null?null:{parent:nt._currentValue,pool:n}}var bo=Error(s(460)),uu=Error(s(474)),Fr=Error(s(542)),Jr={then:function(){}};function jf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Kf(n,o,a){switch(a=n[a],a===void 0?n.push(o):a!==o&&(o.then(Cn,Cn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Wf(n),n;default:if(typeof o.status=="string")o.then(Cn,Cn);else{if(n=ze,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Wf(n),n}throw Bi=o,bo}}function Gi(n){try{var o=n._init;return o(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Bi=a,bo):a}}var Bi=null;function Yf(){if(Bi===null)throw Error(s(459));var n=Bi;return Bi=null,n}function Wf(n){if(n===bo||n===Fr)throw Error(s(483))}var Ao=null,Is=0;function jr(n){var o=Is;return Is+=1,Ao===null&&(Ao=[]),Kf(Ao,n,o)}function ks(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Kr(n,o){throw o.$$typeof===_?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Xf(n){function o(P,k){if(n){var U=P.deletions;U===null?(P.deletions=[k],P.flags|=16):U.push(k)}}function a(P,k){if(!n)return null;for(;k!==null;)o(P,k),k=k.sibling;return null}function u(P){for(var k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function g(P,k){return P=Rn(P,k),P.index=0,P.sibling=null,P}function y(P,k,U){return P.index=U,n?(U=P.alternate,U!==null?(U=U.index,U<k?(P.flags|=67108866,k):U):(P.flags|=67108866,k)):(P.flags|=1048576,k)}function S(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function b(P,k,U,z){return k===null||k.tag!==6?(k=Xl(U,P.mode,z),k.return=P,k):(k=g(k,U),k.return=P,k)}function R(P,k,U,z){var re=U.type;return re===C?H(P,k,U.props.children,z,U.key):k!==null&&(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===se&&Gi(re)===k.type)?(k=g(k,U.props),ks(k,U),k.return=P,k):(k=qr(U.type,U.key,U.props,null,P.mode,z),ks(k,U),k.return=P,k)}function O(P,k,U,z){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=Ql(U,P.mode,z),k.return=P,k):(k=g(k,U.children||[]),k.return=P,k)}function H(P,k,U,z,re){return k===null||k.tag!==7?(k=Di(U,P.mode,z,re),k.return=P,k):(k=g(k,U),k.return=P,k)}function J(P,k,U){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Xl(""+k,P.mode,U),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return U=qr(k.type,k.key,k.props,null,P.mode,U),ks(U,k),U.return=P,U;case A:return k=Ql(k,P.mode,U),k.return=P,k;case se:return k=Gi(k),J(P,k,U)}if($e(k)||xe(k))return k=Di(k,P.mode,U,null),k.return=P,k;if(typeof k.then=="function")return J(P,jr(k),U);if(k.$$typeof===I)return J(P,zr(P,k),U);Kr(P,k)}return null}function B(P,k,U,z){var re=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return re!==null?null:b(P,k,""+U,z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return U.key===re?R(P,k,U,z):null;case A:return U.key===re?O(P,k,U,z):null;case se:return U=Gi(U),B(P,k,U,z)}if($e(U)||xe(U))return re!==null?null:H(P,k,U,z,null);if(typeof U.then=="function")return B(P,k,jr(U),z);if(U.$$typeof===I)return B(P,k,zr(P,U),z);Kr(P,U)}return null}function q(P,k,U,z,re){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return P=P.get(U)||null,b(k,P,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return P=P.get(z.key===null?U:z.key)||null,R(k,P,z,re);case A:return P=P.get(z.key===null?U:z.key)||null,O(k,P,z,re);case se:return z=Gi(z),q(P,k,U,z,re)}if($e(z)||xe(z))return P=P.get(U)||null,H(k,P,z,re,null);if(typeof z.then=="function")return q(P,k,U,jr(z),re);if(z.$$typeof===I)return q(P,k,U,zr(k,z),re);Kr(k,z)}return null}function te(P,k,U,z){for(var re=null,De=null,ie=k,we=k=0,Ce=null;ie!==null&&we<U.length;we++){ie.index>we?(Ce=ie,ie=null):Ce=ie.sibling;var Pe=B(P,ie,U[we],z);if(Pe===null){ie===null&&(ie=Ce);break}n&&ie&&Pe.alternate===null&&o(P,ie),k=y(Pe,k,we),De===null?re=Pe:De.sibling=Pe,De=Pe,ie=Ce}if(we===U.length)return a(P,ie),Re&&Nn(P,we),re;if(ie===null){for(;we<U.length;we++)ie=J(P,U[we],z),ie!==null&&(k=y(ie,k,we),De===null?re=ie:De.sibling=ie,De=ie);return Re&&Nn(P,we),re}for(ie=u(ie);we<U.length;we++)Ce=q(ie,P,we,U[we],z),Ce!==null&&(n&&Ce.alternate!==null&&ie.delete(Ce.key===null?we:Ce.key),k=y(Ce,k,we),De===null?re=Ce:De.sibling=Ce,De=Ce);return n&&ie.forEach(function(Si){return o(P,Si)}),Re&&Nn(P,we),re}function le(P,k,U,z){if(U==null)throw Error(s(151));for(var re=null,De=null,ie=k,we=k=0,Ce=null,Pe=U.next();ie!==null&&!Pe.done;we++,Pe=U.next()){ie.index>we?(Ce=ie,ie=null):Ce=ie.sibling;var Si=B(P,ie,Pe.value,z);if(Si===null){ie===null&&(ie=Ce);break}n&&ie&&Si.alternate===null&&o(P,ie),k=y(Si,k,we),De===null?re=Si:De.sibling=Si,De=Si,ie=Ce}if(Pe.done)return a(P,ie),Re&&Nn(P,we),re;if(ie===null){for(;!Pe.done;we++,Pe=U.next())Pe=J(P,Pe.value,z),Pe!==null&&(k=y(Pe,k,we),De===null?re=Pe:De.sibling=Pe,De=Pe);return Re&&Nn(P,we),re}for(ie=u(ie);!Pe.done;we++,Pe=U.next())Pe=q(ie,P,we,Pe.value,z),Pe!==null&&(n&&Pe.alternate!==null&&ie.delete(Pe.key===null?we:Pe.key),k=y(Pe,k,we),De===null?re=Pe:De.sibling=Pe,De=Pe);return n&&ie.forEach(function(Mw){return o(P,Mw)}),Re&&Nn(P,we),re}function Ve(P,k,U,z){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case E:e:{for(var re=U.key;k!==null;){if(k.key===re){if(re=U.type,re===C){if(k.tag===7){a(P,k.sibling),z=g(k,U.props.children),z.return=P,P=z;break e}}else if(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===se&&Gi(re)===k.type){a(P,k.sibling),z=g(k,U.props),ks(z,U),z.return=P,P=z;break e}a(P,k);break}else o(P,k);k=k.sibling}U.type===C?(z=Di(U.props.children,P.mode,z,U.key),z.return=P,P=z):(z=qr(U.type,U.key,U.props,null,P.mode,z),ks(z,U),z.return=P,P=z)}return S(P);case A:e:{for(re=U.key;k!==null;){if(k.key===re)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){a(P,k.sibling),z=g(k,U.children||[]),z.return=P,P=z;break e}else{a(P,k);break}else o(P,k);k=k.sibling}z=Ql(U,P.mode,z),z.return=P,P=z}return S(P);case se:return U=Gi(U),Ve(P,k,U,z)}if($e(U))return te(P,k,U,z);if(xe(U)){if(re=xe(U),typeof re!="function")throw Error(s(150));return U=re.call(U),le(P,k,U,z)}if(typeof U.then=="function")return Ve(P,k,jr(U),z);if(U.$$typeof===I)return Ve(P,k,zr(P,U),z);Kr(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,k!==null&&k.tag===6?(a(P,k.sibling),z=g(k,U),z.return=P,P=z):(a(P,k),z=Xl(U,P.mode,z),z.return=P,P=z),S(P)):a(P,k)}return function(P,k,U,z){try{Is=0;var re=Ve(P,k,U,z);return Ao=null,re}catch(ie){if(ie===bo||ie===Fr)throw ie;var De=Ht(29,ie,null,P.mode);return De.lanes=z,De.return=P,De}finally{}}}var qi=Xf(!0),Qf=Xf(!1),oi=!1;function cu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function si(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ri(n,o,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ue&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Br(n),Lf(n,null,a),o}return Gr(n,u,o,a),Br(n)}function Ms(n,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,a|=u,o.lanes=a,Hd(n,a)}}function fu(n,o){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,a=a.next}while(a!==null);y===null?g=y=o:y=y.next=o}else g=y=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=o:n.next=o,a.lastBaseUpdate=o}var hu=!1;function Ds(){if(hu){var n=Eo;if(n!==null)throw n}}function Ps(n,o,a,u){hu=!1;var g=n.updateQueue;oi=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var R=b,O=R.next;R.next=null,S===null?y=O:S.next=O,S=R;var H=n.alternate;H!==null&&(H=H.updateQueue,b=H.lastBaseUpdate,b!==S&&(b===null?H.firstBaseUpdate=O:b.next=O,H.lastBaseUpdate=R))}if(y!==null){var J=g.baseState;S=0,H=O=R=null,b=y;do{var B=b.lane&-536870913,q=B!==b.lane;if(q?(Ae&B)===B:(u&B)===B){B!==0&&B===To&&(hu=!0),H!==null&&(H=H.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var te=n,le=b;B=o;var Ve=a;switch(le.tag){case 1:if(te=le.payload,typeof te=="function"){J=te.call(Ve,J,B);break e}J=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=le.payload,B=typeof te=="function"?te.call(Ve,J,B):te,B==null)break e;J=w({},J,B);break e;case 2:oi=!0}}B=b.callback,B!==null&&(n.flags|=64,q&&(n.flags|=8192),q=g.callbacks,q===null?g.callbacks=[B]:q.push(B))}else q={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},H===null?(O=H=q,R=J):H=H.next=q,S|=B;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;q=b,b=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);H===null&&(R=J),g.baseState=R,g.firstBaseUpdate=O,g.lastBaseUpdate=H,y===null&&(g.shared.lanes=0),di|=S,n.lanes=S,n.memoizedState=J}}function Zf(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function eh(n,o){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Zf(a[n],o)}var Co=D(null),Yr=D(0);function th(n,o){n=qn,Q(Yr,n),Q(Co,o),qn=n|o.baseLanes}function pu(){Q(Yr,qn),Q(Co,Co.current)}function mu(){qn=Yr.current,F(Co),F(Yr)}var zt=D(null),on=null;function ai(n){var o=n.alternate;Q(et,et.current&1),Q(zt,n),on===null&&(o===null||Co.current!==null||o.memoizedState!==null)&&(on=n)}function gu(n){Q(et,et.current),Q(zt,n),on===null&&(on=n)}function nh(n){n.tag===22?(Q(et,et.current),Q(zt,n),on===null&&(on=n)):li()}function li(){Q(et,et.current),Q(zt,zt.current)}function $t(n){F(zt),on===n&&(on=null),F(et)}var et=D(0);function Wr(n){for(var o=n;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Tc(a)||Ec(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Mn=0,_e=null,Be=null,it=null,Xr=!1,xo=!1,Vi=!1,Qr=0,Ls=0,Ro=null,T_=0;function Xe(){throw Error(s(321))}function yu(n,o){if(o===null)return!1;for(var a=0;a<o.length&&a<n.length;a++)if(!Vt(n[a],o[a]))return!1;return!0}function vu(n,o,a,u,g,y){return Mn=y,_e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=n===null||n.memoizedState===null?Bh:Du,Vi=!1,y=a(u,g),Vi=!1,xo&&(y=oh(o,a,u,g)),ih(n),y}function ih(n){V.H=Gs;var o=Be!==null&&Be.next!==null;if(Mn=0,it=Be=_e=null,Xr=!1,Ls=0,Ro=null,o)throw Error(s(300));n===null||ot||(n=n.dependencies,n!==null&&Hr(n)&&(ot=!0))}function oh(n,o,a,u){_e=n;var g=0;do{if(xo&&(Ro=null),Ls=0,xo=!1,25<=g)throw Error(s(301));if(g+=1,it=Be=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=qh,y=o(a,u)}while(xo);return y}function E_(){var n=V.H,o=n.useState()[0];return o=typeof o.then=="function"?Us(o):o,n=n.useState()[0],(Be!==null?Be.memoizedState:null)!==n&&(_e.flags|=1024),o}function _u(){var n=Qr!==0;return Qr=0,n}function wu(n,o,a){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~a}function Su(n){if(Xr){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Xr=!1}Mn=0,it=Be=_e=null,xo=!1,Ls=Qr=0,Ro=null}function Ct(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?_e.memoizedState=it=n:it=it.next=n,it}function tt(){if(Be===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var o=it===null?_e.memoizedState:it.next;if(o!==null)it=o,Be=n;else{if(n===null)throw _e.alternate===null?Error(s(467)):Error(s(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},it===null?_e.memoizedState=it=n:it=it.next=n}return it}function Zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Us(n){var o=Ls;return Ls+=1,Ro===null&&(Ro=[]),n=Kf(Ro,n,o),o=_e,(it===null?o.memoizedState:it.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?Bh:Du),n}function ea(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Us(n);if(n.$$typeof===I)return vt(n)}throw Error(s(438,String(n)))}function Tu(n){var o=null,a=_e.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Zr(),_e.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(n),u=0;u<n;u++)a[u]=pe;return o.index++,a}function Dn(n,o){return typeof o=="function"?o(n):o}function ta(n){var o=tt();return Eu(o,Be,n)}function Eu(n,o,a){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}o.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{o=g.next;var b=S=null,R=null,O=o,H=!1;do{var J=O.lane&-536870913;if(J!==O.lane?(Ae&J)===J:(Mn&J)===J){var B=O.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),J===To&&(H=!0);else if((Mn&B)===B){O=O.next,B===To&&(H=!0);continue}else J={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},R===null?(b=R=J,S=y):R=R.next=J,_e.lanes|=B,di|=B;J=O.action,Vi&&a(y,J),y=O.hasEagerState?O.eagerState:a(y,J)}else B={lane:J,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},R===null?(b=R=B,S=y):R=R.next=B,_e.lanes|=J,di|=J;O=O.next}while(O!==null&&O!==o);if(R===null?S=y:R.next=b,!Vt(y,n.memoizedState)&&(ot=!0,H&&(a=Eo,a!==null)))throw a;n.memoizedState=y,n.baseState=S,n.baseQueue=R,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function bu(n){var o=tt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,y=o.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);Vt(y,o.memoizedState)||(ot=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),a.lastRenderedState=y}return[y,u]}function sh(n,o,a){var u=_e,g=tt(),y=Re;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=o();var S=!Vt((Be||g).memoizedState,a);if(S&&(g.memoizedState=a,ot=!0),g=g.queue,xu(lh.bind(null,u,g,n),[n]),g.getSnapshot!==o||S||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,No(9,{destroy:void 0},ah.bind(null,u,g,a,o),null),ze===null)throw Error(s(349));y||(Mn&127)!==0||rh(u,o,a)}return a}function rh(n,o,a){n.flags|=16384,n={getSnapshot:o,value:a},o=_e.updateQueue,o===null?(o=Zr(),_e.updateQueue=o,o.stores=[n]):(a=o.stores,a===null?o.stores=[n]:a.push(n))}function ah(n,o,a,u){o.value=a,o.getSnapshot=u,uh(o)&&ch(n)}function lh(n,o,a){return a(function(){uh(o)&&ch(n)})}function uh(n){var o=n.getSnapshot;n=n.value;try{var a=o();return!Vt(n,a)}catch{return!0}}function ch(n){var o=Mi(n,2);o!==null&&Gt(o,n,2)}function Au(n){var o=Ct();if(typeof n=="function"){var a=n;if(n=a(),Vi){Xn(!0);try{a()}finally{Xn(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},o}function dh(n,o,a,u){return n.baseState=a,Eu(n,Be,typeof u=="function"?u:Dn)}function b_(n,o,a,u,g){if(oa(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};V.T!==null?a(!0):y.isTransition=!1,u(y),a=o.pending,a===null?(y.next=o.pending=y,fh(o,y)):(y.next=a.next,o.pending=a.next=y)}}function fh(n,o){var a=o.action,u=o.payload,g=n.state;if(o.isTransition){var y=V.T,S={};V.T=S;try{var b=a(g,u),R=V.S;R!==null&&R(S,b),hh(n,o,b)}catch(O){Cu(n,o,O)}finally{y!==null&&S.types!==null&&(y.types=S.types),V.T=y}}else try{y=a(g,u),hh(n,o,y)}catch(O){Cu(n,o,O)}}function hh(n,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){ph(n,o,u)},function(u){return Cu(n,o,u)}):ph(n,o,a)}function ph(n,o,a){o.status="fulfilled",o.value=a,mh(o),n.state=a,o=n.pending,o!==null&&(a=o.next,a===o?n.pending=null:(a=a.next,o.next=a,fh(n,a)))}function Cu(n,o,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,mh(o),o=o.next;while(o!==u)}n.action=null}function mh(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function gh(n,o){return o}function yh(n,o){if(Re){var a=ze.formState;if(a!==null){e:{var u=_e;if(Re){if(Je){t:{for(var g=Je,y=nn;g.nodeType!==8;){if(!y){g=null;break t}if(g=sn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Je=sn(g.nextSibling),u=g.data==="F!";break e}}ni(u)}u=!1}u&&(o=a[0])}}return a=Ct(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gh,lastRenderedState:o},a.queue=u,a=Uh.bind(null,_e,u),u.dispatch=a,u=Au(!1),y=Mu.bind(null,_e,!1,u.queue),u=Ct(),g={state:o,dispatch:null,action:n,pending:null},u.queue=g,a=b_.bind(null,_e,g,y,a),g.dispatch=a,u.memoizedState=n,[o,a,!1]}function vh(n){var o=tt();return _h(o,Be,n)}function _h(n,o,a){if(o=Eu(n,o,gh)[0],n=ta(Dn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Us(o)}catch(S){throw S===bo?Fr:S}else u=o;o=tt();var g=o.queue,y=g.dispatch;return a!==o.memoizedState&&(_e.flags|=2048,No(9,{destroy:void 0},A_.bind(null,g,a),null)),[u,y,n]}function A_(n,o){n.action=o}function wh(n){var o=tt(),a=Be;if(a!==null)return _h(o,a,n);tt(),o=o.memoizedState,a=tt();var u=a.queue.dispatch;return a.memoizedState=n,[o,u,!1]}function No(n,o,a,u){return n={tag:n,create:a,deps:u,inst:o,next:null},o=_e.updateQueue,o===null&&(o=Zr(),_e.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,o.lastEffect=n),n}function Sh(){return tt().memoizedState}function na(n,o,a,u){var g=Ct();_e.flags|=n,g.memoizedState=No(1|o,{destroy:void 0},a,u===void 0?null:u)}function ia(n,o,a,u){var g=tt();u=u===void 0?null:u;var y=g.memoizedState.inst;Be!==null&&u!==null&&yu(u,Be.memoizedState.deps)?g.memoizedState=No(o,y,a,u):(_e.flags|=n,g.memoizedState=No(1|o,y,a,u))}function Th(n,o){na(8390656,8,n,o)}function xu(n,o){ia(2048,8,n,o)}function C_(n){_e.flags|=4;var o=_e.updateQueue;if(o===null)o=Zr(),_e.updateQueue=o,o.events=[n];else{var a=o.events;a===null?o.events=[n]:a.push(n)}}function Eh(n){var o=tt().memoizedState;return C_({ref:o,nextImpl:n}),function(){if((Ue&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function bh(n,o){return ia(4,2,n,o)}function Ah(n,o){return ia(4,4,n,o)}function Ch(n,o){if(typeof o=="function"){n=n();var a=o(n);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function xh(n,o,a){a=a!=null?a.concat([n]):null,ia(4,4,Ch.bind(null,o,n),a)}function Ru(){}function Rh(n,o){var a=tt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&yu(o,u[1])?u[0]:(a.memoizedState=[n,o],n)}function Nh(n,o){var a=tt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&yu(o,u[1]))return u[0];if(u=n(),Vi){Xn(!0);try{n()}finally{Xn(!1)}}return a.memoizedState=[u,o],u}function Nu(n,o,a){return a===void 0||(Mn&1073741824)!==0&&(Ae&261930)===0?n.memoizedState=o:(n.memoizedState=a,n=Ip(),_e.lanes|=n,di|=n,a)}function Ih(n,o,a,u){return Vt(a,o)?a:Co.current!==null?(n=Nu(n,a,u),Vt(n,o)||(ot=!0),n):(Mn&42)===0||(Mn&1073741824)!==0&&(Ae&261930)===0?(ot=!0,n.memoizedState=a):(n=Ip(),_e.lanes|=n,di|=n,o)}function kh(n,o,a,u,g){var y=X.p;X.p=y!==0&&8>y?y:8;var S=V.T,b={};V.T=b,Mu(n,!1,o,a);try{var R=g(),O=V.S;if(O!==null&&O(b,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var H=S_(R,u);Os(n,o,H,jt(n))}else Os(n,o,u,jt(n))}catch(J){Os(n,o,{then:function(){},status:"rejected",reason:J},jt())}finally{X.p=y,S!==null&&b.types!==null&&(S.types=b.types),V.T=S}}function x_(){}function Iu(n,o,a,u){if(n.tag!==5)throw Error(s(476));var g=Mh(n).queue;kh(n,g,o,ne,a===null?x_:function(){return Dh(n),a(u)})}function Mh(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:ne},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:a},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function Dh(n){var o=Mh(n);o.next===null&&(o=n.alternate.memoizedState),Os(n,o.next.queue,{},jt())}function ku(){return vt(er)}function Ph(){return tt().memoizedState}function Lh(){return tt().memoizedState}function R_(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var a=jt();n=si(a);var u=ri(o,n,a);u!==null&&(Gt(u,o,a),Ms(u,o,a)),o={cache:ru()},n.payload=o;return}o=o.return}}function N_(n,o,a){var u=jt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oa(n)?Oh(o,a):(a=Yl(n,o,a,u),a!==null&&(Gt(a,n,u),Gh(a,o,u)))}function Uh(n,o,a){var u=jt();Os(n,o,a,u)}function Os(n,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oa(n))Oh(o,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,b=y(S,a);if(g.hasEagerState=!0,g.eagerState=b,Vt(b,S))return Gr(n,o,g,0),ze===null&&Or(),!1}catch{}finally{}if(a=Yl(n,o,g,u),a!==null)return Gt(a,n,u),Gh(a,o,u),!0}return!1}function Mu(n,o,a,u){if(u={lane:2,revertLane:cc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},oa(n)){if(o)throw Error(s(479))}else o=Yl(n,a,u,2),o!==null&&Gt(o,n,2)}function oa(n){var o=n.alternate;return n===_e||o!==null&&o===_e}function Oh(n,o){xo=Xr=!0;var a=n.pending;a===null?o.next=o:(o.next=a.next,a.next=o),n.pending=o}function Gh(n,o,a){if((a&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,a|=u,o.lanes=a,Hd(n,a)}}var Gs={readContext:vt,use:ea,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Gs.useEffectEvent=Xe;var Bh={readContext:vt,use:ea,useCallback:function(n,o){return Ct().memoizedState=[n,o===void 0?null:o],n},useContext:vt,useEffect:Th,useImperativeHandle:function(n,o,a){a=a!=null?a.concat([n]):null,na(4194308,4,Ch.bind(null,o,n),a)},useLayoutEffect:function(n,o){return na(4194308,4,n,o)},useInsertionEffect:function(n,o){na(4,2,n,o)},useMemo:function(n,o){var a=Ct();o=o===void 0?null:o;var u=n();if(Vi){Xn(!0);try{n()}finally{Xn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(n,o,a){var u=Ct();if(a!==void 0){var g=a(o);if(Vi){Xn(!0);try{a(o)}finally{Xn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=N_.bind(null,_e,n),[u.memoizedState,n]},useRef:function(n){var o=Ct();return n={current:n},o.memoizedState=n},useState:function(n){n=Au(n);var o=n.queue,a=Uh.bind(null,_e,o);return o.dispatch=a,[n.memoizedState,a]},useDebugValue:Ru,useDeferredValue:function(n,o){var a=Ct();return Nu(a,n,o)},useTransition:function(){var n=Au(!1);return n=kh.bind(null,_e,n.queue,!0,!1),Ct().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,a){var u=_e,g=Ct();if(Re){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),ze===null)throw Error(s(349));(Ae&127)!==0||rh(u,o,a)}g.memoizedState=a;var y={value:a,getSnapshot:o};return g.queue=y,Th(lh.bind(null,u,y,n),[n]),u.flags|=2048,No(9,{destroy:void 0},ah.bind(null,u,y,a,o),null),a},useId:function(){var n=Ct(),o=ze.identifierPrefix;if(Re){var a=_n,u=vn;a=(u&~(1<<32-qt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Qr++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=T_++,o="_"+o+"r_"+a.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:ku,useFormState:yh,useActionState:yh,useOptimistic:function(n){var o=Ct();o.memoizedState=o.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Mu.bind(null,_e,!0,a),a.dispatch=o,[n,o]},useMemoCache:Tu,useCacheRefresh:function(){return Ct().memoizedState=R_.bind(null,_e)},useEffectEvent:function(n){var o=Ct(),a={impl:n};return o.memoizedState=a,function(){if((Ue&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Du={readContext:vt,use:ea,useCallback:Rh,useContext:vt,useEffect:xu,useImperativeHandle:xh,useInsertionEffect:bh,useLayoutEffect:Ah,useMemo:Nh,useReducer:ta,useRef:Sh,useState:function(){return ta(Dn)},useDebugValue:Ru,useDeferredValue:function(n,o){var a=tt();return Ih(a,Be.memoizedState,n,o)},useTransition:function(){var n=ta(Dn)[0],o=tt().memoizedState;return[typeof n=="boolean"?n:Us(n),o]},useSyncExternalStore:sh,useId:Ph,useHostTransitionStatus:ku,useFormState:vh,useActionState:vh,useOptimistic:function(n,o){var a=tt();return dh(a,Be,n,o)},useMemoCache:Tu,useCacheRefresh:Lh};Du.useEffectEvent=Eh;var qh={readContext:vt,use:ea,useCallback:Rh,useContext:vt,useEffect:xu,useImperativeHandle:xh,useInsertionEffect:bh,useLayoutEffect:Ah,useMemo:Nh,useReducer:bu,useRef:Sh,useState:function(){return bu(Dn)},useDebugValue:Ru,useDeferredValue:function(n,o){var a=tt();return Be===null?Nu(a,n,o):Ih(a,Be.memoizedState,n,o)},useTransition:function(){var n=bu(Dn)[0],o=tt().memoizedState;return[typeof n=="boolean"?n:Us(n),o]},useSyncExternalStore:sh,useId:Ph,useHostTransitionStatus:ku,useFormState:wh,useActionState:wh,useOptimistic:function(n,o){var a=tt();return Be!==null?dh(a,Be,n,o):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Tu,useCacheRefresh:Lh};qh.useEffectEvent=Eh;function Pu(n,o,a,u){o=n.memoizedState,a=a(u,o),a=a==null?o:w({},o,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Lu={enqueueSetState:function(n,o,a){n=n._reactInternals;var u=jt(),g=si(u);g.payload=o,a!=null&&(g.callback=a),o=ri(n,g,u),o!==null&&(Gt(o,n,u),Ms(o,n,u))},enqueueReplaceState:function(n,o,a){n=n._reactInternals;var u=jt(),g=si(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=ri(n,g,u),o!==null&&(Gt(o,n,u),Ms(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var a=jt(),u=si(a);u.tag=2,o!=null&&(u.callback=o),o=ri(n,u,a),o!==null&&(Gt(o,n,a),Ms(o,n,a))}};function Vh(n,o,a,u,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):o.prototype&&o.prototype.isPureReactComponent?!bs(a,u)||!bs(g,y):!0}function Hh(n,o,a,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==n&&Lu.enqueueReplaceState(o,o.state,null)}function Hi(n,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(n=n.defaultProps){a===o&&(a=w({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function zh(n){Ur(n)}function $h(n){console.error(n)}function Fh(n){Ur(n)}function sa(n,o){try{var a=n.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Jh(n,o,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Uu(n,o,a){return a=si(a),a.tag=3,a.payload={element:null},a.callback=function(){sa(n,o)},a}function jh(n){return n=si(n),n.tag=3,n}function Kh(n,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){Jh(o,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Jh(o,a,u),typeof g!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function I_(n,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&So(o,a,g,!0),a=zt.current,a!==null){switch(a.tag){case 31:case 13:return on===null?ya():a.alternate===null&&Qe===0&&(Qe=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Jr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),ac(n,u,g)),!1;case 22:return a.flags|=65536,u===Jr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),ac(n,u,g)),!1}throw Error(s(435,a.tag))}return ac(n,u,g),ya(),!1}if(Re)return o=zt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==tu&&(n=Error(s(422),{cause:u}),xs(Zt(n,a)))):(u!==tu&&(o=Error(s(423),{cause:u}),xs(Zt(o,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Zt(u,a),g=Uu(n.stateNode,u,g),fu(n,g),Qe!==4&&(Qe=2)),!1;var y=Error(s(520),{cause:u});if(y=Zt(y,a),Js===null?Js=[y]:Js.push(y),Qe!==4&&(Qe=2),o===null)return!0;u=Zt(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=Uu(a.stateNode,u,n),fu(a,n),!1;case 1:if(o=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fi===null||!fi.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=jh(g),Kh(g,n,a,u),fu(a,g),!1}a=a.return}while(a!==null);return!1}var Ou=Error(s(461)),ot=!1;function _t(n,o,a,u){o.child=n===null?Qf(o,null,a,u):qi(o,n.child,a,u)}function Yh(n,o,a,u,g){a=a.render;var y=o.ref;if("ref"in u){var S={};for(var b in u)b!=="ref"&&(S[b]=u[b])}else S=u;return Ui(o),u=vu(n,o,a,S,y,g),b=_u(),n!==null&&!ot?(wu(n,o,g),Pn(n,o,g)):(Re&&b&&Zl(o),o.flags|=1,_t(n,o,u,g),o.child)}function Wh(n,o,a,u,g){if(n===null){var y=a.type;return typeof y=="function"&&!Wl(y)&&y.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=y,Xh(n,o,y,u,g)):(n=qr(a.type,null,u,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!Fu(n,g)){var S=y.memoizedProps;if(a=a.compare,a=a!==null?a:bs,a(S,u)&&n.ref===o.ref)return Pn(n,o,g)}return o.flags|=1,n=Rn(y,u),n.ref=o.ref,n.return=o,o.child=n}function Xh(n,o,a,u,g){if(n!==null){var y=n.memoizedProps;if(bs(y,u)&&n.ref===o.ref)if(ot=!1,o.pendingProps=u=y,Fu(n,g))(n.flags&131072)!==0&&(ot=!0);else return o.lanes=n.lanes,Pn(n,o,g)}return Gu(n,o,a,u,g)}function Qh(n,o,a,u){var g=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,n!==null){for(u=o.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,o.child=null;return Zh(n,o,y,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&$r(o,y!==null?y.cachePool:null),y!==null?th(o,y):pu(),nh(o);else return u=o.lanes=536870912,Zh(n,o,y!==null?y.baseLanes|a:a,a,u)}else y!==null?($r(o,y.cachePool),th(o,y),li(),o.memoizedState=null):(n!==null&&$r(o,null),pu(),li());return _t(n,o,g,a),o.child}function Bs(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Zh(n,o,a,u,g){var y=lu();return y=y===null?null:{parent:nt._currentValue,pool:y},o.memoizedState={baseLanes:a,cachePool:y},n!==null&&$r(o,null),pu(),nh(o),n!==null&&So(n,o,u,!0),o.childLanes=g,null}function ra(n,o){return o=la({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function ep(n,o,a){return qi(o,n.child,null,a),n=ra(o,o.pendingProps),n.flags|=2,$t(o),o.memoizedState=null,n}function k_(n,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(Re){if(u.mode==="hidden")return n=ra(o,u),o.lanes=536870912,Bs(null,n);if(gu(o),(n=Je)?(n=fm(n,nn),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ei!==null?{id:vn,overflow:_n}:null,retryLane:536870912,hydrationErrors:null},a=Of(n),a.return=o,o.child=a,yt=o,Je=null)):n=null,n===null)throw ni(o);return o.lanes=536870912,null}return ra(o,u)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(gu(o),g)if(o.flags&256)o.flags&=-257,o=ep(n,o,a);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(ot||So(n,o,a,!1),g=(a&n.childLanes)!==0,ot||g){if(u=ze,u!==null&&(S=zd(u,a),S!==0&&S!==y.retryLane))throw y.retryLane=S,Mi(n,S),Gt(u,n,S),Ou;ya(),o=ep(n,o,a)}else n=y.treeContext,Je=sn(S.nextSibling),yt=o,Re=!0,ti=null,nn=!1,n!==null&&qf(o,n),o=ra(o,u),o.flags|=4096;return o}return n=Rn(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function aa(n,o){var a=o.ref;if(a===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(o.flags|=4194816)}}function Gu(n,o,a,u,g){return Ui(o),a=vu(n,o,a,u,void 0,g),u=_u(),n!==null&&!ot?(wu(n,o,g),Pn(n,o,g)):(Re&&u&&Zl(o),o.flags|=1,_t(n,o,a,g),o.child)}function tp(n,o,a,u,g,y){return Ui(o),o.updateQueue=null,a=oh(o,u,a,g),ih(n),u=_u(),n!==null&&!ot?(wu(n,o,y),Pn(n,o,y)):(Re&&u&&Zl(o),o.flags|=1,_t(n,o,a,y),o.child)}function np(n,o,a,u,g){if(Ui(o),o.stateNode===null){var y=yo,S=a.contextType;typeof S=="object"&&S!==null&&(y=vt(S)),y=new a(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lu,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},cu(o),S=a.contextType,y.context=typeof S=="object"&&S!==null?vt(S):yo,y.state=o.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Pu(o,a,S,u),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Lu.enqueueReplaceState(y,y.state,null),Ps(o,u,y,g),Ds(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var b=o.memoizedProps,R=Hi(a,b);y.props=R;var O=y.context,H=a.contextType;S=yo,typeof H=="object"&&H!==null&&(S=vt(H));var J=a.getDerivedStateFromProps;H=typeof J=="function"||typeof y.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b||O!==S)&&Hh(o,y,u,S),oi=!1;var B=o.memoizedState;y.state=B,Ps(o,u,y,g),Ds(),O=o.memoizedState,b||B!==O||oi?(typeof J=="function"&&(Pu(o,a,J,u),O=o.memoizedState),(R=oi||Vh(o,a,R,u,B,O,S))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=O),y.props=u,y.state=O,y.context=S,u=R):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,du(n,o),S=o.memoizedProps,H=Hi(a,S),y.props=H,J=o.pendingProps,B=y.context,O=a.contextType,R=yo,typeof O=="object"&&O!==null&&(R=vt(O)),b=a.getDerivedStateFromProps,(O=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==J||B!==R)&&Hh(o,y,u,R),oi=!1,B=o.memoizedState,y.state=B,Ps(o,u,y,g),Ds();var q=o.memoizedState;S!==J||B!==q||oi||n!==null&&n.dependencies!==null&&Hr(n.dependencies)?(typeof b=="function"&&(Pu(o,a,b,u),q=o.memoizedState),(H=oi||Vh(o,a,H,u,B,q,R)||n!==null&&n.dependencies!==null&&Hr(n.dependencies))?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,q,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,q,R)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&B===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&B===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=q),y.props=u,y.state=q,y.context=R,u=H):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&B===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&B===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,aa(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=qi(o,n.child,null,g),o.child=qi(o,null,a,g)):_t(n,o,a,g),o.memoizedState=y.state,n=o.child):n=Pn(n,o,g),n}function ip(n,o,a,u){return Pi(),o.flags|=256,_t(n,o,a,u),o.child}var Bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qu(n){return{baseLanes:n,cachePool:Jf()}}function Vu(n,o,a){return n=n!==null?n.childLanes&~a:0,o&&(n|=Jt),n}function op(n,o,a){var u=o.pendingProps,g=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(et.current&2)!==0),S&&(g=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,n===null){if(Re){if(g?ai(o):li(),(n=Je)?(n=fm(n,nn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ei!==null?{id:vn,overflow:_n}:null,retryLane:536870912,hydrationErrors:null},a=Of(n),a.return=o,o.child=a,yt=o,Je=null)):n=null,n===null)throw ni(o);return Ec(n)?o.lanes=32:o.lanes=536870912,null}var b=u.children;return u=u.fallback,g?(li(),g=o.mode,b=la({mode:"hidden",children:b},g),u=Di(u,g,a,null),b.return=o,u.return=o,b.sibling=u,o.child=b,u=o.child,u.memoizedState=qu(a),u.childLanes=Vu(n,S,a),o.memoizedState=Bu,Bs(null,u)):(ai(o),Hu(o,b))}var R=n.memoizedState;if(R!==null&&(b=R.dehydrated,b!==null)){if(y)o.flags&256?(ai(o),o.flags&=-257,o=zu(n,o,a)):o.memoizedState!==null?(li(),o.child=n.child,o.flags|=128,o=null):(li(),b=u.fallback,g=o.mode,u=la({mode:"visible",children:u.children},g),b=Di(b,g,a,null),b.flags|=2,u.return=o,b.return=o,u.sibling=b,o.child=u,qi(o,n.child,null,a),u=o.child,u.memoizedState=qu(a),u.childLanes=Vu(n,S,a),o.memoizedState=Bu,o=Bs(null,u));else if(ai(o),Ec(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(s(419)),u.stack="",u.digest=S,xs({value:u,source:null,stack:null}),o=zu(n,o,a)}else if(ot||So(n,o,a,!1),S=(a&n.childLanes)!==0,ot||S){if(S=ze,S!==null&&(u=zd(S,a),u!==0&&u!==R.retryLane))throw R.retryLane=u,Mi(n,u),Gt(S,n,u),Ou;Tc(b)||ya(),o=zu(n,o,a)}else Tc(b)?(o.flags|=192,o.child=n.child,o=null):(n=R.treeContext,Je=sn(b.nextSibling),yt=o,Re=!0,ti=null,nn=!1,n!==null&&qf(o,n),o=Hu(o,u.children),o.flags|=4096);return o}return g?(li(),b=u.fallback,g=o.mode,R=n.child,O=R.sibling,u=Rn(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,O!==null?b=Rn(O,b):(b=Di(b,g,a,null),b.flags|=2),b.return=o,u.return=o,u.sibling=b,o.child=u,Bs(null,u),u=o.child,b=n.child.memoizedState,b===null?b=qu(a):(g=b.cachePool,g!==null?(R=nt._currentValue,g=g.parent!==R?{parent:R,pool:R}:g):g=Jf(),b={baseLanes:b.baseLanes|a,cachePool:g}),u.memoizedState=b,u.childLanes=Vu(n,S,a),o.memoizedState=Bu,Bs(n.child,u)):(ai(o),a=n.child,n=a.sibling,a=Rn(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,n!==null&&(S=o.deletions,S===null?(o.deletions=[n],o.flags|=16):S.push(n)),o.child=a,o.memoizedState=null,a)}function Hu(n,o){return o=la({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function la(n,o){return n=Ht(22,n,null,o),n.lanes=0,n}function zu(n,o,a){return qi(o,n.child,null,a),n=Hu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function sp(n,o,a){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),ou(n.return,o,a)}function $u(n,o,a,u,g,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=y)}function rp(n,o,a){var u=o.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var S=et.current,b=(S&2)!==0;if(b?(S=S&1|2,o.flags|=128):S&=1,Q(et,S),_t(n,o,u,a),u=Re?Cs:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sp(n,a,o);else if(n.tag===19)sp(n,a,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)n=a.alternate,n!==null&&Wr(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),$u(o,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Wr(n)===null){o.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}$u(o,!0,a,null,y,u);break;case"together":$u(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Pn(n,o,a){if(n!==null&&(o.dependencies=n.dependencies),di|=o.lanes,(a&o.childLanes)===0)if(n!==null){if(So(n,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,a=Rn(n,n.pendingProps),o.child=a,a.return=o;n.sibling!==null;)n=n.sibling,a=a.sibling=Rn(n,n.pendingProps),a.return=o;a.sibling=null}return o.child}function Fu(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&Hr(n)))}function M_(n,o,a){switch(o.tag){case 3:pt(o,o.stateNode.containerInfo),ii(o,nt,n.memoizedState.cache),Pi();break;case 27:case 5:Ai(o);break;case 4:pt(o,o.stateNode.containerInfo);break;case 10:ii(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,gu(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(ai(o),o.flags|=128,null):(a&o.child.childLanes)!==0?op(n,o,a):(ai(o),n=Pn(n,o,a),n!==null?n.sibling:null);ai(o);break;case 19:var g=(n.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(So(n,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return rp(n,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(et,et.current),u)break;return null;case 22:return o.lanes=0,Qh(n,o,a,o.pendingProps);case 24:ii(o,nt,n.memoizedState.cache)}return Pn(n,o,a)}function ap(n,o,a){if(n!==null)if(n.memoizedProps!==o.pendingProps)ot=!0;else{if(!Fu(n,a)&&(o.flags&128)===0)return ot=!1,M_(n,o,a);ot=(n.flags&131072)!==0}else ot=!1,Re&&(o.flags&1048576)!==0&&Bf(o,Cs,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Gi(o.elementType),o.type=n,typeof n=="function")Wl(n)?(u=Hi(n,u),o.tag=1,o=np(null,o,n,u,a)):(o.tag=0,o=Gu(null,o,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===L){o.tag=11,o=Yh(null,o,n,u,a);break e}else if(g===$){o.tag=14,o=Wh(null,o,n,u,a);break e}}throw o=Ne(n)||n,Error(s(306,o,""))}}return o;case 0:return Gu(n,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=Hi(u,o.pendingProps),np(n,o,u,g,a);case 3:e:{if(pt(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;g=y.element,du(n,o),Ps(o,u,null,a);var S=o.memoizedState;if(u=S.cache,ii(o,nt,u),u!==y.cache&&su(o,[nt],a,!0),Ds(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=ip(n,o,u,a);break e}else if(u!==g){g=Zt(Error(s(424)),o),xs(g),o=ip(n,o,u,a);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Je=sn(n.firstChild),yt=o,Re=!0,ti=null,nn=!0,a=Qf(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pi(),u===g){o=Pn(n,o,a);break e}_t(n,o,u,a)}o=o.child}return o;case 26:return aa(n,o),n===null?(a=vm(o.type,null,o.pendingProps,null))?o.memoizedState=a:Re||(a=o.type,n=o.pendingProps,u=ba(ve.current).createElement(a),u[gt]=o,u[Mt]=n,wt(u,a,n),dt(u),o.stateNode=u):o.memoizedState=vm(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Ai(o),n===null&&Re&&(u=o.stateNode=mm(o.type,o.pendingProps,ve.current),yt=o,nn=!0,g=Je,gi(o.type)?(bc=g,Je=sn(u.firstChild)):Je=g),_t(n,o,o.pendingProps.children,a),aa(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&Re&&((g=u=Je)&&(u=lw(u,o.type,o.pendingProps,nn),u!==null?(o.stateNode=u,yt=o,Je=sn(u.firstChild),nn=!1,g=!0):g=!1),g||ni(o)),Ai(o),g=o.type,y=o.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,_c(g,y)?u=null:S!==null&&_c(g,S)&&(o.flags|=32),o.memoizedState!==null&&(g=vu(n,o,E_,null,null,a),er._currentValue=g),aa(n,o),_t(n,o,u,a),o.child;case 6:return n===null&&Re&&((n=a=Je)&&(a=uw(a,o.pendingProps,nn),a!==null?(o.stateNode=a,yt=o,Je=null,n=!0):n=!1),n||ni(o)),null;case 13:return op(n,o,a);case 4:return pt(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=qi(o,null,u,a):_t(n,o,u,a),o.child;case 11:return Yh(n,o,o.type,o.pendingProps,a);case 7:return _t(n,o,o.pendingProps,a),o.child;case 8:return _t(n,o,o.pendingProps.children,a),o.child;case 12:return _t(n,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,ii(o,o.type,u.value),_t(n,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,Ui(o),g=vt(g),u=u(g),o.flags|=1,_t(n,o,u,a),o.child;case 14:return Wh(n,o,o.type,o.pendingProps,a);case 15:return Xh(n,o,o.type,o.pendingProps,a);case 19:return rp(n,o,a);case 31:return k_(n,o,a);case 22:return Qh(n,o,a,o.pendingProps);case 24:return Ui(o),u=vt(nt),n===null?(g=lu(),g===null&&(g=ze,y=ru(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),o.memoizedState={parent:u,cache:g},cu(o),ii(o,nt,g)):((n.lanes&a)!==0&&(du(n,o),Ps(o,null,null,a),Ds()),g=n.memoizedState,y=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ii(o,nt,u)):(u=y.cache,ii(o,nt,u),u!==g.cache&&su(o,[nt],a,!0))),_t(n,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Ln(n){n.flags|=4}function Ju(n,o,a,u,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Pp())n.flags|=8192;else throw Bi=Jr,uu}else n.flags&=-16777217}function lp(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Em(o))if(Pp())n.flags|=8192;else throw Bi=Jr,uu}function ua(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?qd():536870912,n.lanes|=o,Do|=o)}function qs(n,o){if(!Re)switch(n.tailMode){case"hidden":o=n.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function je(n){var o=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(o)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,o}function D_(n,o,a){var u=o.pendingProps;switch(eu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(o),null;case 1:return je(o),null;case 3:return a=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),kn(nt),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(wo(o)?Ln(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,nu())),je(o),null;case 26:var g=o.type,y=o.memoizedState;return n===null?(Ln(o),y!==null?(je(o),lp(o,y)):(je(o),Ju(o,g,null,u,a))):y?y!==n.memoizedState?(Ln(o),je(o),lp(o,y)):(je(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ln(o),je(o),Ju(o,g,n,u,a)),null;case 27:if(eo(o),a=ve.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return je(o),null}n=ee.current,wo(o)?Vf(o):(n=mm(g,u,a),o.stateNode=n,Ln(o))}return je(o),null;case 5:if(eo(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return je(o),null}if(y=ee.current,wo(o))Vf(o);else{var S=ba(ve.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}y[gt]=o,y[Mt]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(wt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ln(o)}}return je(o),Ju(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,a),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&Ln(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=ve.current,wo(o)){if(n=o.stateNode,a=o.memoizedProps,u=null,g=yt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[gt]=o,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||om(n.nodeValue,a)),n||ni(o,!0)}else n=ba(n).createTextNode(u),n[gt]=o,o.stateNode=n}return je(o),null;case 31:if(a=o.memoizedState,n===null||n.memoizedState!==null){if(u=wo(o),a!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[gt]=o}else Pi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;je(o),n=!1}else a=nu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return o.flags&256?($t(o),o):($t(o),null);if((o.flags&128)!==0)throw Error(s(558))}return je(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=wo(o),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[gt]=o}else Pi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;je(o),g=!1}else g=nu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?($t(o),o):($t(o),null)}return $t(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==n&&a&&(o.child.flags|=8192),ua(o,o.updateQueue),je(o),null);case 4:return We(),n===null&&pc(o.stateNode.containerInfo),je(o),null;case 10:return kn(o.type),je(o),null;case 19:if(F(et),u=o.memoizedState,u===null)return je(o),null;if(g=(o.flags&128)!==0,y=u.rendering,y===null)if(g)qs(u,!1);else{if(Qe!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Wr(n),y!==null){for(o.flags|=128,qs(u,!1),n=y.updateQueue,o.updateQueue=n,ua(o,n),o.subtreeFlags=0,n=a,a=o.child;a!==null;)Uf(a,n),a=a.sibling;return Q(et,et.current&1|2),Re&&Nn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&fe()>pa&&(o.flags|=128,g=!0,qs(u,!1),o.lanes=4194304)}else{if(!g)if(n=Wr(y),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,ua(o,n),qs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Re)return je(o),null}else 2*fe()-u.renderingStartTime>pa&&a!==536870912&&(o.flags|=128,g=!0,qs(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=fe(),n.sibling=null,a=et.current,Q(et,g?a&1|2:a&1),Re&&Nn(o,u.treeForkCount),n):(je(o),null);case 22:case 23:return $t(o),mu(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(je(o),o.subtreeFlags&6&&(o.flags|=8192)):je(o),a=o.updateQueue,a!==null&&ua(o,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),n!==null&&F(Oi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),kn(nt),je(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function P_(n,o){switch(eu(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return kn(nt),We(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return eo(o),null;case 31:if(o.memoizedState!==null){if($t(o),o.alternate===null)throw Error(s(340));Pi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if($t(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Pi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return F(et),null;case 4:return We(),null;case 10:return kn(o.type),null;case 22:case 23:return $t(o),mu(),n!==null&&F(Oi),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return kn(nt),null;case 25:return null;default:return null}}function up(n,o){switch(eu(o),o.tag){case 3:kn(nt),We();break;case 26:case 27:case 5:eo(o);break;case 4:We();break;case 31:o.memoizedState!==null&&$t(o);break;case 13:$t(o);break;case 19:F(et);break;case 10:kn(o.type);break;case 22:case 23:$t(o),mu(),n!==null&&F(Oi);break;case 24:kn(nt)}}function Vs(n,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var y=a.create,S=a.inst;u=y(),S.destroy=u}a=a.next}while(a!==g)}}catch(b){Ge(o,o.return,b)}}function ui(n,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var S=u.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,g=o;var R=a,O=b;try{O()}catch(H){Ge(g,R,H)}}}u=u.next}while(u!==y)}}catch(H){Ge(o,o.return,H)}}function cp(n){var o=n.updateQueue;if(o!==null){var a=n.stateNode;try{eh(o,a)}catch(u){Ge(n,n.return,u)}}}function dp(n,o,a){a.props=Hi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Ge(n,o,u)}}function Hs(n,o){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Ge(n,o,g)}}function wn(n,o){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ge(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ge(n,o,g)}else a.current=null}function fp(n){var o=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ge(n,n.return,g)}}function ju(n,o,a){try{var u=n.stateNode;nw(u,n.type,a,o),u[Mt]=o}catch(g){Ge(n,n.return,g)}}function hp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&gi(n.type)||n.tag===4}function Ku(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&gi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yu(n,o,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(n),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Cn));else if(u!==4&&(u===27&&gi(n.type)&&(a=n.stateNode,o=null),n=n.child,n!==null))for(Yu(n,o,a),n=n.sibling;n!==null;)Yu(n,o,a),n=n.sibling}function ca(n,o,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?a.insertBefore(n,o):a.appendChild(n);else if(u!==4&&(u===27&&gi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ca(n,o,a),n=n.sibling;n!==null;)ca(n,o,a),n=n.sibling}function pp(n){var o=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);wt(o,u,a),o[gt]=n,o[Mt]=a}catch(y){Ge(n,n.return,y)}}var Un=!1,st=!1,Wu=!1,mp=typeof WeakSet=="function"?WeakSet:Set,ft=null;function L_(n,o){if(n=n.containerInfo,yc=ka,n=xf(n),zl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var S=0,b=-1,R=-1,O=0,H=0,J=n,B=null;t:for(;;){for(var q;J!==a||g!==0&&J.nodeType!==3||(b=S+g),J!==y||u!==0&&J.nodeType!==3||(R=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(q=J.firstChild)!==null;)B=J,J=q;for(;;){if(J===n)break t;if(B===a&&++O===g&&(b=S),B===y&&++H===u&&(R=S),(q=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=q}a=b===-1||R===-1?null:{start:b,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(vc={focusedElem:n,selectionRange:a},ka=!1,ft=o;ft!==null;)if(o=ft,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,ft=n;else for(;ft!==null;){switch(o=ft,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,a=o,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var te=Hi(a.type,g);n=u.getSnapshotBeforeUpdate(te,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(le){Ge(a,a.return,le)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,a=n.nodeType,a===9)Sc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,ft=n;break}ft=o.return}}function gp(n,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Gn(n,a),u&4&&Vs(5,a);break;case 1:if(Gn(n,a),u&4)if(n=a.stateNode,o===null)try{n.componentDidMount()}catch(S){Ge(a,a.return,S)}else{var g=Hi(a.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Ge(a,a.return,S)}}u&64&&cp(a),u&512&&Hs(a,a.return);break;case 3:if(Gn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{eh(n,o)}catch(S){Ge(a,a.return,S)}}break;case 27:o===null&&u&4&&pp(a);case 26:case 5:Gn(n,a),o===null&&u&4&&fp(a),u&512&&Hs(a,a.return);break;case 12:Gn(n,a);break;case 31:Gn(n,a),u&4&&_p(n,a);break;case 13:Gn(n,a),u&4&&wp(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=$_.bind(null,a),cw(n,a))));break;case 22:if(u=a.memoizedState!==null||Un,!u){o=o!==null&&o.memoizedState!==null||st,g=Un;var y=st;Un=u,(st=o)&&!y?Bn(n,a,(a.subtreeFlags&8772)!==0):Gn(n,a),Un=g,st=y}break;case 30:break;default:Gn(n,a)}}function yp(n){var o=n.alternate;o!==null&&(n.alternate=null,yp(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Cl(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ke=null,Pt=!1;function On(n,o,a){for(a=a.child;a!==null;)vp(n,o,a),a=a.sibling}function vp(n,o,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:st||wn(a,o),On(n,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:st||wn(a,o);var u=Ke,g=Pt;gi(a.type)&&(Ke=a.stateNode,Pt=!1),On(n,o,a),Xs(a.stateNode),Ke=u,Pt=g;break;case 5:st||wn(a,o);case 6:if(u=Ke,g=Pt,Ke=null,On(n,o,a),Ke=u,Pt=g,Ke!==null)if(Pt)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(a.stateNode)}catch(y){Ge(a,o,y)}else try{Ke.removeChild(a.stateNode)}catch(y){Ge(a,o,y)}break;case 18:Ke!==null&&(Pt?(n=Ke,cm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Vo(n)):cm(Ke,a.stateNode));break;case 4:u=Ke,g=Pt,Ke=a.stateNode.containerInfo,Pt=!0,On(n,o,a),Ke=u,Pt=g;break;case 0:case 11:case 14:case 15:ui(2,a,o),st||ui(4,a,o),On(n,o,a);break;case 1:st||(wn(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&dp(a,o,u)),On(n,o,a);break;case 21:On(n,o,a);break;case 22:st=(u=st)||a.memoizedState!==null,On(n,o,a),st=u;break;default:On(n,o,a)}}function _p(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Vo(n)}catch(a){Ge(o,o.return,a)}}}function wp(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Vo(n)}catch(a){Ge(o,o.return,a)}}function U_(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new mp),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new mp),o;default:throw Error(s(435,n.tag))}}function da(n,o){var a=U_(n);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=F_.bind(null,n,u);u.then(g,g)}})}function Lt(n,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=n,S=o,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(gi(b.type)){Ke=b.stateNode,Pt=!1;break e}break;case 5:Ke=b.stateNode,Pt=!1;break e;case 3:case 4:Ke=b.stateNode.containerInfo,Pt=!0;break e}b=b.return}if(Ke===null)throw Error(s(160));vp(y,S,g),Ke=null,Pt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Sp(o,n),o=o.sibling}var cn=null;function Sp(n,o){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Lt(o,n),Ut(n),u&4&&(ui(3,n,n.return),Vs(3,n),ui(5,n,n.return));break;case 1:Lt(o,n),Ut(n),u&512&&(st||a===null||wn(a,a.return)),u&64&&Un&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=cn;if(Lt(o,n),Ut(n),u&512&&(st||a===null||wn(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[ms]||y[gt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),wt(y,u,a),y[gt]=n,dt(y),u=y;break e;case"link":var S=Sm("link","href",g).get(u+(a.href||""));if(S){for(var b=0;b<S.length;b++)if(y=S[b],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(b,1);break t}}y=g.createElement(u),wt(y,u,a),g.head.appendChild(y);break;case"meta":if(S=Sm("meta","content",g).get(u+(a.content||""))){for(b=0;b<S.length;b++)if(y=S[b],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(b,1);break t}}y=g.createElement(u),wt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[gt]=n,dt(y),u=y}n.stateNode=u}else Tm(g,n.type,n.stateNode);else n.stateNode=wm(g,u,n.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?Tm(g,n.type,n.stateNode):wm(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ju(n,n.memoizedProps,a.memoizedProps)}break;case 27:Lt(o,n),Ut(n),u&512&&(st||a===null||wn(a,a.return)),a!==null&&u&4&&ju(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Lt(o,n),Ut(n),u&512&&(st||a===null||wn(a,a.return)),n.flags&32){g=n.stateNode;try{uo(g,"")}catch(te){Ge(n,n.return,te)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,ju(n,g,a!==null?a.memoizedProps:g)),u&1024&&(Wu=!0);break;case 6:if(Lt(o,n),Ut(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(te){Ge(n,n.return,te)}}break;case 3:if(xa=null,g=cn,cn=Aa(o.containerInfo),Lt(o,n),cn=g,Ut(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Vo(o.containerInfo)}catch(te){Ge(n,n.return,te)}Wu&&(Wu=!1,Tp(n));break;case 4:u=cn,cn=Aa(n.stateNode.containerInfo),Lt(o,n),Ut(n),cn=u;break;case 12:Lt(o,n),Ut(n);break;case 31:Lt(o,n),Ut(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 13:Lt(o,n),Ut(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ha=fe()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 22:g=n.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,O=Un,H=st;if(Un=O||g,st=H||R,Lt(o,n),st=H,Un=O,Ut(n),u&8192)e:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||R||Un||st||zi(n)),a=null,o=n;;){if(o.tag===5||o.tag===26){if(a===null){R=a=o;try{if(y=R.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=R.stateNode;var J=R.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(te){Ge(R,R.return,te)}}}else if(o.tag===6){if(a===null){R=o;try{R.stateNode.nodeValue=g?"":R.memoizedProps}catch(te){Ge(R,R.return,te)}}}else if(o.tag===18){if(a===null){R=o;try{var q=R.stateNode;g?dm(q,!0):dm(R.stateNode,!1)}catch(te){Ge(R,R.return,te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,da(n,a))));break;case 19:Lt(o,n),Ut(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 30:break;case 21:break;default:Lt(o,n),Ut(n)}}function Ut(n){var o=n.flags;if(o&2){try{for(var a,u=n.return;u!==null;){if(hp(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=Ku(n);ca(n,y,g);break;case 5:var S=a.stateNode;a.flags&32&&(uo(S,""),a.flags&=-33);var b=Ku(n);ca(n,b,S);break;case 3:case 4:var R=a.stateNode.containerInfo,O=Ku(n);Yu(n,O,R);break;default:throw Error(s(161))}}catch(H){Ge(n,n.return,H)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Tp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Tp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Gn(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)gp(n,o.alternate,o),o=o.sibling}function zi(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:ui(4,o,o.return),zi(o);break;case 1:wn(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&dp(o,o.return,a),zi(o);break;case 27:Xs(o.stateNode);case 26:case 5:wn(o,o.return),zi(o);break;case 22:o.memoizedState===null&&zi(o);break;case 30:zi(o);break;default:zi(o)}n=n.sibling}}function Bn(n,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=n,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:Bn(g,y,a),Vs(4,y);break;case 1:if(Bn(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Ge(u,u.return,O)}if(u=y,g=u.updateQueue,g!==null){var b=u.stateNode;try{var R=g.shared.hiddenCallbacks;if(R!==null)for(g.shared.hiddenCallbacks=null,g=0;g<R.length;g++)Zf(R[g],b)}catch(O){Ge(u,u.return,O)}}a&&S&64&&cp(y),Hs(y,y.return);break;case 27:pp(y);case 26:case 5:Bn(g,y,a),a&&u===null&&S&4&&fp(y),Hs(y,y.return);break;case 12:Bn(g,y,a);break;case 31:Bn(g,y,a),a&&S&4&&_p(g,y);break;case 13:Bn(g,y,a),a&&S&4&&wp(g,y);break;case 22:y.memoizedState===null&&Bn(g,y,a),Hs(y,y.return);break;case 30:break;default:Bn(g,y,a)}o=o.sibling}}function Xu(n,o){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Rs(a))}function Qu(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Rs(n))}function dn(n,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ep(n,o,a,u),o=o.sibling}function Ep(n,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:dn(n,o,a,u),g&2048&&Vs(9,o);break;case 1:dn(n,o,a,u);break;case 3:dn(n,o,a,u),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Rs(n)));break;case 12:if(g&2048){dn(n,o,a,u),n=o.stateNode;try{var y=o.memoizedProps,S=y.id,b=y.onPostCommit;typeof b=="function"&&b(S,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){Ge(o,o.return,R)}}else dn(n,o,a,u);break;case 31:dn(n,o,a,u);break;case 13:dn(n,o,a,u);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?dn(n,o,a,u):zs(n,o):y._visibility&2?dn(n,o,a,u):(y._visibility|=2,Io(n,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Xu(S,o);break;case 24:dn(n,o,a,u),g&2048&&Qu(o.alternate,o);break;default:dn(n,o,a,u)}}function Io(n,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,S=o,b=a,R=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Io(y,S,b,R,g),Vs(8,S);break;case 23:break;case 22:var H=S.stateNode;S.memoizedState!==null?H._visibility&2?Io(y,S,b,R,g):zs(y,S):(H._visibility|=2,Io(y,S,b,R,g)),g&&O&2048&&Xu(S.alternate,S);break;case 24:Io(y,S,b,R,g),g&&O&2048&&Qu(S.alternate,S);break;default:Io(y,S,b,R,g)}o=o.sibling}}function zs(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=n,u=o,g=u.flags;switch(u.tag){case 22:zs(a,u),g&2048&&Xu(u.alternate,u);break;case 24:zs(a,u),g&2048&&Qu(u.alternate,u);break;default:zs(a,u)}o=o.sibling}}var $s=8192;function ko(n,o,a){if(n.subtreeFlags&$s)for(n=n.child;n!==null;)bp(n,o,a),n=n.sibling}function bp(n,o,a){switch(n.tag){case 26:ko(n,o,a),n.flags&$s&&n.memoizedState!==null&&Tw(a,cn,n.memoizedState,n.memoizedProps);break;case 5:ko(n,o,a);break;case 3:case 4:var u=cn;cn=Aa(n.stateNode.containerInfo),ko(n,o,a),cn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=$s,$s=16777216,ko(n,o,a),$s=u):ko(n,o,a));break;default:ko(n,o,a)}}function Ap(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Fs(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];ft=u,xp(u,n)}Ap(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cp(n),n=n.sibling}function Cp(n){switch(n.tag){case 0:case 11:case 15:Fs(n),n.flags&2048&&ui(9,n,n.return);break;case 3:Fs(n);break;case 12:Fs(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,fa(n)):Fs(n);break;default:Fs(n)}}function fa(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];ft=u,xp(u,n)}Ap(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:ui(8,o,o.return),fa(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,fa(o));break;default:fa(o)}n=n.sibling}}function xp(n,o){for(;ft!==null;){var a=ft;switch(a.tag){case 0:case 11:case 15:ui(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Rs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ft=u;else e:for(a=n;ft!==null;){u=ft;var g=u.sibling,y=u.return;if(yp(u),u===a){ft=null;break e}if(g!==null){g.return=y,ft=g;break e}ft=y}}}var O_={getCacheForType:function(n){var o=vt(nt),a=o.data.get(n);return a===void 0&&(a=n(),o.data.set(n,a)),a},cacheSignal:function(){return vt(nt).controller.signal}},G_=typeof WeakMap=="function"?WeakMap:Map,Ue=0,ze=null,Te=null,Ae=0,Oe=0,Ft=null,ci=!1,Mo=!1,Zu=!1,qn=0,Qe=0,di=0,$i=0,ec=0,Jt=0,Do=0,Js=null,Ot=null,tc=!1,ha=0,Rp=0,pa=1/0,ma=null,fi=null,lt=0,hi=null,Po=null,Vn=0,nc=0,ic=null,Np=null,js=0,oc=null;function jt(){return(Ue&2)!==0&&Ae!==0?Ae&-Ae:V.T!==null?cc():$d()}function Ip(){if(Jt===0)if((Ae&536870912)===0||Re){var n=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),Jt=n}else Jt=536870912;return n=zt.current,n!==null&&(n.flags|=32),Jt}function Gt(n,o,a){(n===ze&&(Oe===2||Oe===9)||n.cancelPendingCommit!==null)&&(Lo(n,0),pi(n,Ae,Jt,!1)),ps(n,a),((Ue&2)===0||n!==ze)&&(n===ze&&((Ue&2)===0&&($i|=a),Qe===4&&pi(n,Ae,Jt,!1)),Sn(n))}function kp(n,o,a){if((Ue&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&n.expiredLanes)===0||hs(n,o),g=u?V_(n,o):rc(n,o,!0),y=u;do{if(g===0){Mo&&!u&&pi(n,o,0,!1);break}else{if(a=n.current.alternate,y&&!B_(a)){g=rc(n,o,!1),y=!1;continue}if(g===2){if(y=o,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var b=n;g=Js;var R=b.current.memoizedState.isDehydrated;if(R&&(Lo(b,S).flags|=256),S=rc(b,S,!1),S!==2){if(Zu&&!R){b.errorRecoveryDisabledLanes|=y,$i|=y,g=4;break e}y=Ot,Ot=g,y!==null&&(Ot===null?Ot=y:Ot.push.apply(Ot,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){Lo(n,0),pi(n,o,0,!0);break}e:{switch(u=n,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:pi(u,o,Jt,!ci);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=ha+300-fe(),10<g)){if(pi(u,o,Jt,!ci),Ar(u,0,!0)!==0)break e;Vn=o,u.timeoutHandle=lm(Mp.bind(null,u,a,Ot,ma,tc,o,Jt,$i,Do,ci,y,"Throttled",-0,0),g);break e}Mp(u,a,Ot,ma,tc,o,Jt,$i,Do,ci,y,null,-0,0)}}break}while(!0);Sn(n)}function Mp(n,o,a,u,g,y,S,b,R,O,H,J,B,q){if(n.timeoutHandle=-1,J=o.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cn},bp(o,y,J);var te=(y&62914560)===y?ha-fe():(y&4194048)===y?Rp-fe():0;if(te=Ew(J,te),te!==null){Vn=y,n.cancelPendingCommit=te(qp.bind(null,n,o,y,a,u,g,S,b,R,H,J,null,B,q)),pi(n,y,S,!O);return}}qp(n,o,y,a,u,g,S,b,R)}function B_(n){for(var o=n;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!Vt(y(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function pi(n,o,a,u){o&=~ec,o&=~$i,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var g=o;0<g;){var y=31-qt(g),S=1<<y;u[y]=-1,g&=~S}a!==0&&Vd(n,a,o)}function ga(){return(Ue&6)===0?(Ks(0),!1):!0}function sc(){if(Te!==null){if(Oe===0)var n=Te.return;else n=Te,In=Li=null,Su(n),Ao=null,Is=0,n=Te;for(;n!==null;)up(n.alternate,n),n=n.return;Te=null}}function Lo(n,o){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,sw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Vn=0,sc(),ze=n,Te=a=Rn(n.current,null),Ae=o,Oe=0,Ft=null,ci=!1,Mo=hs(n,o),Zu=!1,Do=Jt=ec=$i=di=Qe=0,Ot=Js=null,tc=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var g=31-qt(u),y=1<<g;o|=n[g],u&=~y}return qn=o,Or(),a}function Dp(n,o){_e=null,V.H=Gs,o===bo||o===Fr?(o=Yf(),Oe=3):o===uu?(o=Yf(),Oe=4):Oe=o===Ou?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ft=o,Te===null&&(Qe=1,sa(n,Zt(o,n.current)))}function Pp(){var n=zt.current;return n===null?!0:(Ae&4194048)===Ae?on===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?n===on:!1}function Lp(){var n=V.H;return V.H=Gs,n===null?Gs:n}function Up(){var n=V.A;return V.A=O_,n}function ya(){Qe=4,ci||(Ae&4194048)!==Ae&&zt.current!==null||(Mo=!0),(di&134217727)===0&&($i&134217727)===0||ze===null||pi(ze,Ae,Jt,!1)}function rc(n,o,a){var u=Ue;Ue|=2;var g=Lp(),y=Up();(ze!==n||Ae!==o)&&(ma=null,Lo(n,o)),o=!1;var S=Qe;e:do try{if(Oe!==0&&Te!==null){var b=Te,R=Ft;switch(Oe){case 8:sc(),S=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(o=!0);var O=Oe;if(Oe=0,Ft=null,Uo(n,b,R,O),a&&Mo){S=0;break e}break;default:O=Oe,Oe=0,Ft=null,Uo(n,b,R,O)}}q_(),S=Qe;break}catch(H){Dp(n,H)}while(!0);return o&&n.shellSuspendCounter++,In=Li=null,Ue=u,V.H=g,V.A=y,Te===null&&(ze=null,Ae=0,Or()),S}function q_(){for(;Te!==null;)Op(Te)}function V_(n,o){var a=Ue;Ue|=2;var u=Lp(),g=Up();ze!==n||Ae!==o?(ma=null,pa=fe()+500,Lo(n,o)):Mo=hs(n,o);e:do try{if(Oe!==0&&Te!==null){o=Te;var y=Ft;t:switch(Oe){case 1:Oe=0,Ft=null,Uo(n,o,y,1);break;case 2:case 9:if(jf(y)){Oe=0,Ft=null,Gp(o);break}o=function(){Oe!==2&&Oe!==9||ze!==n||(Oe=7),Sn(n)},y.then(o,o);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:jf(y)?(Oe=0,Ft=null,Gp(o)):(Oe=0,Ft=null,Uo(n,o,y,7));break;case 5:var S=null;switch(Te.tag){case 26:S=Te.memoizedState;case 5:case 27:var b=Te;if(S?Em(S):b.stateNode.complete){Oe=0,Ft=null;var R=b.sibling;if(R!==null)Te=R;else{var O=b.return;O!==null?(Te=O,va(O)):Te=null}break t}}Oe=0,Ft=null,Uo(n,o,y,5);break;case 6:Oe=0,Ft=null,Uo(n,o,y,6);break;case 8:sc(),Qe=6;break e;default:throw Error(s(462))}}H_();break}catch(H){Dp(n,H)}while(!0);return In=Li=null,V.H=u,V.A=g,Ue=a,Te!==null?0:(ze=null,Ae=0,Or(),Qe)}function H_(){for(;Te!==null&&!me();)Op(Te)}function Op(n){var o=ap(n.alternate,n,qn);n.memoizedProps=n.pendingProps,o===null?va(n):Te=o}function Gp(n){var o=n,a=o.alternate;switch(o.tag){case 15:case 0:o=tp(a,o,o.pendingProps,o.type,void 0,Ae);break;case 11:o=tp(a,o,o.pendingProps,o.type.render,o.ref,Ae);break;case 5:Su(o);default:up(a,o),o=Te=Uf(o,qn),o=ap(a,o,qn)}n.memoizedProps=n.pendingProps,o===null?va(n):Te=o}function Uo(n,o,a,u){In=Li=null,Su(o),Ao=null,Is=0;var g=o.return;try{if(I_(n,g,o,a,Ae)){Qe=1,sa(n,Zt(a,n.current)),Te=null;return}}catch(y){if(g!==null)throw Te=g,y;Qe=1,sa(n,Zt(a,n.current)),Te=null;return}o.flags&32768?(Re||u===1?n=!0:Mo||(Ae&536870912)!==0?n=!1:(ci=n=!0,(u===2||u===9||u===3||u===6)&&(u=zt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bp(o,n)):va(o)}function va(n){var o=n;do{if((o.flags&32768)!==0){Bp(o,ci);return}n=o.return;var a=D_(o.alternate,o,qn);if(a!==null){Te=a;return}if(o=o.sibling,o!==null){Te=o;return}Te=o=n}while(o!==null);Qe===0&&(Qe=5)}function Bp(n,o){do{var a=P_(n.alternate,n);if(a!==null){a.flags&=32767,Te=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(n=n.sibling,n!==null)){Te=n;return}Te=n=a}while(n!==null);Qe=6,Te=null}function qp(n,o,a,u,g,y,S,b,R){n.cancelPendingCommit=null;do _a();while(lt!==0);if((Ue&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Kl,Sv(n,a,y,S,b,R),n===ze&&(Te=ze=null,Ae=0),Po=o,hi=n,Vn=a,nc=y,ic=g,Np=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,J_(bn,function(){return Fp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,g=X.p,X.p=2,S=Ue,Ue|=4;try{L_(n,o,a)}finally{Ue=S,X.p=g,V.T=u}}lt=1,Vp(),Hp(),zp()}}function Vp(){if(lt===1){lt=0;var n=hi,o=Po,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var u=X.p;X.p=2;var g=Ue;Ue|=4;try{Sp(o,n);var y=vc,S=xf(n.containerInfo),b=y.focusedElem,R=y.selectionRange;if(S!==b&&b&&b.ownerDocument&&Cf(b.ownerDocument.documentElement,b)){if(R!==null&&zl(b)){var O=R.start,H=R.end;if(H===void 0&&(H=O),"selectionStart"in b)b.selectionStart=O,b.selectionEnd=Math.min(H,b.value.length);else{var J=b.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var q=B.getSelection(),te=b.textContent.length,le=Math.min(R.start,te),Ve=R.end===void 0?le:Math.min(R.end,te);!q.extend&&le>Ve&&(S=Ve,Ve=le,le=S);var P=Af(b,le),k=Af(b,Ve);if(P&&k&&(q.rangeCount!==1||q.anchorNode!==P.node||q.anchorOffset!==P.offset||q.focusNode!==k.node||q.focusOffset!==k.offset)){var U=J.createRange();U.setStart(P.node,P.offset),q.removeAllRanges(),le>Ve?(q.addRange(U),q.extend(k.node,k.offset)):(U.setEnd(k.node,k.offset),q.addRange(U))}}}}for(J=[],q=b;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var z=J[b];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}ka=!!yc,vc=yc=null}finally{Ue=g,X.p=u,V.T=a}}n.current=o,lt=2}}function Hp(){if(lt===2){lt=0;var n=hi,o=Po,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var u=X.p;X.p=2;var g=Ue;Ue|=4;try{gp(n,o.alternate,o)}finally{Ue=g,X.p=u,V.T=a}}lt=3}}function zp(){if(lt===4||lt===3){lt=0,ce();var n=hi,o=Po,a=Vn,u=Np;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lt=5:(lt=0,Po=hi=null,$p(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(fi=null),bl(a),o=o.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Wn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=V.T,g=X.p,X.p=2,V.T=null;try{for(var y=n.onRecoverableError,S=0;S<u.length;S++){var b=u[S];y(b.value,{componentStack:b.stack})}}finally{V.T=o,X.p=g}}(Vn&3)!==0&&_a(),Sn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===oc?js++:(js=0,oc=n):js=0,Ks(0)}}function $p(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,Rs(o)))}function _a(){return Vp(),Hp(),zp(),Fp()}function Fp(){if(lt!==5)return!1;var n=hi,o=nc;nc=0;var a=bl(Vn),u=V.T,g=X.p;try{X.p=32>a?32:a,V.T=null,a=ic,ic=null;var y=hi,S=Vn;if(lt=0,Po=hi=null,Vn=0,(Ue&6)!==0)throw Error(s(331));var b=Ue;if(Ue|=4,Cp(y.current),Ep(y,y.current,S,a),Ue=b,Ks(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Wn,y)}catch{}return!0}finally{X.p=g,V.T=u,$p(n,o)}}function Jp(n,o,a){o=Zt(a,o),o=Uu(n.stateNode,o,2),n=ri(n,o,2),n!==null&&(ps(n,2),Sn(n))}function Ge(n,o,a){if(n.tag===3)Jp(n,n,a);else for(;o!==null;){if(o.tag===3){Jp(o,n,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fi===null||!fi.has(u))){n=Zt(a,n),a=jh(2),u=ri(o,a,2),u!==null&&(Kh(a,u,o,n),ps(u,2),Sn(u));break}}o=o.return}}function ac(n,o,a){var u=n.pingCache;if(u===null){u=n.pingCache=new G_;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Zu=!0,g.add(a),n=z_.bind(null,n,o,a),o.then(n,n))}function z_(n,o,a){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ze===n&&(Ae&a)===a&&(Qe===4||Qe===3&&(Ae&62914560)===Ae&&300>fe()-ha?(Ue&2)===0&&Lo(n,0):ec|=a,Do===Ae&&(Do=0)),Sn(n)}function jp(n,o){o===0&&(o=qd()),n=Mi(n,o),n!==null&&(ps(n,o),Sn(n))}function $_(n){var o=n.memoizedState,a=0;o!==null&&(a=o.retryLane),jp(n,a)}function F_(n,o){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),jp(n,a)}function J_(n,o){return to(n,o)}var wa=null,Oo=null,lc=!1,Sa=!1,uc=!1,mi=0;function Sn(n){n!==Oo&&n.next===null&&(Oo===null?wa=Oo=n:Oo=Oo.next=n),Sa=!0,lc||(lc=!0,K_())}function Ks(n,o){if(!uc&&Sa){uc=!0;do for(var a=!1,u=wa;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,b=u.pingedLanes;y=(1<<31-qt(42|n)+1)-1,y&=g&~(S&~b),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Xp(u,y))}else y=Ae,y=Ar(u,u===ze?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||hs(u,y)||(a=!0,Xp(u,y));u=u.next}while(a);uc=!1}}function j_(){Kp()}function Kp(){Sa=lc=!1;var n=0;mi!==0&&ow()&&(n=mi);for(var o=fe(),a=null,u=wa;u!==null;){var g=u.next,y=Yp(u,o);y===0?(u.next=null,a===null?wa=g:a.next=g,g===null&&(Oo=a)):(a=u,(n!==0||(y&3)!==0)&&(Sa=!0)),u=g}lt!==0&&lt!==5||Ks(n),mi!==0&&(mi=0)}function Yp(n,o){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-qt(y),b=1<<S,R=g[S];R===-1?((b&a)===0||(b&u)!==0)&&(g[S]=wv(b,o)):R<=o&&(n.expiredLanes|=b),y&=~b}if(o=ze,a=Ae,a=Ar(n,n===o?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===o&&(Oe===2||Oe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ae(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||hs(n,a)){if(o=a&-a,o===n.callbackPriority)return o;switch(u!==null&&ae(u),bl(a)){case 2:case 8:a=En;break;case 32:a=bn;break;case 268435456:a=Yn;break;default:a=bn}return u=Wp.bind(null,n),a=to(a,u),n.callbackPriority=o,n.callbackNode=a,o}return u!==null&&u!==null&&ae(u),n.callbackPriority=2,n.callbackNode=null,2}function Wp(n,o){if(lt!==0&&lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(_a()&&n.callbackNode!==a)return null;var u=Ae;return u=Ar(n,n===ze?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(kp(n,u,o),Yp(n,fe()),n.callbackNode!=null&&n.callbackNode===a?Wp.bind(null,n):null)}function Xp(n,o){if(_a())return null;kp(n,o,!0)}function K_(){rw(function(){(Ue&6)!==0?to(mt,j_):Kp()})}function cc(){if(mi===0){var n=To;n===0&&(n=Tr,Tr<<=1,(Tr&261888)===0&&(Tr=256)),mi=n}return mi}function Qp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Nr(""+n)}function Zp(n,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,n.id&&a.setAttribute("form",n.id),o.parentNode.insertBefore(a,o),n=new FormData(n),a.parentNode.removeChild(a),n}function Y_(n,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var y=Qp((g[Mt]||null).action),S=u.submitter;S&&(o=(o=S[Mt]||null)?Qp(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var b=new Dr("action","action",null,u,g);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(mi!==0){var R=S?Zp(g,S):new FormData(g);Iu(a,{pending:!0,data:R,method:g.method,action:y},null,R)}}else typeof y=="function"&&(b.preventDefault(),R=S?Zp(g,S):new FormData(g),Iu(a,{pending:!0,data:R,method:g.method,action:y},y,R))},currentTarget:g}]})}}for(var dc=0;dc<jl.length;dc++){var fc=jl[dc],W_=fc.toLowerCase(),X_=fc[0].toUpperCase()+fc.slice(1);un(W_,"on"+X_)}un(If,"onAnimationEnd"),un(kf,"onAnimationIteration"),un(Mf,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(h_,"onTransitionRun"),un(p_,"onTransitionStart"),un(m_,"onTransitionCancel"),un(Df,"onTransitionEnd"),ao("onMouseEnter",["mouseout","mouseover"]),ao("onMouseLeave",["mouseout","mouseover"]),ao("onPointerEnter",["pointerout","pointerover"]),ao("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ys));function em(n,o){o=(o&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var S=u.length-1;0<=S;S--){var b=u[S],R=b.instance,O=b.currentTarget;if(b=b.listener,R!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=O;try{y(g)}catch(H){Ur(H)}g.currentTarget=null,y=R}else for(S=0;S<u.length;S++){if(b=u[S],R=b.instance,O=b.currentTarget,b=b.listener,R!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=O;try{y(g)}catch(H){Ur(H)}g.currentTarget=null,y=R}}}}function Ee(n,o){var a=o[Al];a===void 0&&(a=o[Al]=new Set);var u=n+"__bubble";a.has(u)||(tm(o,n,2,!1),a.add(u))}function hc(n,o,a){var u=0;o&&(u|=4),tm(a,n,u,o)}var Ta="_reactListening"+Math.random().toString(36).slice(2);function pc(n){if(!n[Ta]){n[Ta]=!0,jd.forEach(function(a){a!=="selectionchange"&&(Q_.has(a)||hc(a,!1,n),hc(a,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Ta]||(o[Ta]=!0,hc("selectionchange",!1,o))}}function tm(n,o,a,u){switch(Im(o)){case 2:var g=Cw;break;case 8:g=xw;break;default:g=Nc}a=g.bind(null,o,a,n),g=void 0,!Pl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(o,a,{capture:!0,passive:g}):n.addEventListener(o,a,!0):g!==void 0?n.addEventListener(o,a,{passive:g}):n.addEventListener(o,a,!1)}function mc(n,o,a,u,g){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var b=u.stateNode.containerInfo;if(b===g)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;b!==null;){if(S=oo(b),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){u=y=S;continue e}b=b.parentNode}}u=u.return}rf(function(){var O=y,H=Ml(a),J=[];e:{var B=Pf.get(n);if(B!==void 0){var q=Dr,te=n;switch(n){case"keypress":if(kr(a)===0)break e;case"keydown":case"keyup":q=Fv;break;case"focusin":te="focus",q=Gl;break;case"focusout":te="blur",q=Gl;break;case"beforeblur":case"afterblur":q=Gl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Dv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Kv;break;case If:case kf:case Mf:q=Uv;break;case Df:q=Wv;break;case"scroll":case"scrollend":q=kv;break;case"wheel":q=Qv;break;case"copy":case"cut":case"paste":q=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=df;break;case"toggle":case"beforetoggle":q=e_}var le=(o&4)!==0,Ve=!le&&(n==="scroll"||n==="scrollend"),P=le?B!==null?B+"Capture":null:B;le=[];for(var k=O,U;k!==null;){var z=k;if(U=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||U===null||P===null||(z=ys(k,P),z!=null&&le.push(Ws(k,z,U))),Ve)break;k=k.return}0<le.length&&(B=new q(B,te,null,a,H),J.push({event:B,listeners:le}))}}if((o&7)===0){e:{if(B=n==="mouseover"||n==="pointerover",q=n==="mouseout"||n==="pointerout",B&&a!==kl&&(te=a.relatedTarget||a.fromElement)&&(oo(te)||te[io]))break e;if((q||B)&&(B=H.window===H?H:(B=H.ownerDocument)?B.defaultView||B.parentWindow:window,q?(te=a.relatedTarget||a.toElement,q=O,te=te?oo(te):null,te!==null&&(Ve=l(te),le=te.tag,te!==Ve||le!==5&&le!==27&&le!==6)&&(te=null)):(q=null,te=O),q!==te)){if(le=uf,z="onMouseLeave",P="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(le=df,z="onPointerLeave",P="onPointerEnter",k="pointer"),Ve=q==null?B:gs(q),U=te==null?B:gs(te),B=new le(z,k+"leave",q,a,H),B.target=Ve,B.relatedTarget=U,z=null,oo(H)===O&&(le=new le(P,k+"enter",te,a,H),le.target=U,le.relatedTarget=Ve,z=le),Ve=z,q&&te)t:{for(le=Z_,P=q,k=te,U=0,z=P;z;z=le(z))U++;z=0;for(var re=k;re;re=le(re))z++;for(;0<U-z;)P=le(P),U--;for(;0<z-U;)k=le(k),z--;for(;U--;){if(P===k||k!==null&&P===k.alternate){le=P;break t}P=le(P),k=le(k)}le=null}else le=null;q!==null&&nm(J,B,q,le,!1),te!==null&&Ve!==null&&nm(J,Ve,te,le,!0)}}e:{if(B=O?gs(O):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var De=_f;else if(yf(B))if(wf)De=c_;else{De=l_;var ie=a_}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?O&&Il(O.elementType)&&(De=_f):De=u_;if(De&&(De=De(n,O))){vf(J,De,a,H);break e}ie&&ie(n,B,O),n==="focusout"&&O&&B.type==="number"&&O.memoizedProps.value!=null&&Nl(B,"number",B.value)}switch(ie=O?gs(O):window,n){case"focusin":(yf(ie)||ie.contentEditable==="true")&&(po=ie,$l=O,As=null);break;case"focusout":As=$l=po=null;break;case"mousedown":Fl=!0;break;case"contextmenu":case"mouseup":case"dragend":Fl=!1,Rf(J,a,H);break;case"selectionchange":if(f_)break;case"keydown":case"keyup":Rf(J,a,H)}var we;if(ql)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else ho?mf(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(ff&&a.locale!=="ko"&&(ho||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&ho&&(we=af()):(Zn=H,Ll="value"in Zn?Zn.value:Zn.textContent,ho=!0)),ie=Ea(O,Ce),0<ie.length&&(Ce=new cf(Ce,n,null,a,H),J.push({event:Ce,listeners:ie}),we?Ce.data=we:(we=gf(a),we!==null&&(Ce.data=we)))),(we=n_?i_(n,a):o_(n,a))&&(Ce=Ea(O,"onBeforeInput"),0<Ce.length&&(ie=new cf("onBeforeInput","beforeinput",null,a,H),J.push({event:ie,listeners:Ce}),ie.data=we)),Y_(J,n,O,a,H)}em(J,o)})}function Ws(n,o,a){return{instance:n,listener:o,currentTarget:a}}function Ea(n,o){for(var a=o+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ys(n,a),g!=null&&u.unshift(Ws(n,g,y)),g=ys(n,o),g!=null&&u.push(Ws(n,g,y))),n.tag===3)return u;n=n.return}return[]}function Z_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function nm(n,o,a,u,g){for(var y=o._reactName,S=[];a!==null&&a!==u;){var b=a,R=b.alternate,O=b.stateNode;if(b=b.tag,R!==null&&R===u)break;b!==5&&b!==26&&b!==27||O===null||(R=O,g?(O=ys(a,y),O!=null&&S.unshift(Ws(a,O,R))):g||(O=ys(a,y),O!=null&&S.push(Ws(a,O,R)))),a=a.return}S.length!==0&&n.push({event:o,listeners:S})}var ew=/\r\n?/g,tw=/\u0000|\uFFFD/g;function im(n){return(typeof n=="string"?n:""+n).replace(ew,`
`).replace(tw,"")}function om(n,o){return o=im(o),im(n)===o}function qe(n,o,a,u,g,y){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||uo(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&uo(n,""+u);break;case"className":xr(n,"class",u);break;case"tabIndex":xr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(n,a,u);break;case"style":of(n,u,y);break;case"data":if(o!=="object"){xr(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Nr(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(o!=="input"&&qe(n,o,"name",g.name,g,null),qe(n,o,"formEncType",g.formEncType,g,null),qe(n,o,"formMethod",g.formMethod,g,null),qe(n,o,"formTarget",g.formTarget,g,null)):(qe(n,o,"encType",g.encType,g,null),qe(n,o,"method",g.method,g,null),qe(n,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Nr(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=Cn);break;case"onScroll":u!=null&&Ee("scroll",n);break;case"onScrollEnd":u!=null&&Ee("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Nr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Ee("beforetoggle",n),Ee("toggle",n),Cr(n,"popover",u);break;case"xlinkActuate":An(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":An(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":An(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":An(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":An(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":An(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":An(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":An(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":An(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Cr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nv.get(a)||a,Cr(n,a,u))}}function gc(n,o,a,u,g,y){switch(a){case"style":of(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof u=="string"?uo(n,u):(typeof u=="number"||typeof u=="bigint")&&uo(n,""+u);break;case"onScroll":u!=null&&Ee("scroll",n);break;case"onScrollEnd":u!=null&&Ee("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),y=n[Mt]||null,y=y!=null?y[a]:null,typeof y=="function"&&n.removeEventListener(o,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(o,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Cr(n,a,u)}}}function wt(n,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",n),Ee("load",n);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var S=a[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(n,o,y,S,a,null)}}g&&qe(n,o,"srcSet",a.srcSet,a,null),u&&qe(n,o,"src",a.src,a,null);return;case"input":Ee("invalid",n);var b=y=S=g=null,R=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var H=a[u];if(H!=null)switch(u){case"name":g=H;break;case"type":S=H;break;case"checked":R=H;break;case"defaultChecked":O=H;break;case"value":y=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,o));break;default:qe(n,o,u,H,a,null)}}Zd(n,y,b,R,O,S,g,!1);return;case"select":Ee("invalid",n),u=S=y=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":y=b;break;case"defaultValue":S=b;break;case"multiple":u=b;default:qe(n,o,g,b,a,null)}o=y,a=S,n.multiple=!!u,o!=null?lo(n,!!u,o,!1):a!=null&&lo(n,!!u,a,!0);return;case"textarea":Ee("invalid",n),y=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(b=a[S],b!=null))switch(S){case"value":u=b;break;case"defaultValue":g=b;break;case"children":y=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:qe(n,o,S,b,a,null)}tf(n,u,g,y);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(u=a[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:qe(n,o,R,u,a,null)}return;case"dialog":Ee("beforetoggle",n),Ee("toggle",n),Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":Ee("load",n);break;case"video":case"audio":for(u=0;u<Ys.length;u++)Ee(Ys[u],n);break;case"image":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"embed":case"source":case"link":Ee("error",n),Ee("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(n,o,O,u,a,null)}return;default:if(Il(o)){for(H in a)a.hasOwnProperty(H)&&(u=a[H],u!==void 0&&gc(n,o,H,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&qe(n,o,b,u,a,null))}function nw(n,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,b=null,R=null,O=null,H=null;for(q in a){var J=a[q];if(a.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=J;default:u.hasOwnProperty(q)||qe(n,o,q,null,u,J)}}for(var B in u){var q=u[B];if(J=a[B],u.hasOwnProperty(B)&&(q!=null||J!=null))switch(B){case"type":y=q;break;case"name":g=q;break;case"checked":O=q;break;case"defaultChecked":H=q;break;case"value":S=q;break;case"defaultValue":b=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,o));break;default:q!==J&&qe(n,o,B,q,u,J)}}Rl(n,S,b,R,O,H,y,g);return;case"select":q=S=b=B=null;for(y in a)if(R=a[y],a.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":q=R;default:u.hasOwnProperty(y)||qe(n,o,y,null,u,R)}for(g in u)if(y=u[g],R=a[g],u.hasOwnProperty(g)&&(y!=null||R!=null))switch(g){case"value":B=y;break;case"defaultValue":b=y;break;case"multiple":S=y;default:y!==R&&qe(n,o,g,y,u,R)}o=b,a=S,u=q,B!=null?lo(n,!!a,B,!1):!!u!=!!a&&(o!=null?lo(n,!!a,o,!0):lo(n,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(b in a)if(g=a[b],a.hasOwnProperty(b)&&g!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:qe(n,o,b,null,u,g)}for(S in u)if(g=u[S],y=a[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":B=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&qe(n,o,S,g,u,y)}ef(n,B,q);return;case"option":for(var te in a)if(B=a[te],a.hasOwnProperty(te)&&B!=null&&!u.hasOwnProperty(te))switch(te){case"selected":n.selected=!1;break;default:qe(n,o,te,null,u,B)}for(R in u)if(B=u[R],q=a[R],u.hasOwnProperty(R)&&B!==q&&(B!=null||q!=null))switch(R){case"selected":n.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:qe(n,o,R,B,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in a)B=a[le],a.hasOwnProperty(le)&&B!=null&&!u.hasOwnProperty(le)&&qe(n,o,le,null,u,B);for(O in u)if(B=u[O],q=a[O],u.hasOwnProperty(O)&&B!==q&&(B!=null||q!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,o));break;default:qe(n,o,O,B,u,q)}return;default:if(Il(o)){for(var Ve in a)B=a[Ve],a.hasOwnProperty(Ve)&&B!==void 0&&!u.hasOwnProperty(Ve)&&gc(n,o,Ve,void 0,u,B);for(H in u)B=u[H],q=a[H],!u.hasOwnProperty(H)||B===q||B===void 0&&q===void 0||gc(n,o,H,B,u,q);return}}for(var P in a)B=a[P],a.hasOwnProperty(P)&&B!=null&&!u.hasOwnProperty(P)&&qe(n,o,P,null,u,B);for(J in u)B=u[J],q=a[J],!u.hasOwnProperty(J)||B===q||B==null&&q==null||qe(n,o,J,B,u,q)}function sm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,S=g.initiatorType,b=g.duration;if(y&&b&&sm(S)){for(S=0,b=g.responseEnd,u+=1;u<a.length;u++){var R=a[u],O=R.startTime;if(O>b)break;var H=R.transferSize,J=R.initiatorType;H&&sm(J)&&(R=R.responseEnd,S+=H*(R<b?1:(b-O)/(R-O)))}if(--u,o+=8*(y+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var yc=null,vc=null;function ba(n){return n.nodeType===9?n:n.ownerDocument}function rm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function am(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function _c(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var wc=null;function ow(){var n=window.event;return n&&n.type==="popstate"?n===wc?!1:(wc=n,!0):(wc=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,sw=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,rw=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(n){return um.resolve(null).then(n).catch(aw)}:lm;function aw(n){setTimeout(function(){throw n})}function gi(n){return n==="head"}function cm(n,o){var a=o,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Vo(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Xs(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Xs(a);for(var y=a.firstChild;y;){var S=y.nextSibling,b=y.nodeName;y[ms]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=S}}else a==="body"&&Xs(n.ownerDocument.body);a=g}while(a);Vo(o)}function dm(n,o){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Sc(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sc(a),Cl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function lw(n,o,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ms])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=sn(n.nextSibling),n===null)break}return null}function uw(n,o,a){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=sn(n.nextSibling),n===null))return null;return n}function fm(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=sn(n.nextSibling),n===null))return null;return n}function Tc(n){return n.data==="$?"||n.data==="$~"}function Ec(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function cw(n,o){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function sn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var bc=null;function hm(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(o===0)return sn(n.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}n=n.nextSibling}return null}function pm(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return n;o--}else a!=="/$"&&a!=="/&"||o++}n=n.previousSibling}return null}function mm(n,o,a){switch(o=ba(a),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Xs(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Cl(n)}var rn=new Map,gm=new Set;function Aa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Hn=X.d;X.d={f:dw,r:fw,D:hw,C:pw,L:mw,m:gw,X:vw,S:yw,M:_w};function dw(){var n=Hn.f(),o=ga();return n||o}function fw(n){var o=so(n);o!==null&&o.tag===5&&o.type==="form"?Dh(o):Hn.r(n)}var Go=typeof document>"u"?null:document;function ym(n,o,a){var u=Go;if(u&&typeof o=="string"&&o){var g=Xt(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),gm.has(g)||(gm.add(g),n={rel:n,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),wt(o,"link",n),dt(o),u.head.appendChild(o)))}}function hw(n){Hn.D(n),ym("dns-prefetch",n,null)}function pw(n,o){Hn.C(n,o),ym("preconnect",n,o)}function mw(n,o,a){Hn.L(n,o,a);var u=Go;if(u&&n&&o){var g='link[rel="preload"][as="'+Xt(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Xt(a.imageSizes)+'"]')):g+='[href="'+Xt(n)+'"]';var y=g;switch(o){case"style":y=Bo(n);break;case"script":y=qo(n)}rn.has(y)||(n=w({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:n,as:o},a),rn.set(y,n),u.querySelector(g)!==null||o==="style"&&u.querySelector(Qs(y))||o==="script"&&u.querySelector(Zs(y))||(o=u.createElement("link"),wt(o,"link",n),dt(o),u.head.appendChild(o)))}}function gw(n,o){Hn.m(n,o);var a=Go;if(a&&n){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Xt(u)+'"][href="'+Xt(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qo(n)}if(!rn.has(y)&&(n=w({rel:"modulepreload",href:n},o),rn.set(y,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zs(y)))return}u=a.createElement("link"),wt(u,"link",n),dt(u),a.head.appendChild(u)}}}function yw(n,o,a){Hn.S(n,o,a);var u=Go;if(u&&n){var g=ro(u).hoistableStyles,y=Bo(n);o=o||"default";var S=g.get(y);if(!S){var b={loading:0,preload:null};if(S=u.querySelector(Qs(y)))b.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":o},a),(a=rn.get(y))&&Ac(n,a);var R=S=u.createElement("link");dt(R),wt(R,"link",n),R._p=new Promise(function(O,H){R.onload=O,R.onerror=H}),R.addEventListener("load",function(){b.loading|=1}),R.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ca(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:b},g.set(y,S)}}}function vw(n,o){Hn.X(n,o);var a=Go;if(a&&n){var u=ro(a).hoistableScripts,g=qo(n),y=u.get(g);y||(y=a.querySelector(Zs(g)),y||(n=w({src:n,async:!0},o),(o=rn.get(g))&&Cc(n,o),y=a.createElement("script"),dt(y),wt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function _w(n,o){Hn.M(n,o);var a=Go;if(a&&n){var u=ro(a).hoistableScripts,g=qo(n),y=u.get(g);y||(y=a.querySelector(Zs(g)),y||(n=w({src:n,async:!0,type:"module"},o),(o=rn.get(g))&&Cc(n,o),y=a.createElement("script"),dt(y),wt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function vm(n,o,a,u){var g=(g=ve.current)?Aa(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Bo(a.href),a=ro(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Bo(a.href);var y=ro(g).hoistableStyles,S=y.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=g.querySelector(Qs(n)))&&!y._p&&(S.instance=y,S.state.loading=5),rn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},rn.set(n,a),y||ww(g,n,a,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=qo(a),a=ro(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Bo(n){return'href="'+Xt(n)+'"'}function Qs(n){return'link[rel="stylesheet"]['+n+"]"}function _m(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function ww(n,o,a,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),wt(o,"link",a),dt(o),n.head.appendChild(o))}function qo(n){return'[src="'+Xt(n)+'"]'}function Zs(n){return"script[async]"+n}function wm(n,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Xt(a.href)+'"]');if(u)return o.instance=u,dt(u),u;var g=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),dt(u),wt(u,"style",g),Ca(u,a.precedence,n),o.instance=u;case"stylesheet":g=Bo(a.href);var y=n.querySelector(Qs(g));if(y)return o.state.loading|=4,o.instance=y,dt(y),y;u=_m(a),(g=rn.get(g))&&Ac(u,g),y=(n.ownerDocument||n).createElement("link"),dt(y);var S=y;return S._p=new Promise(function(b,R){S.onload=b,S.onerror=R}),wt(y,"link",u),o.state.loading|=4,Ca(y,a.precedence,n),o.instance=y;case"script":return y=qo(a.src),(g=n.querySelector(Zs(y)))?(o.instance=g,dt(g),g):(u=a,(g=rn.get(y))&&(u=w({},a),Cc(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),dt(g),wt(g,"link",u),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Ca(u,a.precedence,n));return o.instance}function Ca(n,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var b=u[S];if(b.dataset.precedence===o)y=b;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(n,o.firstChild))}function Ac(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function Cc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var xa=null;function Sm(n,o,a){if(xa===null){var u=new Map,g=xa=new Map;g.set(a,u)}else g=xa,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var y=a[g];if(!(y[ms]||y[gt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=n+S;var b=u.get(S);b?b.push(y):u.set(S,[y])}}return u}function Tm(n,o,a){n=n.ownerDocument||n,n.head.insertBefore(a,o==="title"?n.querySelector("head > title"):null)}function Sw(n,o,a){if(a===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Em(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Tw(n,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Bo(u.href),y=o.querySelector(Qs(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Ra.bind(n),o.then(n,n)),a.state.loading|=4,a.instance=y,dt(y);return}y=o.ownerDocument||o,u=_m(u),(g=rn.get(g))&&Ac(u,g),y=y.createElement("link"),dt(y);var S=y;S._p=new Promise(function(b,R){S.onload=b,S.onerror=R}),wt(y,"link",u),a.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Ra.bind(n),o.addEventListener("load",a),o.addEventListener("error",a))}}var xc=0;function Ew(n,o){return n.stylesheets&&n.count===0&&Ia(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&Ia(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&xc===0&&(xc=62500*iw());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ia(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>xc?50:800)+o);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Ra(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ia(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Na=null;function Ia(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Na=new Map,o.forEach(bw,n),Na=null,Ra.call(n))}function bw(n,o){if(!(o.state.loading&4)){var a=Na.get(n);if(a)var u=a.get(null);else{a=new Map,Na.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=o.instance,S=g.getAttribute("data-precedence"),y=a.get(S)||u,y===u&&a.set(null,g),a.set(S,g),this.count++,u=Ra.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var er={$$typeof:I,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Aw(n,o,a,u,g,y,S,b,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.hiddenUpdates=Tl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function bm(n,o,a,u,g,y,S,b,R,O,H,J){return n=new Aw(n,o,a,S,R,O,H,J,b),o=1,y===!0&&(o|=24),y=Ht(3,null,null,o),n.current=y,y.stateNode=n,o=ru(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:o},cu(y),n}function Am(n){return n?(n=yo,n):yo}function Cm(n,o,a,u,g,y){g=Am(g),u.context===null?u.context=g:u.pendingContext=g,u=si(o),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=ri(n,u,o),a!==null&&(Gt(a,n,o),Ms(a,n,o))}function xm(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<o?a:o}}function Rc(n,o){xm(n,o),(n=n.alternate)&&xm(n,o)}function Rm(n){if(n.tag===13||n.tag===31){var o=Mi(n,67108864);o!==null&&Gt(o,n,67108864),Rc(n,67108864)}}function Nm(n){if(n.tag===13||n.tag===31){var o=jt();o=El(o);var a=Mi(n,o);a!==null&&Gt(a,n,o),Rc(n,o)}}var ka=!0;function Cw(n,o,a,u){var g=V.T;V.T=null;var y=X.p;try{X.p=2,Nc(n,o,a,u)}finally{X.p=y,V.T=g}}function xw(n,o,a,u){var g=V.T;V.T=null;var y=X.p;try{X.p=8,Nc(n,o,a,u)}finally{X.p=y,V.T=g}}function Nc(n,o,a,u){if(ka){var g=Ic(u);if(g===null)mc(n,o,u,Ma,a),km(n,u);else if(Nw(g,n,o,a,u))u.stopPropagation();else if(km(n,u),o&4&&-1<Rw.indexOf(n)){for(;g!==null;){var y=so(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=xi(y.pendingLanes);if(S!==0){var b=y;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var R=1<<31-qt(S);b.entanglements[1]|=R,S&=~R}Sn(y),(Ue&6)===0&&(pa=fe()+500,Ks(0))}}break;case 31:case 13:b=Mi(y,2),b!==null&&Gt(b,y,2),ga(),Rc(y,2)}if(y=Ic(u),y===null&&mc(n,o,u,Ma,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else mc(n,o,u,null,a)}}function Ic(n){return n=Ml(n),kc(n)}var Ma=null;function kc(n){if(Ma=null,n=oo(n),n!==null){var o=l(n);if(o===null)n=null;else{var a=o.tag;if(a===13){if(n=c(o),n!==null)return n;n=null}else if(a===31){if(n=f(o),n!==null)return n;n=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Ma=n,null}function Im(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case mt:return 2;case En:return 8;case bn:case Kn:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var Mc=!1,yi=null,vi=null,_i=null,tr=new Map,nr=new Map,wi=[],Rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function km(n,o){switch(n){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":tr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(o.pointerId)}}function ir(n,o,a,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},o!==null&&(o=so(o),o!==null&&Rm(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function Nw(n,o,a,u,g){switch(o){case"focusin":return yi=ir(yi,n,o,a,u,g),!0;case"dragenter":return vi=ir(vi,n,o,a,u,g),!0;case"mouseover":return _i=ir(_i,n,o,a,u,g),!0;case"pointerover":var y=g.pointerId;return tr.set(y,ir(tr.get(y)||null,n,o,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,nr.set(y,ir(nr.get(y)||null,n,o,a,u,g)),!0}return!1}function Mm(n){var o=oo(n.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){n.blockedOn=o,Fd(n.priority,function(){Nm(a)});return}}else if(o===31){if(o=f(a),o!==null){n.blockedOn=o,Fd(n.priority,function(){Nm(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Da(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var a=Ic(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);kl=u,a.target.dispatchEvent(u),kl=null}else return o=so(a),o!==null&&Rm(o),n.blockedOn=a,!1;o.shift()}return!0}function Dm(n,o,a){Da(n)&&a.delete(o)}function Iw(){Mc=!1,yi!==null&&Da(yi)&&(yi=null),vi!==null&&Da(vi)&&(vi=null),_i!==null&&Da(_i)&&(_i=null),tr.forEach(Dm),nr.forEach(Dm)}function Pa(n,o){n.blockedOn===o&&(n.blockedOn=null,Mc||(Mc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Iw)))}var La=null;function Pm(n){La!==n&&(La=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){La===n&&(La=null);for(var o=0;o<n.length;o+=3){var a=n[o],u=n[o+1],g=n[o+2];if(typeof u!="function"){if(kc(u||a)===null)continue;break}var y=so(a);y!==null&&(n.splice(o,3),o-=3,Iu(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Vo(n){function o(R){return Pa(R,n)}yi!==null&&Pa(yi,n),vi!==null&&Pa(vi,n),_i!==null&&Pa(_i,n),tr.forEach(o),nr.forEach(o);for(var a=0;a<wi.length;a++){var u=wi[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<wi.length&&(a=wi[0],a.blockedOn===null);)Mm(a),a.blockedOn===null&&wi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],S=g[Mt]||null;if(typeof y=="function")S||Pm(a);else if(S){var b=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[Mt]||null)b=S.formAction;else if(kc(g)!==null)continue}else b=S.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),Pm(a)}}}function Lm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Dc(n){this._internalRoot=n}Ua.prototype.render=Dc.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=jt();Cm(a,u,n,o,null,null)},Ua.prototype.unmount=Dc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Cm(n.current,2,null,n,null,null),ga(),o[io]=null}};function Ua(n){this._internalRoot=n}Ua.prototype.unstable_scheduleHydration=function(n){if(n){var o=$d();n={blockedOn:null,target:n,priority:o};for(var a=0;a<wi.length&&o!==0&&o<wi[a].priority;a++);wi.splice(a,0,n),a===0&&Mm(n)}};var Um=e.version;if(Um!=="19.2.4")throw Error(s(527,Um,"19.2.4"));X.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var kw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{Wn=Oa.inject(kw),Bt=Oa}catch{}}return sr.createRoot=function(n,o){if(!r(n))throw Error(s(299));var a=!1,u="",g=zh,y=$h,S=Fh;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=bm(n,1,!1,null,null,a,u,null,g,y,S,Lm),n[io]=o.current,pc(n),new Dc(o)},sr.hydrateRoot=function(n,o,a){if(!r(n))throw Error(s(299));var u=!1,g="",y=zh,S=$h,b=Fh,R=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),o=bm(n,1,!0,o,a??null,u,g,R,y,S,b,Lm),o.context=Am(null),a=o.current,u=jt(),u=El(u),g=si(u),g.callback=null,ri(a,g,u),a=u,o.current.lanes=a,ps(o,a),Sn(o),n[io]=o.current,pc(n),new Ua(o)},sr.version="19.2.4",sr}var Jm;function Vw(){if(Jm)return Uc.exports;Jm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uc.exports=qw(),Uc.exports}var Hw=Vw();const zw=t0(Hw),$w=[{book:{ko:"",en:"Galatians"},chapters:6},{book:{ko:"",en:"1 Thessalonians"},chapters:5},{book:{ko:"",en:"2 Thessalonians"},chapters:3},{book:{ko:"",en:"1 Corinthians"},chapters:16},{book:{ko:"",en:"2 Corinthians"},chapters:13},{book:{ko:"",en:"Romans"},chapters:16},{book:{ko:"",en:"Colossians"},chapters:4},{book:{ko:"",en:"Philemon"},chapters:1},{book:{ko:"",en:"Ephesians"},chapters:6},{book:{ko:"",en:"Philippians"},chapters:4},{book:{ko:"",en:"1 Timothy"},chapters:6},{book:{ko:"",en:"Titus"},chapters:3},{book:{ko:"",en:"2 Timothy"},chapters:4}],Fw=()=>{const t=[];return $w.forEach(({book:e,chapters:i})=>{for(let s=1;s<=i;s++)t.push({book:e,chapter:s})}),t},Qi=Fw(),Xc=Qi.length,Jw=()=>{const t=new Date;return t.setHours(0,0,0,0),new Date(t.getTime()-624*60*60*1e3)},jw=Jw(),Kw=t=>{const i=new Date(t);i.setHours(0,0,0,0);let s=Math.floor((i.getTime()-jw.getTime())/864e5);s<0&&(s=0);const r=Math.ceil(Xc/2);return s%r+1},Yw=(t,e)=>{const s=(t-1)*2%Xc,r=Qi[s],l=Qi[(s+1)%Xc];return[{book:r.book[e],chapter:r.chapter},{book:l.book[e],chapter:l.chapter}]},Ww=t=>{const e=[],i=Math.ceil(Qi.length/2);for(let s=0;s<i;s++){const r=s*2,l=Qi[r],c=Qi[r+1];let f;const m=l.book[t];if(!c)f=t==="ko"?`${m} ${l.chapter}`:`${m} ${l.chapter}`;else{const p=c.book[t];if(m===p)f=t==="ko"?`${m} ${l.chapter}-${c.chapter}`:`${m} ${l.chapter}-${c.chapter}`;else{const v=t==="ko"?`${m} ${l.chapter}`:`${m} ${l.chapter}`,w=t==="ko"?`${p} ${c.chapter}`:`${p} ${c.chapter}`;f=`${v} & ${w}`}}e.push({day:s+1,reading:f})}return e},Xw="modulepreload",Qw=function(t){return"/"+t},jm={},W=function(e,i,s){let r=Promise.resolve();if(i&&i.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));r=c(i.map(p=>{if(p=Qw(p),p in jm)return;jm[p]=!0;const v=p.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":Xw,v||(_.as="script"),_.crossOrigin="",_.href=p,m&&_.setAttribute("nonce",m),document.head.appendChild(_),v)return new Promise((E,A)=>{_.addEventListener("load",E),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return r.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},Zw=(t,e,i)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((r,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})},eS=Object.prototype.toString,tS=t=>eS.call(t)==="[object Error]",nS=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function iS(t){if(!(t&&tS(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:i,stack:s}=t;return i==="Load failed"?s===void 0||"__sentry_captured__"in t:i.startsWith("error sending request for url")?!0:nS.has(i)}function oS(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Ga(t,e,{min:i=0,allowInfinity:s=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${s?" or Infinity":""}.`);if(!s&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<i)throw new TypeError(`Expected \`${t}\` to be  ${i}.`)}}class i0 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function sS(t,e){const i=Math.max(1,t+1),s=e.randomize?Math.random()+1:1;let r=Math.round(s*e.minTimeout*e.factor**(i-1));return r=Math.min(r,e.maxTimeout),r}function Km(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function rS({error:t,attemptNumber:e,retriesConsumed:i,startTime:s,options:r}){var E,A,C,x;const l=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(l instanceof i0)throw l.originalError;const c=Number.isFinite(r.retries)?Math.max(0,r.retries-i):r.retries,f=r.maxRetryTime??Number.POSITIVE_INFINITY,m=Object.freeze({error:l,attemptNumber:e,retriesLeft:c,retriesConsumed:i});if(await r.onFailedAttempt(m),Km(s,f)<=0)throw l;const p=await r.shouldConsumeRetry(m),v=Km(s,f);if(v<=0||c<=0)throw l;if(l instanceof TypeError&&!iS(l)){if(p)throw l;return(E=r.signal)==null||E.throwIfAborted(),!1}if(!await r.shouldRetry(m))throw l;if(!p)return(A=r.signal)==null||A.throwIfAborted(),!1;const w=sS(i,r),_=Math.min(w,v);return(C=r.signal)==null||C.throwIfAborted(),_>0&&await new Promise((N,M)=>{var K,G;const I=()=>{var $;clearTimeout(L),($=r.signal)==null||$.removeEventListener("abort",I),M(r.signal.reason)},L=setTimeout(()=>{var $;($=r.signal)==null||$.removeEventListener("abort",I),N()},_);r.unref&&((K=L.unref)==null||K.call(L)),(G=r.signal)==null||G.addEventListener("abort",I,{once:!0})}),(x=r.signal)==null||x.throwIfAborted(),!0}async function aS(t,e={}){var l,c,f;if(e={...e},oS(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Ga("factor",e.factor,{min:0,allowInfinity:!1}),Ga("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Ga("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Ga("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(l=e.signal)==null||l.throwIfAborted();let i=0,s=0;const r=performance.now();for(;!Number.isFinite(e.retries)||s<=e.retries;){i++;try{(c=e.signal)==null||c.throwIfAborted();const m=await t(i);return(f=e.signal)==null||f.throwIfAborted(),m}catch(m){await rS({error:m,attemptNumber:i,retriesConsumed:s,startTime:r,options:e})&&s++}}throw new Error("Retry attempts exhausted without throwing an error.")}var lS={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uS,cS;function dS(){return{geminiUrl:uS,vertexUrl:cS}}function fS(t,e,i,s){var r,l;if(!(t!=null&&t.baseUrl)){const c=dS();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fn{}function Z(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(i))for(let p=0;p<m.length;p++){const v=m[p];h(v,e.slice(l+1),i[p])}else for(const p of m)h(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];h(m[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),i)):i}else return i}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function hS(t,e){for(const[i,s]of Object.entries(e)){const r=i.split("."),l=s.split("."),c=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Qc(t,r,l,0,c)}}function Qc(t,e,i,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=t;if(c in f&&Array.isArray(f[c]))for(const m of f[c])Qc(m,e,i,s+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,f=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=c[p];for(const[p,v]of Object.entries(m)){const w=[];for(const _ of i.slice(s))_==="*"?w.push(p):w.push(_);h(c,w,v)}for(const p of f)delete c[p]}}else{const c=t;l in c&&Qc(c[l],e,i,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pS(t){const e={},i=d(t,["operationName"]);i!=null&&h(e,["operationName"],i);const s=d(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function mS(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],yS(c)),e}function gS(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],vS(c)),e}function yS(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>_S(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function vS(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>wS(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function _S(t){const e={},i=d(t,["video"]);return i!=null&&h(e,["video"],CS(i)),e}function wS(t){const e={},i=d(t,["_self"]);return i!=null&&h(e,["video"],xS(i)),e}function SS(t){const e={},i=d(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function TS(t){const e={},i=d(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function ES(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],bS(c)),e}function bS(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function o0(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],AS(c)),e}function AS(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function CS(t){const e={},i=d(t,["uri"]);i!=null&&h(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Cd(s));const r=d(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function xS(t){const e={},i=d(t,["gcsUri"]);i!=null&&h(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Cd(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ym;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ym||(Ym={}));var Wm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wm||(Wm={}));var Xm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Xm||(Xm={}));var Se;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Se||(Se={}));var Qm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qm||(Qm={}));var Zm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Zm||(Zm={}));var eg;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(eg||(eg={}));var tg;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(tg||(tg={}));var ng;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ng||(ng={}));var ig;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ig||(ig={}));var og;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(og||(og={}));var sg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(sg||(sg={}));var rg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rg||(rg={}));var ag;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ag||(ag={}));var lg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(lg||(lg={}));var ug;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(ug||(ug={}));var cg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(cg||(cg={}));var dg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dg||(dg={}));var fg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fg||(fg={}));var hg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(hg||(hg={}));var pg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pg||(pg={}));var tl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(tl||(tl={}));var mg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mg||(mg={}));var gg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gg||(gg={}));var yg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yg||(yg={}));var Zc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zc||(Zc={}));var vg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vg||(vg={}));var _g;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(_g||(_g={}));var ed;(function(t){t.COLLECTION="COLLECTION"})(ed||(ed={}));var wg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(wg||(wg={}));var Sg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sg||(Sg={}));var Tg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Tg||(Tg={}));var Eg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Eg||(Eg={}));var bg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bg||(bg={}));var Ag;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ag||(Ag={}));var Cg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cg||(Cg={}));var xg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xg||(xg={}));var Rg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Rg||(Rg={}));var Ng;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ng||(Ng={}));var Ig;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ig||(Ig={}));var kg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(kg||(kg={}));var Mg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Mg||(Mg={}));var Dg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Dg||(Dg={}));var Pg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Pg||(Pg={}));var Lg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Lg||(Lg={}));var Ug;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Ug||(Ug={}));var Og;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Og||(Og={}));var Gg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Gg||(Gg={}));var Bg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Bg||(Bg={}));var qg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(qg||(qg={}));var Vg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Vg||(Vg={}));var Hg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hg||(Hg={}));var zg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zg||(zg={}));var $g;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($g||($g={}));var Fg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Fg||(Fg={}));var Jg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Jg||(Jg={}));var Qo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Qo||(Qo={}));class td{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class rr{get text(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const w=[];for(const _ of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[E,A]of Object.entries(_))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(A!==null||A!==void 0)&&w.push(E);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;v=!0,p+=_.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const w of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[_,E]of Object.entries(w))_!=="inlineData"&&(E!==null||E!==void 0)&&v.push(_);w.inlineData&&typeof w.inlineData.data=="string"&&(p+=atob(w.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,s,r,l,c,f,m,p;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,s,r,l,c,f,m,p;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class jg{}class Kg{}class RS{}class NS{}class IS{}class kS{}class Yg{}class Wg{}class Xg{}class MS{}class nl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new nl;let r;const l=e;return i?r=gS(l):r=mS(l),Object.assign(s,r),s}}class Qg{}class Zg{}class ey{}class ty{}class DS{}class PS{}class LS{}class xd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new xd,l=ES(e);return Object.assign(s,l),s}}class US{}class OS{}class GS{}class BS{}class ny{}class qS{get text(){var e,i,s;let r="",l=!1;const c=[];for(const f of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,s;let r="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class VS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Rd,l=o0(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function s0(t,e){const i=Le(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function r0(t){return Array.isArray(t)?t.map(e=>il(e)):[il(t)]}function il(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function a0(t){const e=il(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function l0(t){const e=il(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function u0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>iy(e)):[iy(t)]}function nd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function oy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function sy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function At(t){if(t==null)throw new Error("ContentUnion is required");return nd(t)?t:{role:"user",parts:u0(t)}}function Nd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=At(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=At(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>At(i)):[At(e)]}function an(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(oy(t)||sy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[At(t)]}const e=[],i=[],s=nd(t[0]);for(const r of t){const l=nd(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(oy(r)||sy(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return s||e.push({role:"user",parts:u0(i)}),e}function HS(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Se).includes(i[0].toUpperCase())?i[0].toUpperCase():Se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Se).includes(s.toUpperCase())?s.toUpperCase():Se.TYPE_UNSPECIFIED})}}function ts(t){const e={},i=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&HS(t.type,e);for(const[c,f]of Object.entries(t))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Se).includes(f.toUpperCase())?f.toUpperCase():Se.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ts(f);else if(s.includes(c)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(ts(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(f))m[p]=ts(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Id(t){return ts(t)}function kd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Md(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function os(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ts(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ts(e.response));return t}function ss(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function zS(t,e,i,s=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function Jn(t,e){if(typeof e!="string")throw new Error("name must be a string");return zS(t,e,"cachedContents")}function c0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function bi(t){return Cd(t)}function $S(t){return t!=null&&typeof t=="object"&&"name"in t}function FS(t){return t!=null&&typeof t=="object"&&"video"in t}function JS(t){return t!=null&&typeof t=="object"&&"uri"in t}function d0(t){var e;let i;if($S(t)&&(i=t.name),!(JS(t)&&(i=t.uri,i===void 0))&&!(FS(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function f0(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function h0(t){for(const e of["models","tunedModels","publisherModels"])if(jS(t,e))return t[e];return[]}function jS(t,e){return t!==null&&typeof t=="object"&&e in t}function KS(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function YS(t,e={}){const i=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=KS(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function p0(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function WS(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function m0(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function rs(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function g0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XS(t){const e={},i=d(t,["responsesFile"]);i!=null&&h(e,["fileName"],i);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kT(c))),h(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function QS(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&h(e,["format"],i);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function ZS(t){const e={},i=d(t,["format"]);i!=null&&h(e,["predictionsFormat"],i);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Za(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["metadata","state"]);r!=null&&h(e,["state"],g0(r));const l=d(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(t,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(t,["metadata","model"]);m!=null&&h(e,["model"],m);const p=d(t,["metadata","output"]);return p!=null&&h(e,["dest"],XS(m0(p))),e}function id(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["state"]);r!=null&&h(e,["state"],g0(r));const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(t,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(e,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&h(e,["model"],v);const w=d(t,["inputConfig"]);w!=null&&h(e,["src"],eT(w));const _=d(t,["outputConfig"]);_!=null&&h(e,["dest"],QS(m0(_)));const E=d(t,["completionStats"]);return E!=null&&h(e,["completionStats"],E),e}function eT(t){const e={},i=d(t,["instancesFormat"]);i!=null&&h(e,["format"],i);const s=d(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function tT(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(i,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>IT(t,c))),h(i,["requests","requests"],l)}return i}function nT(t){const e={},i=d(t,["format"]);i!=null&&h(e,["instancesFormat"],i);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iT(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function oT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function sT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function rT(t){const e={},i=d(t,["content"]);i!=null&&h(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],aT(s));const r=d(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&h(e,["index"],m);const p=d(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["safetyRatings"],_)}const w=d(t,["urlContextMetadata"]);return w!=null&&h(e,["urlContextMetadata"],w),e}function aT(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function y0(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>GT(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function lT(t,e){const i={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function uT(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=d(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],ZS(WS(r))),i}function ry(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Le(t,s));const r=d(e,["src"]);r!=null&&h(i,["batch","inputConfig"],tT(t,p0(t,r)));const l=d(e,["config"]);return l!=null&&lT(l,i),i}function cT(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],Le(t,s));const r=d(e,["src"]);r!=null&&h(i,["inputConfig"],nT(p0(t,r)));const l=d(e,["config"]);return l!=null&&uT(l,i),i}function dT(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),i}function fT(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Le(t,s));const r=d(e,["src"]);r!=null&&h(i,["batch","inputConfig"],_T(t,r));const l=d(e,["config"]);return l!=null&&dT(l,i),i}function hT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function pT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function mT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function gT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function yT(t,e){const i={},s=d(e,["contents"]);if(s!=null){let l=Nd(t,s);Array.isArray(l)&&(l=l.map(c=>c)),h(i,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(h(i,["_self"],vT(r,i)),hS(i,{"requests[].*":"requests[].request.*"})),i}function vT(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function _T(t,e){const i={},s=d(e,["fileName"]);s!=null&&h(i,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&h(i,["requests"],yT(t,r)),i}function wT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ST(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TT(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&h(e,["allowedFunctionNames"],i);const s=d(t,["mode"]);if(s!=null&&h(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ET(t,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&h(i,["systemInstruction"],y0(At(r)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const w=d(e,["responseLogprobs"]);w!=null&&h(s,["responseLogprobs"],w);const _=d(e,["logprobs"]);_!=null&&h(s,["logprobs"],_);const E=d(e,["presencePenalty"]);E!=null&&h(s,["presencePenalty"],E);const A=d(e,["frequencyPenalty"]);A!=null&&h(s,["frequencyPenalty"],A);const C=d(e,["seed"]);C!=null&&h(s,["seed"],C);const x=d(e,["responseMimeType"]);x!=null&&h(s,["responseMimeType"],x);const N=d(e,["responseSchema"]);N!=null&&h(s,["responseSchema"],Id(N));const M=d(e,["responseJsonSchema"]);if(M!=null&&h(s,["responseJsonSchema"],M),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(i!==void 0&&I!=null){let He=I;Array.isArray(He)&&(He=He.map(Ne=>BT(Ne))),h(i,["safetySettings"],He)}const L=d(e,["tools"]);if(i!==void 0&&L!=null){let He=ss(L);Array.isArray(He)&&(He=He.map(Ne=>VT(os(Ne)))),h(i,["tools"],He)}const K=d(e,["toolConfig"]);if(i!==void 0&&K!=null&&h(i,["toolConfig"],qT(K)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=d(e,["cachedContent"]);i!==void 0&&G!=null&&h(i,["cachedContent"],Jn(t,G));const $=d(e,["responseModalities"]);$!=null&&h(s,["responseModalities"],$);const se=d(e,["mediaResolution"]);se!=null&&h(s,["mediaResolution"],se);const Y=d(e,["speechConfig"]);if(Y!=null&&h(s,["speechConfig"],kd(Y)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=d(e,["thinkingConfig"]);pe!=null&&h(s,["thinkingConfig"],pe);const be=d(e,["imageConfig"]);be!=null&&h(s,["imageConfig"],NT(be));const xe=d(e,["enableEnhancedCivicAnswers"]);if(xe!=null&&h(s,["enableEnhancedCivicAnswers"],xe),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function bT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>rT(p))),h(e,["candidates"],m)}const r=d(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function AT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function CT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],rs(t,s)),i}function xT(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function RT(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function NT(t){const e={},i=d(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function IT(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["request","model"],Le(t,s));const r=d(e,["contents"]);if(r!=null){let f=an(r);Array.isArray(f)&&(f=f.map(m=>y0(m))),h(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(i,["request","generationConfig"],ET(t,c,d(i,["request"],{}))),i}function kT(t){const e={},i=d(t,["response"]);i!=null&&h(e,["response"],bT(i));const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["error"]);return r!=null&&h(e,["error"],r),e}function MT(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function DT(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),i}function PT(t){const e={},i=d(t,["config"]);return i!=null&&MT(i,e),e}function LT(t){const e={},i=d(t,["config"]);return i!=null&&DT(i,e),e}function UT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Za(c))),h(e,["batchJobs"],l)}return e}function OT(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>id(c))),h(e,["batchJobs"],l)}return e}function GT(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],wT(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],ST(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],iT(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const w=d(t,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const _=d(t,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function BT(t){const e={},i=d(t,["category"]);if(i!=null&&h(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function qT(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&h(e,["retrievalConfig"],i);const s=d(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],TT(s)),e}function VT(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],xT(c));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],RT(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $n;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})($n||($n={}));class Zi{constructor(e,i,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,r)}init(e,i,s){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HT extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zi($n.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=ry(this.apiClient,e),s=i._url,r=Z("{model}:batchGenerateContent",s),f=i.batch.inputConfig.requests,m=f.requests,p=[];for(const v of m){const w=Object.assign({},v);if(w.systemInstruction){const _=w.systemInstruction;delete w.systemInstruction;const E=w.request;E.systemInstruction=_,w.request=E}p.push(w)}return f.requests=p,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=cT(this.apiClient,e);return f=Z("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>id(v))}else{const p=ry(this.apiClient,e);return f=Z("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Za(v))}}async createEmbeddingsInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fT(this.apiClient,e);return l=Z("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>Za(m))}}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=CT(this.apiClient,e);return f=Z("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>id(v))}else{const p=AT(this.apiClient,e);return f=Z("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Za(v))}}async cancel(e){var i,s,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=sT(this.apiClient,e);c=Z("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=oT(this.apiClient,e);c=Z("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=LT(e);return f=Z("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=OT(v),_=new ny;return Object.assign(_,w),_})}else{const p=PT(e);return f=Z("batches",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=UT(v),_=new ny;return Object.assign(_,w),_})}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=pT(this.apiClient,e);return f=Z("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>gT(v))}else{const p=hT(this.apiClient,e);return f=Z("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>mT(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zT(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ay(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>fE(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function $T(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=an(c);Array.isArray(v)&&(v=v.map(w=>ay(w))),h(e,["contents"],v)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],ay(At(f)));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>pE(w))),h(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],hE(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function FT(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let w=an(c);Array.isArray(w)&&(w=w.map(_=>_)),h(e,["contents"],w)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],At(f));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let w=m;Array.isArray(w)&&(w=w.map(_=>mE(_))),h(e,["tools"],w)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),i}function JT(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],s0(t,s));const r=d(e,["config"]);return r!=null&&$T(r,i),i}function jT(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],s0(t,s));const r=d(e,["config"]);return r!=null&&FT(r,i),i}function KT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],Jn(t,s)),i}function YT(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],Jn(t,s)),i}function WT(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function XT(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function QT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ZT(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eE(t){const e={},i=d(t,["allowedFunctionNames"]);i!=null&&h(e,["allowedFunctionNames"],i);const s=d(t,["mode"]);if(s!=null&&h(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tE(t){const e={},i=d(t,["description"]);i!=null&&h(e,["description"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&h(e,["response"],c);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nE(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],Jn(t,s)),i}function iE(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],Jn(t,s)),i}function oE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function sE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function rE(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function aE(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function lE(t){const e={},i=d(t,["config"]);return i!=null&&rE(i,e),e}function uE(t){const e={},i=d(t,["config"]);return i!=null&&aE(i,e),e}function cE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function dE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function fE(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],QT(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],ZT(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],zT(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const w=d(t,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const _=d(t,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function hE(t){const e={},i=d(t,["retrievalConfig"]);i!=null&&h(e,["retrievalConfig"],i);const s=d(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],eE(s)),e}function pE(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],oE(c));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],sE(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function mE(t){const e={},i=d(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=d(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(_=>tE(_))),h(e,["functionDeclarations"],w)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function gE(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),i}function yE(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),i}function vE(t,e){const i={},s=d(e,["name"]);s!=null&&h(i,["_url","name"],Jn(t,s));const r=d(e,["config"]);return r!=null&&gE(r,i),i}function _E(t,e){const i={},s=d(e,["name"]);s!=null&&h(i,["_url","name"],Jn(t,s));const r=d(e,["config"]);return r!=null&&yE(r,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wE extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zi($n.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=jT(this.apiClient,e);return f=Z("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=JT(this.apiClient,e);return f=Z("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=iE(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=nE(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=YT(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=XT(v),_=new ey;return Object.assign(_,w),_})}else{const p=KT(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=WT(v),_=new ey;return Object.assign(_,w),_})}}async update(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=_E(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=vE(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=uE(e);return f=Z("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=dE(v),_=new ty;return Object.assign(_,w),_})}else{const p=lE(e);return f=Z("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=cE(v),_=new ty;return Object.assign(_,w),_})}}}function ol(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i}function ly(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function mn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(E){return function(A){return Promise.resolve(A).then(E,w)}}function f(E,A){s[E]&&(r[E]=function(C){return new Promise(function(x,N){l.push([E,C,x,N])>1||m(E,C)})},A&&(r[E]=A(r[E])))}function m(E,A){try{p(s[E](A))}catch(C){_(l[0][3],C)}}function p(E){E.value instanceof ge?Promise.resolve(E.value.v).then(v,w):_(l[0][2],E)}function v(E){m("next",E)}function w(E){m("throw",E)}function _(E,A){E(A),l.shift(),l.length&&m(l[0][0],l[0][1])}}function gn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof ly=="function"?ly(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(f,m){c=t[l](c),r(f,m,c.done,c.value)})}}function r(l,c,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SE(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:v0(i)}function v0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function TE(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function uy(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<i&&t[s].role==="model";)r.push(t[s]),l&&!v0(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class EE{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new bE(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bE{constructor(e,i,s,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),TE(l)}async sendMessage(e){var i;await this.sendPromise;const s=At(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,f;const m=await r,p=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let _=[];v!=null&&(_=(f=v.slice(w))!==null&&f!==void 0?f:[]);const E=p?[p]:[];this.recordHistory(s,E,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const s=At(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?uy(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return mn(this,arguments,function*(){var r,l,c,f,m,p;const v=[];try{for(var w=!0,_=gn(e),E;E=yield ge(_.next()),r=E.done,!r;w=!0){f=E.value,w=!1;const A=f;if(SE(A)){const C=(p=(m=A.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;C!==void 0&&v.push(C)}yield yield ge(A)}}catch(A){l={error:A}}finally{try{!w&&!r&&(c=_.return)&&(yield ge(c.call(_)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...uy(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,hr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AE(t){const e={},i=d(t,["file"]);return i!=null&&h(e,["file"],i),e}function CE(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function xE(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","file"],d0(i)),e}function RE(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function NE(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","file"],d0(i)),e}function IE(t){const e={},i=d(t,["uris"]);return i!=null&&h(e,["uris"],i),e}function kE(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function ME(t){const e={},i=d(t,["config"]);return i!=null&&kE(i,e),e}function DE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}function PE(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LE extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zi($n.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ME(e);return l=Z("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=DE(m),v=new US;return Object.assign(v,p),v})}}async createInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=AE(e);return l=Z("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=CE(m),v=new OS;return Object.assign(v,p),v})}}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NE(e);return l=Z("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xE(e);return l=Z("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=RE(m),v=new GS;return Object.assign(v,p),v})}}async registerFilesInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IE(e);return l=Z("files:register",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=PE(m),v=new BS;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function el(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function UE(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>QE(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function OE(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function GE(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BE(t){const e={},i=d(t,["description"]);i!=null&&h(e,["description"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&h(e,["response"],c);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function qE(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&h(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=d(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const w=d(t,["presencePenalty"]);w!=null&&h(e,["presencePenalty"],w);const _=d(t,["responseLogprobs"]);_!=null&&h(e,["responseLogprobs"],_);const E=d(t,["responseMimeType"]);E!=null&&h(e,["responseMimeType"],E);const A=d(t,["responseModalities"]);A!=null&&h(e,["responseModalities"],A);const C=d(t,["responseSchema"]);C!=null&&h(e,["responseSchema"],C);const x=d(t,["routingConfig"]);x!=null&&h(e,["routingConfig"],x);const N=d(t,["seed"]);N!=null&&h(e,["seed"],N);const M=d(t,["speechConfig"]);M!=null&&h(e,["speechConfig"],M);const I=d(t,["stopSequences"]);I!=null&&h(e,["stopSequences"],I);const L=d(t,["temperature"]);L!=null&&h(e,["temperature"],L);const K=d(t,["thinkingConfig"]);K!=null&&h(e,["thinkingConfig"],K);const G=d(t,["topK"]);G!=null&&h(e,["topK"],G);const $=d(t,["topP"]);if($!=null&&h(e,["topP"],$),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function HE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function zE(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const w=d(t,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],Md(w));const _=d(t,["thinkingConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","thinkingConfig"],_);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],UE(At(A)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let G=ss(C);Array.isArray(G)&&(G=G.map($=>eb(os($)))),h(e,["setup","tools"],G)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&h(e,["setup","sessionResumption"],ZE(x));const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const M=d(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","outputAudioTranscription"],M);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],L);const K=d(t,["proactivity"]);if(e!==void 0&&K!=null&&h(e,["setup","proactivity"],K),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function $E(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],qE(s));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const w=d(t,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],Md(w));const _=d(t,["thinkingConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","thinkingConfig"],_);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],At(A));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let $=ss(C);Array.isArray($)&&($=$.map(se=>tb(os(se)))),h(e,["setup","tools"],$)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&h(e,["setup","sessionResumption"],x);const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const M=d(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","outputAudioTranscription"],M);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],L);const K=d(t,["proactivity"]);e!==void 0&&K!=null&&h(e,["setup","proactivity"],K);const G=d(t,["explicitVadSignal"]);return e!==void 0&&G!=null&&h(e,["setup","explicitVadSignal"],G),i}function FE(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Le(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],zE(r,i)),i}function JE(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Le(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],$E(r,i)),i}function jE(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],i),e}function KE(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function YE(t){const e={},i=d(t,["media"]);if(i!=null){let p=r0(i);Array.isArray(p)&&(p=p.map(v=>el(v))),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],el(l0(s)));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],el(a0(l)));const c=d(t,["text"]);c!=null&&h(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function WE(t){const e={},i=d(t,["media"]);if(i!=null){let p=r0(i);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],l0(s));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],a0(l));const c=d(t,["text"]);c!=null&&h(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function XE(t){const e={},i=d(t,["setupComplete"]);i!=null&&h(e,["setupComplete"],i);const s=d(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=d(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],nb(c));const f=d(t,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(t,["sessionResumptionUpdate"]);m!=null&&h(e,["sessionResumptionUpdate"],m);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],ib(v)),e}function QE(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],OE(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],GE(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],el(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const w=d(t,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const _=d(t,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function ZE(t){const e={},i=d(t,["handle"]);if(i!=null&&h(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eb(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],VE(c));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],HE(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function tb(t){const e={},i=d(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=d(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=d(t,["functionDeclarations"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(_=>BE(_))),h(e,["functionDeclarations"],w)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function nb(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&h(e,["promptTokenCount"],i);const s=d(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=d(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(t,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(t,["promptTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["promptTokensDetails"],E)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["cacheTokensDetails"],E)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["responseTokensDetails"],E)}const w=d(t,["toolUsePromptTokensDetails"]);if(w!=null){let E=w;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["toolUsePromptTokensDetails"],E)}const _=d(t,["trafficType"]);return _!=null&&h(e,["trafficType"],_),e}function ib(t){const e={},i=d(t,["type"]);return i!=null&&h(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ob(t,e){const i={},s=d(t,["data"]);if(s!=null&&h(i,["data"],s),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(i,["mimeType"],r),i}function sb(t,e){const i={},s=d(t,["content"]);s!=null&&h(i,["content"],s);const r=d(t,["citationMetadata"]);r!=null&&h(i,["citationMetadata"],rb(r));const l=d(t,["tokenCount"]);l!=null&&h(i,["tokenCount"],l);const c=d(t,["finishReason"]);c!=null&&h(i,["finishReason"],c);const f=d(t,["avgLogprobs"]);f!=null&&h(i,["avgLogprobs"],f);const m=d(t,["groundingMetadata"]);m!=null&&h(i,["groundingMetadata"],m);const p=d(t,["index"]);p!=null&&h(i,["index"],p);const v=d(t,["logprobsResult"]);v!=null&&h(i,["logprobsResult"],v);const w=d(t,["safetyRatings"]);if(w!=null){let E=w;Array.isArray(E)&&(E=E.map(A=>A)),h(i,["safetyRatings"],E)}const _=d(t,["urlContextMetadata"]);return _!=null&&h(i,["urlContextMetadata"],_),i}function rb(t,e){const i={},s=d(t,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(i,["citations"],r)}return i}function ab(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let c=an(l);Array.isArray(c)&&(c=c.map(f=>f)),h(s,["contents"],c)}return s}function lb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(i,["tokensInfo"],l)}return i}function ub(t,e){const i={},s=d(t,["values"]);s!=null&&h(i,["values"],s);const r=d(t,["statistics"]);return r!=null&&h(i,["statistics"],cb(r)),i}function cb(t,e){const i={},s=d(t,["truncated"]);s!=null&&h(i,["truncated"],s);const r=d(t,["token_count"]);return r!=null&&h(i,["tokenCount"],r),i}function cl(t,e){const i={},s=d(t,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_A(c))),h(i,["parts"],l)}const r=d(t,["role"]);return r!=null&&h(i,["role"],r),i}function db(t,e){const i={},s=d(t,["controlType"]);s!=null&&h(i,["controlType"],s);const r=d(t,["enableControlImageComputation"]);return r!=null&&h(i,["computeControl"],r),i}function fb(t,e){const i={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function hb(t,e,i){const s={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],At(r));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>T0(m))),h(e,["tools"],f)}const c=d(t,["generationConfig"]);return e!==void 0&&c!=null&&h(e,["generationConfig"],oA(c)),s}function pb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let f=an(l);Array.isArray(f)&&(f=f.map(m=>cl(m))),h(s,["contents"],f)}const c=d(e,["config"]);return c!=null&&fb(c),s}function mb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let f=an(l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["contents"],f)}const c=d(e,["config"]);return c!=null&&hb(c,s),s}function gb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);r!=null&&h(i,["totalTokens"],r);const l=d(t,["cachedContentTokenCount"]);return l!=null&&h(i,["cachedContentTokenCount"],l),i}function yb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);return r!=null&&h(i,["totalTokens"],r),i}function vb(t,e,i){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],Le(t,r)),s}function _b(t,e,i){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],Le(t,r)),s}function wb(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function Sb(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function Tb(t,e,i){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const c=d(t,["numberOfImages"]);e!==void 0&&c!=null&&h(e,["parameters","sampleCount"],c);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const m=d(t,["guidanceScale"]);e!==void 0&&m!=null&&h(e,["parameters","guidanceScale"],m);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=d(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const w=d(t,["personGeneration"]);e!==void 0&&w!=null&&h(e,["parameters","personGeneration"],w);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&h(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","mimeType"],C);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const N=d(t,["addWatermark"]);e!==void 0&&N!=null&&h(e,["parameters","addWatermark"],N);const M=d(t,["labels"]);e!==void 0&&M!=null&&h(e,["labels"],M);const I=d(t,["editMode"]);e!==void 0&&I!=null&&h(e,["parameters","editMode"],I);const L=d(t,["baseSteps"]);return e!==void 0&&L!=null&&h(e,["parameters","editConfig","baseSteps"],L),s}function Eb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const c=d(e,["referenceImages"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>AA(p))),h(s,["instances[0]","referenceImages"],m)}const f=d(e,["config"]);return f!=null&&Tb(f,s),s}function bb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>dl(c))),h(i,["generatedImages"],l)}return i}function Ab(t,e,i){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const c=d(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&h(e,["requests[]","outputDimensionality"],c),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function Cb(t,e,i){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const c=d(t,["outputDimensionality"]);e!==void 0&&c!=null&&h(e,["parameters","outputDimensionality"],c);const f=d(t,["mimeType"]);e!==void 0&&f!=null&&h(e,["instances[]","mimeType"],f);const m=d(t,["autoTruncate"]);return e!==void 0&&m!=null&&h(e,["parameters","autoTruncate"],m),s}function xb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let m=Nd(t,l);Array.isArray(m)&&(m=m.map(p=>p)),h(s,["requests[]","content"],m)}const c=d(e,["config"]);c!=null&&Ab(c,s);const f=d(e,["model"]);return f!==void 0&&h(s,["requests[]","model"],Le(t,f)),s}function Rb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let f=Nd(t,l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["instances[]","content"],f)}const c=d(e,["config"]);return c!=null&&Cb(c,s),s}function Nb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),h(i,["embeddings"],c)}const l=d(t,["metadata"]);return l!=null&&h(i,["metadata"],l),i}function Ib(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>ub(f))),h(i,["embeddings"],c)}const l=d(t,["metadata"]);return l!=null&&h(i,["metadata"],l),i}function kb(t,e){const i={},s=d(t,["endpoint"]);s!=null&&h(i,["name"],s);const r=d(t,["deployedModelId"]);return r!=null&&h(i,["deployedModelId"],r),i}function Mb(t,e){const i={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["fileUri"]);s!=null&&h(i,["fileUri"],s);const r=d(t,["mimeType"]);return r!=null&&h(i,["mimeType"],r),i}function Db(t,e){const i={},s=d(t,["id"]);s!=null&&h(i,["id"],s);const r=d(t,["args"]);r!=null&&h(i,["args"],r);const l=d(t,["name"]);if(l!=null&&h(i,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function Pb(t,e){const i={},s=d(t,["allowedFunctionNames"]);s!=null&&h(i,["allowedFunctionNames"],s);const r=d(t,["mode"]);if(r!=null&&h(i,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function Lb(t,e){const i={},s=d(t,["description"]);s!=null&&h(i,["description"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["parameters"]);l!=null&&h(i,["parameters"],l);const c=d(t,["parametersJsonSchema"]);c!=null&&h(i,["parametersJsonSchema"],c);const f=d(t,["response"]);f!=null&&h(i,["response"],f);const m=d(t,["responseJsonSchema"]);if(m!=null&&h(i,["responseJsonSchema"],m),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function Ub(t,e,i,s){const r={},l=d(e,["systemInstruction"]);i!==void 0&&l!=null&&h(i,["systemInstruction"],cl(At(l)));const c=d(e,["temperature"]);c!=null&&h(r,["temperature"],c);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const m=d(e,["topK"]);m!=null&&h(r,["topK"],m);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=d(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const w=d(e,["stopSequences"]);w!=null&&h(r,["stopSequences"],w);const _=d(e,["responseLogprobs"]);_!=null&&h(r,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&h(r,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&h(r,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&h(r,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&h(r,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&h(r,["responseMimeType"],N);const M=d(e,["responseSchema"]);M!=null&&h(r,["responseSchema"],Id(M));const I=d(e,["responseJsonSchema"]);if(I!=null&&h(r,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(i!==void 0&&L!=null){let Ne=L;Array.isArray(Ne)&&(Ne=Ne.map($e=>CA($e))),h(i,["safetySettings"],Ne)}const K=d(e,["tools"]);if(i!==void 0&&K!=null){let Ne=ss(K);Array.isArray(Ne)&&(Ne=Ne.map($e=>DA(os($e)))),h(i,["tools"],Ne)}const G=d(e,["toolConfig"]);if(i!==void 0&&G!=null&&h(i,["toolConfig"],MA(G)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=d(e,["cachedContent"]);i!==void 0&&$!=null&&h(i,["cachedContent"],Jn(t,$));const se=d(e,["responseModalities"]);se!=null&&h(r,["responseModalities"],se);const Y=d(e,["mediaResolution"]);Y!=null&&h(r,["mediaResolution"],Y);const pe=d(e,["speechConfig"]);if(pe!=null&&h(r,["speechConfig"],kd(pe)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const be=d(e,["thinkingConfig"]);be!=null&&h(r,["thinkingConfig"],be);const xe=d(e,["imageConfig"]);xe!=null&&h(r,["imageConfig"],uA(xe));const He=d(e,["enableEnhancedCivicAnswers"]);if(He!=null&&h(r,["enableEnhancedCivicAnswers"],He),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Ob(t,e,i,s){const r={},l=d(e,["systemInstruction"]);i!==void 0&&l!=null&&h(i,["systemInstruction"],At(l));const c=d(e,["temperature"]);c!=null&&h(r,["temperature"],c);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const m=d(e,["topK"]);m!=null&&h(r,["topK"],m);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const v=d(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const w=d(e,["stopSequences"]);w!=null&&h(r,["stopSequences"],w);const _=d(e,["responseLogprobs"]);_!=null&&h(r,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&h(r,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&h(r,["presencePenalty"],A);const C=d(e,["frequencyPenalty"]);C!=null&&h(r,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&h(r,["seed"],x);const N=d(e,["responseMimeType"]);N!=null&&h(r,["responseMimeType"],N);const M=d(e,["responseSchema"]);M!=null&&h(r,["responseSchema"],Id(M));const I=d(e,["responseJsonSchema"]);I!=null&&h(r,["responseJsonSchema"],I);const L=d(e,["routingConfig"]);L!=null&&h(r,["routingConfig"],L);const K=d(e,["modelSelectionConfig"]);K!=null&&h(r,["modelConfig"],K);const G=d(e,["safetySettings"]);if(i!==void 0&&G!=null){let ne=G;Array.isArray(ne)&&(ne=ne.map(Ie=>Ie)),h(i,["safetySettings"],ne)}const $=d(e,["tools"]);if(i!==void 0&&$!=null){let ne=ss($);Array.isArray(ne)&&(ne=ne.map(Ie=>T0(os(Ie)))),h(i,["tools"],ne)}const se=d(e,["toolConfig"]);i!==void 0&&se!=null&&h(i,["toolConfig"],se);const Y=d(e,["labels"]);i!==void 0&&Y!=null&&h(i,["labels"],Y);const pe=d(e,["cachedContent"]);i!==void 0&&pe!=null&&h(i,["cachedContent"],Jn(t,pe));const be=d(e,["responseModalities"]);be!=null&&h(r,["responseModalities"],be);const xe=d(e,["mediaResolution"]);xe!=null&&h(r,["mediaResolution"],xe);const He=d(e,["speechConfig"]);He!=null&&h(r,["speechConfig"],kd(He));const Ne=d(e,["audioTimestamp"]);Ne!=null&&h(r,["audioTimestamp"],Ne);const $e=d(e,["thinkingConfig"]);$e!=null&&h(r,["thinkingConfig"],$e);const V=d(e,["imageConfig"]);if(V!=null&&h(r,["imageConfig"],cA(V)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const X=d(e,["modelArmorConfig"]);return i!==void 0&&X!=null&&h(i,["modelArmorConfig"],X),r}function cy(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let f=an(l);Array.isArray(f)&&(f=f.map(m=>cl(m))),h(s,["contents"],f)}const c=d(e,["config"]);return c!=null&&h(s,["generationConfig"],Ub(t,c,s)),s}function dy(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["contents"]);if(l!=null){let f=an(l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["contents"],f)}const c=d(e,["config"]);return c!=null&&h(s,["generationConfig"],Ob(t,c,s)),s}function fy(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>sb(v))),h(i,["candidates"],p)}const l=d(t,["modelVersion"]);l!=null&&h(i,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&h(i,["promptFeedback"],c);const f=d(t,["responseId"]);f!=null&&h(i,["responseId"],f);const m=d(t,["usageMetadata"]);return m!=null&&h(i,["usageMetadata"],m),i}function hy(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(w=>w)),h(i,["candidates"],v)}const l=d(t,["createTime"]);l!=null&&h(i,["createTime"],l);const c=d(t,["modelVersion"]);c!=null&&h(i,["modelVersion"],c);const f=d(t,["promptFeedback"]);f!=null&&h(i,["promptFeedback"],f);const m=d(t,["responseId"]);m!=null&&h(i,["responseId"],m);const p=d(t,["usageMetadata"]);return p!=null&&h(i,["usageMetadata"],p),i}function Gb(t,e,i){const s={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(t,["guidanceScale"]);if(e!==void 0&&c!=null&&h(e,["parameters","guidanceScale"],c),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const v=d(t,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const w=d(t,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=d(t,["imageSize"]);if(e!==void 0&&A!=null&&h(e,["parameters","sampleImageSize"],A),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function Bb(t,e,i){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const c=d(t,["numberOfImages"]);e!==void 0&&c!=null&&h(e,["parameters","sampleCount"],c);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const m=d(t,["guidanceScale"]);e!==void 0&&m!=null&&h(e,["parameters","guidanceScale"],m);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const v=d(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const w=d(t,["personGeneration"]);e!==void 0&&w!=null&&h(e,["parameters","personGeneration"],w);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&h(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&h(e,["parameters","language"],A);const C=d(t,["outputMimeType"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","mimeType"],C);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const N=d(t,["addWatermark"]);e!==void 0&&N!=null&&h(e,["parameters","addWatermark"],N);const M=d(t,["labels"]);e!==void 0&&M!=null&&h(e,["labels"],M);const I=d(t,["imageSize"]);e!==void 0&&I!=null&&h(e,["parameters","sampleImageSize"],I);const L=d(t,["enhancePrompt"]);return e!==void 0&&L!=null&&h(e,["parameters","enhancePrompt"],L),s}function qb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const c=d(e,["config"]);return c!=null&&Gb(c,s),s}function Vb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const c=d(e,["config"]);return c!=null&&Bb(c,s),s}function Hb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>eA(f))),h(i,["generatedImages"],c)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(i,["positivePromptSafetyAttributes"],w0(l)),i}function zb(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>dl(f))),h(i,["generatedImages"],c)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(i,["positivePromptSafetyAttributes"],S0(l)),i}function $b(t,e,i){const s={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(t,["resolution"]);e!==void 0&&f!=null&&h(e,["parameters","resolution"],f);const m=d(t,["personGeneration"]);if(e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const v=d(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const w=d(t,["lastFrame"]);e!==void 0&&w!=null&&h(e,["instances[0]","lastFrame"],fl(w));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>JA(A))),h(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function Fb(t,e,i){const s={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(t,["fps"]);e!==void 0&&c!=null&&h(e,["parameters","fps"],c);const f=d(t,["durationSeconds"]);e!==void 0&&f!=null&&h(e,["parameters","durationSeconds"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const v=d(t,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const w=d(t,["personGeneration"]);e!==void 0&&w!=null&&h(e,["parameters","personGeneration"],w);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&h(e,["parameters","pubsubTopic"],_);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","negativePrompt"],E);const A=d(t,["enhancePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A);const C=d(t,["generateAudio"]);e!==void 0&&C!=null&&h(e,["parameters","generateAudio"],C);const x=d(t,["lastFrame"]);e!==void 0&&x!=null&&h(e,["instances[0]","lastFrame"],yn(x));const N=d(t,["referenceImages"]);if(e!==void 0&&N!=null){let L=N;Array.isArray(L)&&(L=L.map(K=>jA(K))),h(e,["instances[0]","referenceImages"],L)}const M=d(t,["mask"]);e!==void 0&&M!=null&&h(e,["instances[0]","mask"],FA(M));const I=d(t,["compressionQuality"]);return e!==void 0&&I!=null&&h(e,["parameters","compressionQuality"],I),s}function Jb(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["name"],s);const r=d(t,["metadata"]);r!=null&&h(i,["metadata"],r);const l=d(t,["done"]);l!=null&&h(i,["done"],l);const c=d(t,["error"]);c!=null&&h(i,["error"],c);const f=d(t,["response","generateVideoResponse"]);return f!=null&&h(i,["response"],Wb(f)),i}function jb(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["name"],s);const r=d(t,["metadata"]);r!=null&&h(i,["metadata"],r);const l=d(t,["done"]);l!=null&&h(i,["done"],l);const c=d(t,["error"]);c!=null&&h(i,["error"],c);const f=d(t,["response"]);return f!=null&&h(i,["response"],Xb(f)),i}function Kb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const c=d(e,["image"]);c!=null&&h(s,["instances[0]","image"],fl(c));const f=d(e,["video"]);f!=null&&h(s,["instances[0]","video"],E0(f));const m=d(e,["source"]);m!=null&&Qb(m,s);const p=d(e,["config"]);return p!=null&&$b(p,s),s}function Yb(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const c=d(e,["image"]);c!=null&&h(s,["instances[0]","image"],yn(c));const f=d(e,["video"]);f!=null&&h(s,["instances[0]","video"],b0(f));const m=d(e,["source"]);m!=null&&Zb(m,s);const p=d(e,["config"]);return p!=null&&Fb(p,s),s}function Wb(t,e){const i={},s=d(t,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>nA(f))),h(i,["generatedVideos"],c)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(i,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(i,["raiMediaFilteredReasons"],l),i}function Xb(t,e){const i={},s=d(t,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>iA(f))),h(i,["generatedVideos"],c)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(i,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(i,["raiMediaFilteredReasons"],l),i}function Qb(t,e,i){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],fl(l));const c=d(t,["video"]);return e!==void 0&&c!=null&&h(e,["instances[0]","video"],E0(c)),s}function Zb(t,e,i){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],yn(l));const c=d(t,["video"]);return e!==void 0&&c!=null&&h(e,["instances[0]","video"],b0(c)),s}function eA(t,e){const i={},s=d(t,["_self"]);s!=null&&h(i,["image"],dA(s));const r=d(t,["raiFilteredReason"]);r!=null&&h(i,["raiFilteredReason"],r);const l=d(t,["_self"]);return l!=null&&h(i,["safetyAttributes"],w0(l)),i}function dl(t,e){const i={},s=d(t,["_self"]);s!=null&&h(i,["image"],_0(s));const r=d(t,["raiFilteredReason"]);r!=null&&h(i,["raiFilteredReason"],r);const l=d(t,["_self"]);l!=null&&h(i,["safetyAttributes"],S0(l));const c=d(t,["prompt"]);return c!=null&&h(i,["enhancedPrompt"],c),i}function tA(t,e){const i={},s=d(t,["_self"]);s!=null&&h(i,["mask"],_0(s));const r=d(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(i,["labels"],l)}return i}function nA(t,e){const i={},s=d(t,["video"]);return s!=null&&h(i,["video"],zA(s)),i}function iA(t,e){const i={},s=d(t,["_self"]);return s!=null&&h(i,["video"],$A(s)),i}function oA(t,e){const i={},s=d(t,["modelSelectionConfig"]);s!=null&&h(i,["modelConfig"],s);const r=d(t,["responseJsonSchema"]);r!=null&&h(i,["responseJsonSchema"],r);const l=d(t,["audioTimestamp"]);l!=null&&h(i,["audioTimestamp"],l);const c=d(t,["candidateCount"]);c!=null&&h(i,["candidateCount"],c);const f=d(t,["enableAffectiveDialog"]);f!=null&&h(i,["enableAffectiveDialog"],f);const m=d(t,["frequencyPenalty"]);m!=null&&h(i,["frequencyPenalty"],m);const p=d(t,["logprobs"]);p!=null&&h(i,["logprobs"],p);const v=d(t,["maxOutputTokens"]);v!=null&&h(i,["maxOutputTokens"],v);const w=d(t,["mediaResolution"]);w!=null&&h(i,["mediaResolution"],w);const _=d(t,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const E=d(t,["responseLogprobs"]);E!=null&&h(i,["responseLogprobs"],E);const A=d(t,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const C=d(t,["responseModalities"]);C!=null&&h(i,["responseModalities"],C);const x=d(t,["responseSchema"]);x!=null&&h(i,["responseSchema"],x);const N=d(t,["routingConfig"]);N!=null&&h(i,["routingConfig"],N);const M=d(t,["seed"]);M!=null&&h(i,["seed"],M);const I=d(t,["speechConfig"]);I!=null&&h(i,["speechConfig"],I);const L=d(t,["stopSequences"]);L!=null&&h(i,["stopSequences"],L);const K=d(t,["temperature"]);K!=null&&h(i,["temperature"],K);const G=d(t,["thinkingConfig"]);G!=null&&h(i,["thinkingConfig"],G);const $=d(t,["topK"]);$!=null&&h(i,["topK"],$);const se=d(t,["topP"]);if(se!=null&&h(i,["topP"],se),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function sA(t,e,i){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],Le(t,r)),s}function rA(t,e,i){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],Le(t,r)),s}function aA(t,e){const i={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=d(t,["enableWidget"]);return s!=null&&h(i,["enableWidget"],s),i}function lA(t,e){const i={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=d(t,["timeRangeFilter"]);return s!=null&&h(i,["timeRangeFilter"],s),i}function uA(t,e){const i={},s=d(t,["aspectRatio"]);s!=null&&h(i,["aspectRatio"],s);const r=d(t,["imageSize"]);if(r!=null&&h(i,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function cA(t,e){const i={},s=d(t,["aspectRatio"]);s!=null&&h(i,["aspectRatio"],s);const r=d(t,["imageSize"]);r!=null&&h(i,["imageSize"],r);const l=d(t,["personGeneration"]);l!=null&&h(i,["personGeneration"],l);const c=d(t,["outputMimeType"]);c!=null&&h(i,["imageOutputOptions","mimeType"],c);const f=d(t,["outputCompressionQuality"]);return f!=null&&h(i,["imageOutputOptions","compressionQuality"],f),i}function dA(t,e){const i={},s=d(t,["bytesBase64Encoded"]);s!=null&&h(i,["imageBytes"],bi(s));const r=d(t,["mimeType"]);return r!=null&&h(i,["mimeType"],r),i}function _0(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&h(i,["gcsUri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(i,["imageBytes"],bi(r));const l=d(t,["mimeType"]);return l!=null&&h(i,["mimeType"],l),i}function fl(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=d(t,["imageBytes"]);s!=null&&h(i,["bytesBase64Encoded"],bi(s));const r=d(t,["mimeType"]);return r!=null&&h(i,["mimeType"],r),i}function yn(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&h(i,["gcsUri"],s);const r=d(t,["imageBytes"]);r!=null&&h(i,["bytesBase64Encoded"],bi(r));const l=d(t,["mimeType"]);return l!=null&&h(i,["mimeType"],l),i}function fA(t,e,i,s){const r={},l=d(e,["pageSize"]);i!==void 0&&l!=null&&h(i,["_query","pageSize"],l);const c=d(e,["pageToken"]);i!==void 0&&c!=null&&h(i,["_query","pageToken"],c);const f=d(e,["filter"]);i!==void 0&&f!=null&&h(i,["_query","filter"],f);const m=d(e,["queryBase"]);return i!==void 0&&m!=null&&h(i,["_url","models_url"],f0(t,m)),r}function hA(t,e,i,s){const r={},l=d(e,["pageSize"]);i!==void 0&&l!=null&&h(i,["_query","pageSize"],l);const c=d(e,["pageToken"]);i!==void 0&&c!=null&&h(i,["_query","pageToken"],c);const f=d(e,["filter"]);i!==void 0&&f!=null&&h(i,["_query","filter"],f);const m=d(e,["queryBase"]);return i!==void 0&&m!=null&&h(i,["_url","models_url"],f0(t,m)),r}function pA(t,e,i){const s={},r=d(e,["config"]);return r!=null&&fA(t,r,s),s}function mA(t,e,i){const s={},r=d(e,["config"]);return r!=null&&hA(t,r,s),s}function gA(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let c=h0(l);Array.isArray(c)&&(c=c.map(f=>od(f))),h(i,["models"],c)}return i}function yA(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let c=h0(l);Array.isArray(c)&&(c=c.map(f=>sd(f))),h(i,["models"],c)}return i}function vA(t,e){const i={},s=d(t,["maskMode"]);s!=null&&h(i,["maskMode"],s);const r=d(t,["segmentationClasses"]);r!=null&&h(i,["maskClasses"],r);const l=d(t,["maskDilation"]);return l!=null&&h(i,["dilation"],l),i}function od(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["name"],s);const r=d(t,["displayName"]);r!=null&&h(i,["displayName"],r);const l=d(t,["description"]);l!=null&&h(i,["description"],l);const c=d(t,["version"]);c!=null&&h(i,["version"],c);const f=d(t,["_self"]);f!=null&&h(i,["tunedModelInfo"],PA(f));const m=d(t,["inputTokenLimit"]);m!=null&&h(i,["inputTokenLimit"],m);const p=d(t,["outputTokenLimit"]);p!=null&&h(i,["outputTokenLimit"],p);const v=d(t,["supportedGenerationMethods"]);v!=null&&h(i,["supportedActions"],v);const w=d(t,["temperature"]);w!=null&&h(i,["temperature"],w);const _=d(t,["maxTemperature"]);_!=null&&h(i,["maxTemperature"],_);const E=d(t,["topP"]);E!=null&&h(i,["topP"],E);const A=d(t,["topK"]);A!=null&&h(i,["topK"],A);const C=d(t,["thinking"]);return C!=null&&h(i,["thinking"],C),i}function sd(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["name"],s);const r=d(t,["displayName"]);r!=null&&h(i,["displayName"],r);const l=d(t,["description"]);l!=null&&h(i,["description"],l);const c=d(t,["versionId"]);c!=null&&h(i,["version"],c);const f=d(t,["deployedModels"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>kb(E))),h(i,["endpoints"],_)}const m=d(t,["labels"]);m!=null&&h(i,["labels"],m);const p=d(t,["_self"]);p!=null&&h(i,["tunedModelInfo"],LA(p));const v=d(t,["defaultCheckpointId"]);v!=null&&h(i,["defaultCheckpointId"],v);const w=d(t,["checkpoints"]);if(w!=null){let _=w;Array.isArray(_)&&(_=_.map(E=>E)),h(i,["checkpoints"],_)}return i}function _A(t,e){const i={},s=d(t,["mediaResolution"]);s!=null&&h(i,["mediaResolution"],s);const r=d(t,["codeExecutionResult"]);r!=null&&h(i,["codeExecutionResult"],r);const l=d(t,["executableCode"]);l!=null&&h(i,["executableCode"],l);const c=d(t,["fileData"]);c!=null&&h(i,["fileData"],Mb(c));const f=d(t,["functionCall"]);f!=null&&h(i,["functionCall"],Db(f));const m=d(t,["functionResponse"]);m!=null&&h(i,["functionResponse"],m);const p=d(t,["inlineData"]);p!=null&&h(i,["inlineData"],ob(p));const v=d(t,["text"]);v!=null&&h(i,["text"],v);const w=d(t,["thought"]);w!=null&&h(i,["thought"],w);const _=d(t,["thoughtSignature"]);_!=null&&h(i,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&h(i,["videoMetadata"],E),i}function wA(t,e){const i={},s=d(t,["productImage"]);return s!=null&&h(i,["image"],yn(s)),i}function SA(t,e,i){const s={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const c=d(t,["outputGcsUri"]);e!==void 0&&c!=null&&h(e,["parameters","storageUri"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const v=d(t,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const w=d(t,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","enhancePrompt"],E);const A=d(t,["labels"]);return e!==void 0&&A!=null&&h(e,["labels"],A),s}function TA(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["source"]);l!=null&&bA(l,s);const c=d(e,["config"]);return c!=null&&SA(c,s),s}function EA(t,e){const i={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>dl(l))),h(i,["generatedImages"],r)}return i}function bA(t,e,i){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],yn(l));const c=d(t,["productImages"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>wA(m))),h(e,["instances[0]","productImages"],f)}return s}function AA(t,e){const i={},s=d(t,["referenceImage"]);s!=null&&h(i,["referenceImage"],yn(s));const r=d(t,["referenceId"]);r!=null&&h(i,["referenceId"],r);const l=d(t,["referenceType"]);l!=null&&h(i,["referenceType"],l);const c=d(t,["maskImageConfig"]);c!=null&&h(i,["maskImageConfig"],vA(c));const f=d(t,["controlImageConfig"]);f!=null&&h(i,["controlImageConfig"],db(f));const m=d(t,["styleImageConfig"]);m!=null&&h(i,["styleImageConfig"],m);const p=d(t,["subjectImageConfig"]);return p!=null&&h(i,["subjectImageConfig"],p),i}function w0(t,e){const i={},s=d(t,["safetyAttributes","categories"]);s!=null&&h(i,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(i,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(i,["contentType"],l),i}function S0(t,e){const i={},s=d(t,["safetyAttributes","categories"]);s!=null&&h(i,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(i,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(i,["contentType"],l),i}function CA(t,e){const i={},s=d(t,["category"]);if(s!=null&&h(i,["category"],s),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&h(i,["threshold"],r),i}function xA(t,e){const i={},s=d(t,["image"]);return s!=null&&h(i,["image"],yn(s)),i}function RA(t,e,i){const s={},r=d(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const c=d(t,["confidenceThreshold"]);e!==void 0&&c!=null&&h(e,["parameters","confidenceThreshold"],c);const f=d(t,["maskDilation"]);e!==void 0&&f!=null&&h(e,["parameters","maskDilation"],f);const m=d(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&h(e,["parameters","binaryColorThreshold"],m);const p=d(t,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),s}function NA(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["source"]);l!=null&&kA(l,s);const c=d(e,["config"]);return c!=null&&RA(c,s),s}function IA(t,e){const i={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>tA(l))),h(i,["generatedMasks"],r)}return i}function kA(t,e,i){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],yn(l));const c=d(t,["scribbleImage"]);return e!==void 0&&c!=null&&h(e,["instances[0]","scribble"],xA(c)),s}function MA(t,e){const i={},s=d(t,["retrievalConfig"]);s!=null&&h(i,["retrievalConfig"],s);const r=d(t,["functionCallingConfig"]);return r!=null&&h(i,["functionCallingConfig"],Pb(r)),i}function DA(t,e){const i={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["computerUse"]);s!=null&&h(i,["computerUse"],s);const r=d(t,["fileSearch"]);r!=null&&h(i,["fileSearch"],r);const l=d(t,["codeExecution"]);if(l!=null&&h(i,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=d(t,["functionDeclarations"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(_=>_)),h(i,["functionDeclarations"],w)}const f=d(t,["googleMaps"]);f!=null&&h(i,["googleMaps"],aA(f));const m=d(t,["googleSearch"]);m!=null&&h(i,["googleSearch"],lA(m));const p=d(t,["googleSearchRetrieval"]);p!=null&&h(i,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&h(i,["urlContext"],v),i}function T0(t,e){const i={},s=d(t,["retrieval"]);s!=null&&h(i,["retrieval"],s);const r=d(t,["computerUse"]);if(r!=null&&h(i,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(i,["codeExecution"],l);const c=d(t,["enterpriseWebSearch"]);c!=null&&h(i,["enterpriseWebSearch"],c);const f=d(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>Lb(E))),h(i,["functionDeclarations"],_)}const m=d(t,["googleMaps"]);m!=null&&h(i,["googleMaps"],m);const p=d(t,["googleSearch"]);p!=null&&h(i,["googleSearch"],p);const v=d(t,["googleSearchRetrieval"]);v!=null&&h(i,["googleSearchRetrieval"],v);const w=d(t,["urlContext"]);return w!=null&&h(i,["urlContext"],w),i}function PA(t,e){const i={},s=d(t,["baseModel"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&h(i,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(i,["updateTime"],l),i}function LA(t,e){const i={},s=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&h(i,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(i,["updateTime"],l),i}function UA(t,e,i){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const c=d(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&h(e,["defaultCheckpointId"],c),s}function OA(t,e,i){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const c=d(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&h(e,["defaultCheckpointId"],c),s}function GA(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","name"],Le(t,r));const l=d(e,["config"]);return l!=null&&UA(l,s),s}function BA(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["config"]);return l!=null&&OA(l,s),s}function qA(t,e,i){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const c=d(t,["personGeneration"]);e!==void 0&&c!=null&&h(e,["parameters","personGeneration"],c);const f=d(t,["includeRaiReason"]);e!==void 0&&f!=null&&h(e,["parameters","includeRaiReason"],f);const m=d(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const v=d(t,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const w=d(t,["imagePreservationFactor"]);e!==void 0&&w!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],w);const _=d(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&h(e,["parameters","sampleCount"],E);const A=d(t,["mode"]);return e!==void 0&&A!=null&&h(e,["parameters","mode"],A),s}function VA(t,e,i){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],Le(t,r));const l=d(e,["image"]);l!=null&&h(s,["instances[0]","image"],yn(l));const c=d(e,["upscaleFactor"]);c!=null&&h(s,["parameters","upscaleConfig","upscaleFactor"],c);const f=d(e,["config"]);return f!=null&&qA(f,s),s}function HA(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>dl(c))),h(i,["generatedImages"],l)}return i}function zA(t,e){const i={},s=d(t,["uri"]);s!=null&&h(i,["uri"],s);const r=d(t,["encodedVideo"]);r!=null&&h(i,["videoBytes"],bi(r));const l=d(t,["encoding"]);return l!=null&&h(i,["mimeType"],l),i}function $A(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&h(i,["uri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(i,["videoBytes"],bi(r));const l=d(t,["mimeType"]);return l!=null&&h(i,["mimeType"],l),i}function FA(t,e){const i={},s=d(t,["image"]);s!=null&&h(i,["_self"],yn(s));const r=d(t,["maskMode"]);return r!=null&&h(i,["maskMode"],r),i}function JA(t,e){const i={},s=d(t,["image"]);s!=null&&h(i,["image"],fl(s));const r=d(t,["referenceType"]);return r!=null&&h(i,["referenceType"],r),i}function jA(t,e){const i={},s=d(t,["image"]);s!=null&&h(i,["image"],yn(s));const r=d(t,["referenceType"]);return r!=null&&h(i,["referenceType"],r),i}function E0(t,e){const i={},s=d(t,["uri"]);s!=null&&h(i,["uri"],s);const r=d(t,["videoBytes"]);r!=null&&h(i,["encodedVideo"],bi(r));const l=d(t,["mimeType"]);return l!=null&&h(i,["encoding"],l),i}function b0(t,e){const i={},s=d(t,["uri"]);s!=null&&h(i,["gcsUri"],s);const r=d(t,["videoBytes"]);r!=null&&h(i,["bytesBase64Encoded"],bi(r));const l=d(t,["mimeType"]);return l!=null&&h(i,["mimeType"],l),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KA(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),i}function YA(t){const e={},i=d(t,["config"]);return i!=null&&KA(i,e),e}function WA(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),i}function XA(t){const e={},i=d(t,["name"]);i!=null&&h(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&WA(s,e),e}function QA(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function ZA(t,e){const i={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),i}function eC(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],nC(c)),e}function tC(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const s=d(t,["fileName"]);s!=null&&h(e,["fileName"],s);const r=d(t,["config"]);return r!=null&&ZA(r,e),e}function nC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function iC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function oC(t){const e={},i=d(t,["config"]);return i!=null&&iC(i,e),e}function sC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function A0(t,e){const i={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),i}function rC(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const s=d(t,["config"]);return s!=null&&A0(s,e),e}function aC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lC="Content-Type",uC="X-Server-Timeout",cC="User-Agent",rd="x-goog-api-client",dC="1.41.0",fC=`google-genai-sdk/${dC}`,hC="v1beta1",pC="v1beta",mC=5,gC=[408,429,500,502,503,504];class yC{constructor(e){var i,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:hC}else{if(!this.clientOptions.apiKey)throw new hr({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:pC,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const r=[this.getRequestUrlInternal(i)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===ed.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),r=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),r=this.constructUrl(e.path,i,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&vC(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await py(r),new td(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await py(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return mn(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield ge(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const w=l.decode(v,{stream:!0});try{const A=JSON.parse(w);if("error"in A){const C=JSON.parse(JSON.stringify(A.error)),x=C.status,N=C.code,M=`got status: ${x}. ${JSON.stringify(A)}`;if(N>=400&&N<600)throw new hr({message:M,status:N})}}catch(A){if(A.name==="ApiError")throw A}c+=w;let _=-1,E=0;for(;;){_=-1,E=0;for(const x of m){const N=c.indexOf(x);N!==-1&&(_===-1||N<_)&&(_=N,E=x.length)}if(_===-1)break;const A=c.substring(0,_);c=c.substring(_+E);const C=A.trim();if(C.startsWith(f)){const x=C.substring(f.length).trim();try{const N=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new td(N))}catch(N){throw new Error(`exception parsing stream chunk ${x}. ${N}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,i){var s;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,i);const r=this.clientOptions.httpOptions.retryOptions;return aS(async()=>{const c=await fetch(e,i);if(c.ok)return c;throw gC.includes(c.status)?new Error(`Retryable HTTP Error: ${c.statusText}`):new i0(`Non-retryable exception ${c.statusText} sending request`)},{retries:((s=r.attempts)!==null&&s!==void 0?s:mC)-1})}getDefaultHeaders(){const e={},i=fC+" "+this.clientOptions.userAgentExtra;return e[cC]=i,e[rd]=i,e[lC]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(uC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),v=Z("upload/v1beta/files",m._url),w=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,m,i==null?void 0:i.httpOptions);return l.upload(e,w,this)}async uploadFileToFileSearchStore(e,i,s){var r;const l=this.clientOptions.uploader,c=await l.stat(i),f=String(c.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),w={};s!=null&&A0(s,w);const _=await this.fetchUploadUrl(p,f,m,v,w,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(i,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,r,l,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function py(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw i>=400&&i<600?new hr({message:r,status:i}):new Error(r)}}function vC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=s(i,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _C="mcp_used/unknown";let wC=!1;function C0(t){for(const e of t)if(SC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return wC}function x0(t){var e;const i=(e=t[rd])!==null&&e!==void 0?e:"";t[rd]=(i+` ${_C}`).trimStart()}function SC(t){return t!==null&&typeof t=="object"&&t instanceof Dd}function TC(t){return mn(this,arguments,function*(i,s=100){let r,l=0;for(;l<s;){const c=yield ge(i.listTools({cursor:r}));for(const f of c.tools)yield yield ge(f),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class Dd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Dd(e,i)}async initialize(){var e,i,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,m=(i=void 0,gn(TC(v))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const w=r;c.push(w);const _=w.name;if(l[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);l[_]=v}}catch(w){i={error:w}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),YS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EC(t,e,i){const s=new VS;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(s,r),e(s)}class bC{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=xC(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(I=>{p=I}),w=e.callbacks,_=function(){p({})},E=this.apiClient,A={onopen:_,onmessage:I=>{EC(E,w.onmessage,I)},onerror:(i=w==null?void 0:w.onerror)!==null&&i!==void 0?i:function(I){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function(I){}},C=this.webSocketFactory.create(m,CC(c),A);C.connect(),await v;const M={setup:{model:Le(this.apiClient,e.model)}};return C.send(JSON.stringify(M)),new AC(C,this.apiClient)}}class AC{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=KE(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=jE(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Qo.PLAY)}pause(){this.sendPlaybackControl(Qo.PAUSE)}stop(){this.sendPlaybackControl(Qo.STOP)}resetContext(){this.sendPlaybackControl(Qo.RESET_CONTEXT)}close(){this.conn.close()}}function CC(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function xC(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function NC(t,e,i){const s=new qS;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=XE(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class IC{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new bC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,r,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&C0(e.config.tools)&&x0(w);const _=PC(w);if(this.apiClient.isVertexAI()){const Y=this.apiClient.getProject(),pe=this.apiClient.getLocation(),be=this.apiClient.getApiKey(),xe=!!Y&&!!pe||!!be;this.apiClient.getCustomBaseUrl()&&!xe?v=m:(v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,v))}else{const Y=this.apiClient.getApiKey();let pe="BidiGenerateContent",be="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),pe="BidiGenerateContentConstrained",be="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${pe}?${be}=${Y}`}let E=()=>{};const A=new Promise(Y=>{E=Y}),C=e.callbacks,x=function(){var Y;(Y=C==null?void 0:C.onopen)===null||Y===void 0||Y.call(C),E({})},N=this.apiClient,M={onopen:x,onmessage:Y=>{NC(N,C.onmessage,Y)},onerror:(i=C==null?void 0:C.onerror)!==null&&i!==void 0?i:function(Y){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(Y){}},I=this.webSocketFactory.create(v,DC(_),M);I.connect(),await A;let L=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const Y=this.apiClient.getProject(),pe=this.apiClient.getLocation();Y&&pe&&(L=`projects/${Y}/locations/${pe}/`+L)}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tl.AUDIO]}:e.config.responseModalities=[tl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],$=[];for(const Y of G)if(this.isCallableTool(Y)){const pe=Y;$.push(await pe.tool())}else $.push(Y);$.length>0&&(e.config.tools=$);const se={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=JE(this.apiClient,se):K=FE(this.apiClient,se),delete K.config,I.send(JSON.stringify(K)),new MC(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const kC={turnComplete:!0};class MC{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=an(i.turns),e.isVertexAI()||(s=s.map(r=>cl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(RC)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},kC),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:WE(e)}:i={realtimeInput:YE(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function DC(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function PC(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const my=10;function gy(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(ns(c)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ns(t){return"callTool"in t&&typeof t.callTool=="function"}function LC(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>ns(r)))!==null&&s!==void 0?s:!1}function yy(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(ns(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function vy(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UC extends Fn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,r,l,c,f;const m=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!LC(i)||gy(i.config))return await this.generateContentInternal(m);const p=yy(i);if(p.length>0){const C=p.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let v,w;const _=an(m.contents),E=(l=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:my;let A=0;for(;A<E&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const C=v.candidates[0].content,x=[];for(const N of(f=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(ns(N)){const I=await N.callTool(v.functionCalls);x.push(...I)}A++,w={role:"user",parts:x},m.contents=an(m.contents),m.contents.push(C),m.contents.push(w),vy(m.config)&&(_.push(C),_.push(w))}return vy(m.config)&&(v.automaticFunctionCallingHistory=_),v},this.generateContentStream=async i=>{var s,r,l,c,f;if(this.maybeMoveToResponseJsonSchem(i),gy(i.config)){const w=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(w)}const m=yy(i);if(m.length>0){const w=m.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${w}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(f=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Zi($n.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var s,r,l,c,f,m;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((m=(f=i.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>ns(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&C0(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),x0(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var i,s,r;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(ns(c)){const f=c,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var i,s,r;const l=(r=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:my;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,v,w){return mn(this,arguments,function*(){for(var _,E,A,C,x,N;f<l;){c&&(f++,c=!1);const K=yield ge(p.processParamsMaybeAddMcpUsage(w)),G=yield ge(p.generateContentStreamInternal(K)),$=[],se=[];try{for(var M=!0,I=(E=void 0,gn(G)),L;L=yield ge(I.next()),_=L.done,!_;M=!0){C=L.value,M=!1;const Y=C;if(yield yield ge(Y),Y.candidates&&(!((x=Y.candidates[0])===null||x===void 0)&&x.content)){se.push(Y.candidates[0].content);for(const pe of(N=Y.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<l&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(pe.functionCall.name)){const be=yield ge(v.get(pe.functionCall.name).callTool([pe.functionCall]));$.push(...be)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(Y){E={error:Y}}finally{try{!M&&!_&&(A=I.return)&&(yield ge(A.call(I)))}finally{if(E)throw E.error}}if($.length>0){c=!0;const Y=new rr;Y.candidates=[{content:{role:"user",parts:$}}],yield yield ge(Y);const pe=[];pe.push(...se),pe.push({role:"user",parts:$});const be=an(w.contents).concat(pe);w.contents=be}else break}})})(this,m,e)}async generateContentInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=dy(this.apiClient,e);return f=Z("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=hy(v),_=new rr;return Object.assign(_,w),_})}else{const p=cy(this.apiClient,e);return f=Z("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=fy(v),_=new rr;return Object.assign(_,w),_})}}async generateContentStreamInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=dy(this.apiClient,e);return f=Z("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(w){return mn(this,arguments,function*(){var _,E,A,C;try{for(var x=!0,N=gn(w),M;M=yield ge(N.next()),_=M.done,!_;x=!0){C=M.value,x=!1;const I=C,L=hy(yield ge(I.json()),e);L.sdkHttpResponse={headers:I.headers};const K=new rr;Object.assign(K,L),yield yield ge(K)}}catch(I){E={error:I}}finally{try{!x&&!_&&(A=N.return)&&(yield ge(A.call(N)))}finally{if(E)throw E.error}}})})}else{const p=cy(this.apiClient,e);return f=Z("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(w){return mn(this,arguments,function*(){var _,E,A,C;try{for(var x=!0,N=gn(w),M;M=yield ge(N.next()),_=M.done,!_;x=!0){C=M.value,x=!1;const I=C,L=fy(yield ge(I.json()),e);L.sdkHttpResponse={headers:I.headers};const K=new rr;Object.assign(K,L),yield yield ge(K)}}catch(I){E={error:I}}finally{try{!x&&!_&&(A=N.return)&&(yield ge(A.call(N)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Rb(this.apiClient,e);return f=Z("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Ib(v),_=new jg;return Object.assign(_,w),_})}else{const p=xb(this.apiClient,e);return f=Z("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Nb(v),_=new jg;return Object.assign(_,w),_})}}async generateImagesInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Vb(this.apiClient,e);return f=Z("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=zb(v),_=new Kg;return Object.assign(_,w),_})}else{const p=qb(this.apiClient,e);return f=Z("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Hb(v),_=new Kg;return Object.assign(_,w),_})}}async editImageInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=Eb(this.apiClient,e);return l=Z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=bb(m),v=new RS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=VA(this.apiClient,e);return l=Z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=HA(m),v=new NS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=TA(this.apiClient,e);return l=Z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=EA(m),v=new IS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=NA(this.apiClient,e);return l=Z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=IA(m),v=new kS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=rA(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>sd(v))}else{const p=sA(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>od(v))}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=mA(this.apiClient,e);return f=Z("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=yA(v),_=new Yg;return Object.assign(_,w),_})}else{const p=pA(this.apiClient,e);return f=Z("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=gA(v),_=new Yg;return Object.assign(_,w),_})}}async update(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=BA(this.apiClient,e);return f=Z("{model}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>sd(v))}else{const p=GA(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>od(v))}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=_b(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Sb(v),_=new Wg;return Object.assign(_,w),_})}else{const p=vb(this.apiClient,e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=wb(v),_=new Wg;return Object.assign(_,w),_})}}async countTokens(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=mb(this.apiClient,e);return f=Z("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=yb(v),_=new Xg;return Object.assign(_,w),_})}else{const p=pb(this.apiClient,e);return f=Z("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=gb(v),_=new Xg;return Object.assign(_,w),_})}}async computeTokens(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=ab(this.apiClient,e);return l=Z("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=lb(m),v=new MS;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Yb(this.apiClient,e);return f=Z("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const w=jb(v),_=new nl;return Object.assign(_,w),_})}else{const p=Kb(this.apiClient,e);return f=Z("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const w=Jb(v),_=new nl;return Object.assign(_,w),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OC extends Fn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=TS(e);return f=Z("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=SS(e);return f=Z("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=pS(e);return l=Z("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GC(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function BC(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>KC(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function qC(t,e,i){const s={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&h(i,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&h(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&h(i,["uses"],c);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&h(i,["bidiGenerateContentSetup"],jC(t,f));const m=d(e,["lockAdditionalFields"]);return i!==void 0&&m!=null&&h(i,["fieldMask"],m),s}function VC(t,e){const i={},s=d(e,["config"]);return s!=null&&h(i,["config"],qC(t,s,i)),i}function HC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function zC(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $C(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function FC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function JC(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const w=d(t,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],Md(w));const _=d(t,["thinkingConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","thinkingConfig"],_);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],E);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],BC(At(A)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let G=ss(C);Array.isArray(G)&&(G=G.map($=>WC(os($)))),h(e,["setup","tools"],G)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&h(e,["setup","sessionResumption"],YC(x));const N=d(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","inputAudioTranscription"],N);const M=d(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","outputAudioTranscription"],M);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const L=d(t,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],L);const K=d(t,["proactivity"]);if(e!==void 0&&K!=null&&h(e,["setup","proactivity"],K),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function jC(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Le(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],JC(r,i)),i}function KC(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],HC(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],zC(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],GC(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const w=d(t,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const _=d(t,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function YC(t){const e={},i=d(t,["handle"]);if(i!=null&&h(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WC(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),h(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],$C(c));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],FC(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XC(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function QC(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=XC(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class ZC extends Fn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=VC(this.apiClient,e);l=Z("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=QC(f,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ex(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),i}function tx(t){const e={},i=d(t,["name"]);i!=null&&h(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&ex(s,e),e}function nx(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function ix(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function ox(t){const e={},i=d(t,["parent"]);i!=null&&h(e,["_url","parent"],i);const s=d(t,["config"]);return s!=null&&ix(s,e),e}function sx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rx extends Fn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Zi($n.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nx(e);return l=Z("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=tx(e);r=Z("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ox(e);return l=Z("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=sx(m),v=new DS;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ax extends Fn{constructor(e,i=new rx(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new Zi($n.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YA(e);return l=Z("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=QA(e);return l=Z("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XA(e);r=Z("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oC(e);return l=Z("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=sC(m),v=new PS;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rC(e);return l=Z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=aC(m),v=new LS;return Object.assign(v,p),v})}}async importFile(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tC(e);return l=Z("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=eC(m),v=new xd;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let R0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return R0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const lx=()=>R0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ad(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ld=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ln extends Error{}class It extends ln{constructor(e,i,s,r){super(`${It.makeMessage(e,i,s)}`),this.status=e,this.headers=r,this.error=i}static makeMessage(e,i,s){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,s,r){if(!e||!r)return new hl({message:s,cause:ld(i)});const l=i;return e===400?new I0(e,l,s,r):e===401?new k0(e,l,s,r):e===403?new M0(e,l,s,r):e===404?new D0(e,l,s,r):e===409?new P0(e,l,s,r):e===422?new L0(e,l,s,r):e===429?new U0(e,l,s,r):e>=500?new O0(e,l,s,r):new It(e,l,s,r)}}class ud extends It{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hl extends It{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class N0 extends hl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class I0 extends It{}class k0 extends It{}class M0 extends It{}class D0 extends It{}class P0 extends It{}class L0 extends It{}class U0 extends It{}class O0 extends It{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ux=/^[a-z][a-z0-9+.-]*:/i,cx=t=>ux.test(t);let cd=t=>(cd=Array.isArray,cd(t));const dx=cd;let fx=dx;const _y=fx;function hx(t){if(!t)return!0;for(const e in t)return!1;return!0}function px(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const mx=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ln(`${t} must be an integer`);if(e<0)throw new ln(`${t} must be a positive integer`);return e},gx=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yx=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ko="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const _x=()=>{var t,e,i,s,r;const l=vx();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":Sy(Deno.build.os),"X-Stainless-Arch":wy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":Sy((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":wy((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=wx();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wx(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const wy=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Sy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ba;const Sx=()=>Ba??(Ba=_x());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function G0(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Ex(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return G0({start(){},async pull(i){const{done:s,value:r}=await e.next();s?i.close():i.enqueue(r)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function B0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bx(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ax=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q0=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function qc(t,e,i){return q0(),new File(t,e??"unknown_file",i)}function Cx(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const xx=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V0=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Rx=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&V0(t),Nx=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Ix(t,e,i){if(q0(),t=await t,Rx(t))return t instanceof File?t:qc([await t.arrayBuffer()],t.name);if(Nx(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),qc(await dd(r),e,i)}const s=await dd(t);if(e||(e=Cx(t)),!(i!=null&&i.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(i=Object.assign(Object.assign({},i),{type:r}))}return qc(s,e,i)}async function dd(t){var e,i,s,r,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(V0(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(xx(t))try{for(var f=!0,m=gn(t),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const v=r;c.push(...await dd(v))}}catch(v){i={error:v}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${kx(t)}`)}return c}function kx(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H0{constructor(e){this._client=e}}H0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z0(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ty=Object.freeze(Object.create(null)),Mx=(t=z0)=>(function(i,...s){if(i.length===1)return i[0];let r=!1;const l=[],c=i.reduce((v,w,_)=>{var E,A,C;/[?#]/.test(w)&&(r=!0);const x=s[_];let N=(r?encodeURIComponent:t)(""+x);return _!==s.length&&(x==null||typeof x=="object"&&x.toString===((C=Object.getPrototypeOf((A=Object.getPrototypeOf((E=x.hasOwnProperty)!==null&&E!==void 0?E:Ty))!==null&&A!==void 0?A:Ty))===null||C===void 0?void 0:C.toString))&&(N=x+"",l.push({start:v.length+w.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),v+w+(_===s.length?"":N)},""),f=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,w)=>v.start-w.start),l.length>0){let v=0;const w=l.reduce((_,E)=>{const A=" ".repeat(E.start-v),C="^".repeat(E.length);return v=E.start+E.length,_+A+C},"");throw new ln(`Path parameters result in path with invalid segments:
${l.map(_=>_.error).join(`
`)}
${c}
${w}`)}return c}),qa=Mx(z0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $0 extends H0{create(e,i){var s;const{api_version:r=this._client.apiVersion}=e,l=ol(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qa`/${r}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.delete(qa`/${r}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.post(qa`/${r}/interactions/${e}/cancel`,s)}get(e,i={},s){var r;const l=i??{},{api_version:c=this._client.apiVersion}=l,f=ol(l,["api_version"]);return this._client.get(qa`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=i==null?void 0:i.stream)!==null&&r!==void 0?r:!1}))}}$0._key=Object.freeze(["interactions"]);class F0 extends $0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dx(t){let e=0;for(const r of t)e+=r.length;const i=new Uint8Array(e);let s=0;for(const r of t)i.set(r,s),s+=r.length;return i}let Va;function Pd(t){let e;return(Va??(e=new globalThis.TextEncoder,Va=e.encode.bind(e)))(t)}let Ha;function Ey(t){let e;return(Ha??(e=new globalThis.TextDecoder,Ha=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pl{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pd(e):e;this.buffer=Dx([this.buffer,i]);const s=[];let r;for(;(r=Px(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Ey(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Ey(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}pl.NEWLINE_CHARS=new Set([`
`,"\r"]);pl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Px(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Lx(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sl={off:0,error:200,warn:300,info:400,debug:500},by=(t,e,i)=>{if(t){if(px(sl,t))return t;xt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(sl))}`)}};function ur(){}function za(t,e,i){return!e||sl[t]>sl[i]?ur:e[t].bind(e)}const Ux={error:ur,warn:ur,info:ur,debug:ur};let Ay=new WeakMap;function xt(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return Ux;const r=Ay.get(i);if(r&&r[0]===s)return r[1];const l={error:za("error",i,s),warn:za("warn",i,s),info:za("info",i,s),debug:za("debug",i,s)};return Ay.set(i,[s,l]),l}const ji=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zo{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let r=!1;const l=s?xt(s):console;function c(){return mn(this,arguments,function*(){var m,p,v,w;if(r)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var E=!0,A=gn(Ox(e,i)),C;C=yield ge(A.next()),m=C.done,!m;E=!0){w=C.value,E=!1;const x=w;if(!_)if(x.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield ge(JSON.parse(x.data))}catch(N){throw l.error("Could not parse message into JSON:",x.data),l.error("From chunk:",x.raw),N}}}catch(x){p={error:x}}finally{try{!E&&!m&&(v=A.return)&&(yield ge(v.call(A)))}finally{if(p)throw p.error}}_=!0}catch(x){if(ad(x))return yield ge(void 0);throw x}finally{_||i.abort()}})}return new Zo(c,i,s)}static fromReadableStream(e,i,s){let r=!1;function l(){return mn(this,arguments,function*(){var m,p,v,w;const _=new pl,E=B0(e);try{for(var A=!0,C=gn(E),x;x=yield ge(C.next()),m=x.done,!m;A=!0){w=x.value,A=!1;const N=w;for(const M of _.decode(N))yield yield ge(M)}}catch(N){p={error:N}}finally{try{!A&&!m&&(v=C.return)&&(yield ge(v.call(C)))}finally{if(p)throw p.error}}for(const N of _.flush())yield yield ge(N)})}function c(){return mn(this,arguments,function*(){var m,p,v,w;if(r)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var E=!0,A=gn(l()),C;C=yield ge(A.next()),m=C.done,!m;E=!0){w=C.value,E=!1;const x=w;_||x&&(yield yield ge(JSON.parse(x)))}}catch(x){p={error:x}}finally{try{!E&&!m&&(v=A.return)&&(yield ge(v.call(A)))}finally{if(p)throw p.error}}_=!0}catch(x){if(ad(x))return yield ge(void 0);throw x}finally{_||i.abort()}})}return new Zo(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),i.push(c)}return l.shift()}});return[new Zo(()=>r(e),this.controller,this.client),new Zo(()=>r(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return G0({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await i.next();if(l)return s.close();const c=Pd(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function Ox(t,e){return mn(this,arguments,function*(){var s,r,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ln("Attempted to iterate over a response with no body");const f=new Bx,m=new pl,p=B0(t.body);try{for(var v=!0,w=gn(Gx(p)),_;_=yield ge(w.next()),s=_.done,!s;v=!0){c=_.value,v=!1;const E=c;for(const A of m.decode(E)){const C=f.decode(A);C&&(yield yield ge(C))}}}catch(E){r={error:E}}finally{try{!v&&!s&&(l=w.return)&&(yield ge(l.call(w)))}finally{if(r)throw r.error}}for(const E of m.flush()){const A=f.decode(E);A&&(yield yield ge(A))}})}function Gx(t){return mn(this,arguments,function*(){var i,s,r,l;let c=new Uint8Array;try{for(var f=!0,m=gn(t),p;p=yield ge(m.next()),i=p.done,!i;f=!0){l=p.value,f=!1;const v=l;if(v==null)continue;const w=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Pd(v):v;let _=new Uint8Array(c.length+w.length);_.set(c),_.set(w,c.length),c=_;let E;for(;(E=Lx(c))!==-1;)yield yield ge(c.slice(0,E)),c=c.slice(E)}}catch(v){s={error:v}}finally{try{!f&&!i&&(r=m.return)&&(yield ge(r.call(m)))}finally{if(s)throw s.error}}c.length>0&&(yield yield ge(c))})}class Bx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,r]=qx(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}}function qx(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Vx(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var f;if(e.options.stream)return xt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Zo.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const m=i.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return xt(t).debug(`[${s}] response parsed`,ji({retryOfRequestLogID:r,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld extends Promise{constructor(e,i,s=Vx){super(r=>{r(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ld(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J0=Symbol("brand.privateNullableHeaders");function*Hx(t){if(!t)return;if(J0 in t){const{values:s,nulls:r}=t;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():_y(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=_y(s[1])?s[1]:[s[1]];let c=!1;for(const f of l)f!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,f])}}const ar=t=>{const e=new Headers,i=new Set;for(const s of t){const r=new Set;for(const[l,c]of Hx(s)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),c===null?(e.delete(l),i.add(f)):(e.append(l,c),i.delete(f))}}return{[J0]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vc=t=>{var e,i,s,r,l,c;if(typeof globalThis.process<"u")return(s=(i=(e=lS)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var j0;class ml{constructor(e){var i,s,r,l,c,f,m,{baseURL:p=Vc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Vc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:w="v1beta"}=e,_=ol(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:v,apiVersion:w},_),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:ml.DEFAULT_TIMEOUT,this.logger=(r=E.logger)!==null&&r!==void 0?r:console;const A="warn";this.logLevel=A,this.logLevel=(c=(l=by(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:by(Vc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:A,this.fetchOptions=E.fetchOptions,this.maxRetries=(f=E.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=E.fetch)!==null&&m!==void 0?m:Tx(),this.encoder=Ax,this._options=E,this.apiKey=v,this.apiVersion=w,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=ar([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return ar([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ar([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new ln(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ko}`}defaultIdempotencyKey(){return`stainless-node-retry-${lx()}`}makeStatusError(e,i,s,r){return It.generate(e,i,s,r)}buildURL(e,i,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=cx(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return hx(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:i},r)))}request(e,i=null){return new Ld(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var r,l,c;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;i==null&&(i=m),await this.prepareOptions(f);const{req:p,url:v,timeout:w}=await this.buildRequest(f,{retryCount:m-i});await this.prepareRequest(p,{url:v,options:f});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,A=Date.now();if(xt(this).debug(`[${_}] sending request`,ji({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:p.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new ud;const C=new AbortController,x=await this.fetchWithTimeout(v,p,w,C).catch(ld),N=Date.now();if(x instanceof globalThis.Error){const I=`retrying, ${i} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new ud;const L=ad(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(i)return xt(this).info(`[${_}] connection ${L?"timed out":"failed"} - ${I}`),xt(this).debug(`[${_}] connection ${L?"timed out":"failed"} (${I})`,ji({retryOfRequestLogID:s,url:v,durationMs:N-A,message:x.message})),this.retryRequest(f,i,s??_);throw xt(this).info(`[${_}] connection ${L?"timed out":"failed"} - error; no more retries left`),xt(this).debug(`[${_}] connection ${L?"timed out":"failed"} (error; no more retries left)`,ji({retryOfRequestLogID:s,url:v,durationMs:N-A,message:x.message})),L?new N0:new hl({cause:x})}const M=`[${_}${E}] ${p.method} ${v} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${N-A}ms`;if(!x.ok){const I=await this.shouldRetry(x);if(i&&I){const Y=`retrying, ${i} attempts remaining`;return await bx(x.body),xt(this).info(`${M} - ${Y}`),xt(this).debug(`[${_}] response error (${Y})`,ji({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:N-A})),this.retryRequest(f,i,s??_,x.headers)}const L=I?"error; no more retries left":"error; not retryable";xt(this).info(`${M} - ${L}`);const K=await x.text().catch(Y=>ld(Y).message),G=gx(K),$=G?void 0:K;throw xt(this).debug(`[${_}] response error (${L})`,ji({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,message:$,durationMs:Date.now()-A})),this.makeStatusError(x.status,G,$,x.headers)}return xt(this).info(M),xt(this).debug(`[${_}] response start`,ji({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:N-A})),{response:x,options:f,controller:C,requestLogID:_,retryOfRequestLogID:s,startTime:A}}async fetchWithTimeout(e,i,s,r){const l=i||{},{signal:c,method:f}=l,m=ol(l,["signal","method"]),p=this._makeAbort(r);c&&c.addEventListener("abort",p,{once:!0});const v=setTimeout(p,s),w=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},w?{duplex:"half"}:{}),{method:"GET"}),m);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,r){var l;let c;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(c=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!c){const p=parseFloat(m);Number.isNaN(p)?c=Date.parse(m)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,p)}return await yx(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,r,l;const c=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:v}=c,w=this.buildURL(m,p,v);"timeout"in c&&mx("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:_,body:E}=this.buildBody({options:c}),A=await this.buildHeaders({options:e,method:f,bodyHeaders:_,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:A},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:w,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=ar([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Sx()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(f),f.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ar([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ex(e)}:this.encoder({body:e,headers:s})}}ml.DEFAULT_TIMEOUT=6e4;class ht extends ml{constructor(){super(...arguments),this.interactions=new F0(this)}}j0=ht;ht.GeminiNextGenAPIClient=j0;ht.GeminiNextGenAPIClientError=ln;ht.APIError=It;ht.APIConnectionError=hl;ht.APIConnectionTimeoutError=N0;ht.APIUserAbortError=ud;ht.NotFoundError=D0;ht.ConflictError=P0;ht.RateLimitError=U0;ht.BadRequestError=I0;ht.AuthenticationError=k0;ht.InternalServerError=O0;ht.PermissionDeniedError=M0;ht.UnprocessableEntityError=L0;ht.toFile=Ix;ht.Interactions=F0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zx(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function $x(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function Fx(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function Jx(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function jx(t,e,i){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(t,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(d(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return s}function Kx(t,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec"],Hc(G))}else if(r==="PREFERENCE_TUNING"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&h(e,["preferenceOptimizationSpec"],Hc(G))}else if(r==="DISTILLATION"){const G=d(t,["validationDataset"]);e!==void 0&&G!=null&&h(e,["distillationSpec"],Hc(G))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],G)}else if(f==="PREFERENCE_TUNING"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],G)}else if(f==="DISTILLATION"){const G=d(t,["epochCount"]);e!==void 0&&G!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],G)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],G)}else if(m==="PREFERENCE_TUNING"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],G)}else if(m==="DISTILLATION"){const G=d(t,["learningRateMultiplier"]);e!==void 0&&G!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],G)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],G)}else if(p==="PREFERENCE_TUNING"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],G)}else if(p==="DISTILLATION"){const G=d(t,["exportLastCheckpointOnly"]);e!==void 0&&G!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],G)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],G)}else if(v==="PREFERENCE_TUNING"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],G)}else if(v==="DISTILLATION"){const G=d(t,["adapterSize"]);e!==void 0&&G!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],G)}let w=d(i,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const G=d(t,["tuningMode"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","tuningMode"],G)}const _=d(t,["customBaseModel"]);e!==void 0&&_!=null&&h(e,["customBaseModel"],_);let E=d(i,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const G=d(t,["batchSize"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],G)}let A=d(i,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const G=d(t,["learningRate"]);e!==void 0&&G!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],G)}const C=d(t,["labels"]);e!==void 0&&C!=null&&h(e,["labels"],C);const x=d(t,["beta"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],x);const N=d(t,["baseTeacherModel"]);e!==void 0&&N!=null&&h(e,["distillationSpec","baseTeacherModel"],N);const M=d(t,["tunedTeacherModelSource"]);e!==void 0&&M!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],M);const I=d(t,["sftLossWeightMultiplier"]);e!==void 0&&I!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const L=d(t,["outputUri"]);e!==void 0&&L!=null&&h(e,["outputUri"],L);const K=d(t,["encryptionSpec"]);return e!==void 0&&K!=null&&h(e,["encryptionSpec"],K),s}function Yx(t,e){const i={},s=d(t,["baseModel"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&rR(l);const c=d(t,["config"]);return c!=null&&jx(c,i),i}function Wx(t,e){const i={},s=d(t,["baseModel"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&aR(l,i,e);const c=d(t,["config"]);return c!=null&&Kx(c,i,e),i}function Xx(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function Qx(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function Zx(t,e,i){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function eR(t,e,i){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function tR(t,e){const i={},s=d(t,["config"]);return s!=null&&Zx(s,i),i}function nR(t,e){const i={},s=d(t,["config"]);return s!=null&&eR(s,i),i}function iR(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>K0(f))),h(i,["tuningJobs"],c)}return i}function oR(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>fd(f))),h(i,["tuningJobs"],c)}return i}function sR(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["model"],s);const r=d(t,["name"]);return r!=null&&h(i,["endpoint"],r),i}function rR(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(i,["examples","examples"],r)}return i}function aR(t,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(r==="DISTILLATION"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["distillationSpec","promptDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(l==="DISTILLATION"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["distillationSpec","promptDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function K0(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["state"]);l!=null&&h(i,["state"],c0(l));const c=d(t,["createTime"]);c!=null&&h(i,["createTime"],c);const f=d(t,["tuningTask","startTime"]);f!=null&&h(i,["startTime"],f);const m=d(t,["tuningTask","completeTime"]);m!=null&&h(i,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(i,["updateTime"],p);const v=d(t,["description"]);v!=null&&h(i,["description"],v);const w=d(t,["baseModel"]);w!=null&&h(i,["baseModel"],w);const _=d(t,["_self"]);return _!=null&&h(i,["tunedModel"],sR(_)),i}function fd(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["state"]);l!=null&&h(i,["state"],c0(l));const c=d(t,["createTime"]);c!=null&&h(i,["createTime"],c);const f=d(t,["startTime"]);f!=null&&h(i,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(i,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(i,["updateTime"],p);const v=d(t,["error"]);v!=null&&h(i,["error"],v);const w=d(t,["description"]);w!=null&&h(i,["description"],w);const _=d(t,["baseModel"]);_!=null&&h(i,["baseModel"],_);const E=d(t,["tunedModel"]);E!=null&&h(i,["tunedModel"],E);const A=d(t,["preTunedModel"]);A!=null&&h(i,["preTunedModel"],A);const C=d(t,["supervisedTuningSpec"]);C!=null&&h(i,["supervisedTuningSpec"],C);const x=d(t,["preferenceOptimizationSpec"]);x!=null&&h(i,["preferenceOptimizationSpec"],x);const N=d(t,["distillationSpec"]);N!=null&&h(i,["distillationSpec"],N);const M=d(t,["tuningDataStats"]);M!=null&&h(i,["tuningDataStats"],M);const I=d(t,["encryptionSpec"]);I!=null&&h(i,["encryptionSpec"],I);const L=d(t,["partnerModelTuningSpec"]);L!=null&&h(i,["partnerModelTuningSpec"],L);const K=d(t,["customBaseModel"]);K!=null&&h(i,["customBaseModel"],K);const G=d(t,["experiment"]);G!=null&&h(i,["experiment"],G);const $=d(t,["labels"]);$!=null&&h(i,["labels"],$);const se=d(t,["outputUri"]);se!=null&&h(i,["outputUri"],se);const Y=d(t,["pipelineJob"]);Y!=null&&h(i,["pipelineJob"],Y);const pe=d(t,["serviceAccount"]);pe!=null&&h(i,["serviceAccount"],pe);const be=d(t,["tunedModelDisplayName"]);be!=null&&h(i,["tunedModelDisplayName"],be);const xe=d(t,["veoTuningSpec"]);return xe!=null&&h(i,["veoTuningSpec"],xe),i}function lR(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["metadata"]);l!=null&&h(i,["metadata"],l);const c=d(t,["done"]);c!=null&&h(i,["done"],c);const f=d(t,["error"]);return f!=null&&h(i,["error"],f),i}function Hc(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&h(i,["validationDatasetUri"],s);const r=d(t,["vertexDatasetResource"]);return r!=null&&h(i,["validationDatasetUri"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uR extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Zi($n.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Zc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Qx(e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>fd(v))}else{const p=Xx(e);return f=Z("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>K0(v))}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=nR(e);return f=Z("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=oR(v),_=new Qg;return Object.assign(_,w),_})}else{const p=tR(e);return f=Z("tunedModels",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=iR(v),_=new Qg;return Object.assign(_,w),_})}}async cancel(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=$x(e);return f=Z("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Jx(v),_=new Zg;return Object.assign(_,w),_})}else{const p=zx(e);return f=Z("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const _=w;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const w=Fx(v),_=new Zg;return Object.assign(_,w),_})}}async tuneInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=Wx(e,e);return l=Z("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>fd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yx(e);return l=Z("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>lR(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cR{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dR=1024*1024*8,fR=3,hR=1e3,pR=2,rl="x-goog-upload-status";async function mR(t,e,i){var s;const r=await Y0(t,e,i),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[rl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function gR(t,e,i){var s;const r=await Y0(t,e,i),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[rl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=o0(l),f=new Rd;return Object.assign(f,c),f}async function Y0(t,e,i){var s,r;let l=0,c=0,f=new td(new Response),m="upload";for(l=t.size;c<l;){const p=Math.min(dR,l-c),v=t.slice(c,c+p);c+p>=l&&(m+=", finalize");let w=0,_=hR;for(;w<fR&&(f=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[rl]));)w++,await vR(_),_=_*pR;if(c+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[rl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function yR(t){return{size:t.size,type:t.type}}function vR(t){return new Promise(e=>setTimeout(e,t))}class _R{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mR(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gR(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR{create(e,i,s){return new SR(e,i,s)}}class SR{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cy="x-goog-api-key";class TR{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Cy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Cy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ER="gl-node/";class Ud{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const i=this.httpOptions;i!=null&&i.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:i==null?void 0:i.timeout,maxRetries:(e=i==null?void 0:i.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=s.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=fS(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new TR(this.apiKey);this.apiClient=new yC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ER+"web",uploader:new _R,downloader:new cR}),this.models=new UC(this.apiClient),this.live=new IC(this.apiClient,r,new wR),this.batches=new HT(this.apiClient),this.chats=new EE(this.models,this.apiClient),this.caches=new wE(this.apiClient),this.files=new LE(this.apiClient),this.operations=new OC(this.apiClient),this.authTokens=new ZC(this.apiClient),this.tunings=new uR(this.apiClient),this.fileSearchStores=new ax(this.apiClient)}}let Et=null;try{const t="AIzaSyA8-DNkA07rH389oSTMllPBUOAaUlD3NqY";t&&(Et=new Ud({apiKey:t}))}catch(t){console.error("Failed to initialize GoogleGenAI instance:",t)}const Nt=(t,e,i,s,r,l)=>({ko:{comprehensiveReading:` ${e} ${i} ${s}     .  JSON     .

 :
1.  **passage**: ${e} ${i}-${s}   (  ,    ).
2.  **meditationGuide**:     ('**'  ,    . :  ,   ,  ,  ).
3.  **context**:  ,   ( 100  ).
4.  **intention**:     ( ,  ,    3-4  ).
5.  **imagePrompt**: '${e}'       . ,  ,     , ,         . (: '         .    .')`,comprehensiveReadingSchema:{passage:{type:Se.STRING,description:"  .    ."},meditationGuide:{type:Se.STRING,description:" . '**'      ."},context:{type:Se.STRING,description:",   ."},intention:{type:Se.STRING,description:"    ."},imagePrompt:{type:Se.STRING,description:"       ."}},evangelismTips:`   .      ,               .   .

       :
    1.  **   **:       ?
    2.  **  **:      ? (:   )
    3.  ** **:    .

     :
    ${r}`,evangelismTipsError:"   .     .",imageFallback:"   .       .",recommendMusic:"     .       ,     (CCM  ) 3~5  .       .",recommendMusicContextPrefix:`
[ ]
${l}`,recommendMusicSchema:{songs:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{title:{type:Se.STRING,description:" "},artist:{type:Se.STRING,description:"  ,  ''"}},required:["title","artist"]}}},prayerGuide:`      .    ,       A.C.T.S.( Adoration,  Confession,  Thanksgiving,  Supplication)     .    ,           .   .

     :
    ** (Adoration)**:
             .

    ** (Confession)**:
               .

    ** (Thanksgiving)**:
                 .

    ** (Supplication)**:
        ,  ,   2-3    .

     :
    ${r}`,prayerGuideError:"  .     .",sermonOutline:`       .    ,       .   .

  :
1.  ** **:     
2.  ** **:        
3.  ****:   ,    ,   .
4.  ** (3 )**:
    *     : ( )
    *     : ( )
    *     : ( )
5.  ****:   ,            .

 :
${r}`,sermonOutlineError:"   .     .",storyKeywords:`       1~3        .   2~4  .
1. **positive**:   , , ,       . ()
2. **sin**: , , , ,           . ()
3. **hope**: , , , ,        . ()

 :
${r}`,storyKeywordsSchema:{positive:{type:Se.ARRAY,items:{type:Se.STRING},description:"   "},sin:{type:Se.ARRAY,items:{type:Se.STRING},description:"     "},hope:{type:Se.ARRAY,items:{type:Se.STRING},description:"    "}},explainSelection:` 100         .      ,          .    ,    .

[  ]
${l}

[  ]
${r}`,explainSelectionError:"   .     .",placeInfoQuery:(f,m)=>` ${m}   '${f}'   .    ,  ,    (   )  .     .`,journeyMapPrompt:(f,m)=>` ${f}            .  ${m.join(", ")}     ,        .   ,   , 1      .`},en:{comprehensiveReading:`Please generate comprehensive meditation material for ${e} chapters ${i} to ${s}. The response must follow this JSON schema.

Request Details:
1.  **passage**: The full text of ${e} ${i}-${s} (in a modern English translation, with verse numbers).
2.  **meditationGuide**: A meditation guide based on the passage (use '**' to separate titles, and newlines for each item. Format: Core Message, Questions for Me, Today's Application, Closing Prayer).
3.  **context**: The historical and cultural background of the passage (around 100 words).
4.  **intention**: The core intention behind the passage (explain the author's purpose, theological message, and expected change in 3-4 paragraphs).
5.  **imagePrompt**: A safe image prompt that symbolically represents the core theme of '${e}'. The prompt should be for a realistic oil painting style, using only objects, nature, and light, excluding people, religious figures, or conflict elements. (e.g., 'Bright light streams from a window onto a broken chain lying on a stone floor, symbolizing freedom and a new beginning.')`,comprehensiveReadingSchema:{passage:{type:Se.STRING,description:"The full Bible passage. Each verse should be separated by a newline."},meditationGuide:{type:Se.STRING,description:"Meditation guide. Use '**' for titles and newlines for items."},context:{type:Se.STRING,description:"Historical and cultural background."},intention:{type:Se.STRING,description:"The core intention of the passage."},imagePrompt:{type:Se.STRING,description:"A safe, visual image prompt symbolizing the theme of the scripture."}},evangelismTips:`You are a wise and passionate evangelist. Based on the core message of the following Bible passage, please suggest ways to share the gospel with non-believing friends or neighbors in a natural and loving manner. Write in English.

    Please include the following:
    1.  **Key Points for Sharing**: Which parts of this passage should be emphasized in conversation?
    2.  **Conversation Starter Ideas**: How can one naturally start a conversation? (e.g., connecting to everyday questions)
    3.  **Example Dialogue**: Provide a short example conversation.

    Bible Passage:
    ${r}`,evangelismTipsError:"Failed to generate evangelism tips. Please try again later.",imageFallback:"A peaceful landscape in the ancient Middle East. A realistic oil painting of a hill with olive trees and a stone path.",recommendMusic:"You are a worship leader with deep spirituality. Please analyze the content and emotional atmosphere of the following text and recommend 3-5 of the most fitting praise songs (CCM or hymns). Provide the exact title and artist for each song.",recommendMusicContextPrefix:`
[Text to analyze]
${l}`,recommendMusicSchema:{songs:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{title:{type:Se.STRING,description:"Song title"},artist:{type:Se.STRING,description:"The artist who sang the song, or 'Hymn'"}},required:["title","artist"]}}},prayerGuide:`You are a spiritual mentor who helps believers in their prayer life. Based on the following Bible passage, please write a prayer guide using the A.C.T.S. (Adoration, Confession, Thanksgiving, Supplication) model to help the user with their prayer training. Please clearly separate each section and write in an inspiring way that allows the user to add their own prayers. Write in English.

    Prayer Format:
    **Adoration**:
    Write a prayer of praise for God's character and greatness as revealed in today's passage.

    **Confession**:
    Write a prayer of confession, honestly acknowledging one's own sins and weaknesses in light of the word and asking for forgiveness.

    **Thanksgiving**:
    Write a prayer of thanks for the grace of Jesus Christ on the cross and for what was realized through today's word.

    **Supplication**:
    Suggest 2-3 specific prayer topics for applying the word to life, for oneself, neighbors, and the community.

    Bible Passage:
    ${r}`,prayerGuideError:"Failed to generate prayer guide. Please try again later.",sermonOutline:`You are a theological consultant assisting pastors with sermon preparation. Based on the following Bible passage, please create a clear and inspiring sermon outline. Write in English.

Sermon Outline Format:
1.  **Sermon Title**: A creative title that captures the essence of the passage.
2.  **Central Message**: A single sentence summarizing the core message to be delivered.
3.  **Introduction**: Grab the audience's attention, briefly explain the passage's background, and set the direction for the sermon.
4.  **Body (3 Main Points)**:
    *   Point 1: (Topic and explanation)
    *   Point 2: (Topic and explanation)
    *   Point 3: (Topic and explanation)
5.  **Conclusion**: Summarize the sermon, provide a specific challenge and encouragement for congregants to apply to their lives, and close with a prayer.

Bible Passage:
${r}`,sermonOutlineError:"Failed to generate sermon outline. Please try again later.",storyKeywords:`From the Bible passage, extract the central story keywords (1-3 words each) and classify them into the following three categories. Please find 2-4 keywords for each category.
1.  **positive**: Keywords representing Jesus's positive teachings, love, grace, salvation, and other warm, affirmative themes (Yellow).
2.  **sin**: Keywords representing themes of sin, conflict, warnings, repentance, human weakness, or a hostile stance towards sin (Pink).
3.  **hope**: Keywords representing future-oriented and hopeful themes like the future, hope, promises, resurrection, and heaven (Green).

Bible Passage:
${r}`,storyKeywordsSchema:{positive:{type:Se.ARRAY,items:{type:Se.STRING},description:"List of keywords for positive themes."},sin:{type:Se.ARRAY,items:{type:Se.STRING},description:"List of keywords for sin or conflict themes."},hope:{type:Se.ARRAY,items:{type:Se.STRING},description:"List of keywords for future and hope themes."}},explainSelection:`You are a theologian with the depth and wisdom of a retired pastor, akin to Reverend Lee Jae-chul from the 100th Anniversary Memorial Church. Within the context of the full Bible passage provided, please offer a deep theological explanation for the specific verse the user has selected. Maintain a warm, pastoral tone and explain in a way that is easy for congregants to understand.

[Full Bible Passage]
${l}

[User-selected Verse]
${r}`,explainSelectionError:"Failed to generate verse explanation. Please try again later.",placeInfoQuery:(f,m)=>`Tell me about '${f}' visited during Paul's ${m}. Describe biblical events, Paul's activities there, and its modern geographical location. Please use Google Maps info.`,journeyMapPrompt:(f,m)=>`Create an artistic pencil sketch with light watercolor wash showing an ancient map of Paul's ${f}. The route should be marked with dotted lines connecting ${m.join(", ")}. Elegant calligraphy for city names. Historical atmosphere, papyrus texture, 1st-century Mediterranean geography.`}})[t];async function bR(t,e,i,s){var r;try{const l=Nt(s,t,e,i);if(!Et)throw new Error("Gemini API Key is missing. Cannot generate content.");const c=await Et.models.generateContent({model:"gemini-1.5-flash",contents:l.comprehensiveReading,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:l.comprehensiveReadingSchema,required:["passage","meditationGuide","context","intention","imagePrompt"]}}});if(c&&typeof c.text=="string"&&c.text.trim())return JSON.parse(c.text);let f="API response was empty or did not contain text content.";throw(r=c==null?void 0:c.promptFeedback)!=null&&r.blockReason&&(f=`Content generation was blocked due to: ${c.promptFeedback.blockReason}.`),console.error(f,{response:c}),new Error(f)}catch(l){throw console.error("Error generating comprehensive reading content:",l),l}}async function AR(t,e){try{const i=Nt(e,"",0,0,t);return(await Et.models.generateContent({model:"gemini-1.5-flash",contents:i.evangelismTips})).text}catch(i){return console.error("Error generating evangelism tips:",i),Nt(e,"",0,0).evangelismTipsError}}async function CR({initialPrompt:t,fallbackContext:e,language:i}){var m;const s=async p=>{var _,E,A,C;let w=0;for(;w<3;)try{if(!Et)throw new Error("AI not initialized");const x=await Et.models.generateContent({model:"gemini-1.5-flash-image",contents:{parts:[{text:p}]}});if((_=x.promptFeedback)!=null&&_.blockReason)return console.warn(`Image generation was blocked. Reason: ${x.promptFeedback.blockReason}`),null;const N=(E=x.candidates)==null?void 0:E[0],M=(C=(A=N==null?void 0:N.content)==null?void 0:A.parts)==null?void 0:C.find(I=>I.inlineData);return M!=null&&M.inlineData?`data:image/png;base64,${M.inlineData.data}`:(console.warn("Image generation failed: No image data was returned in the API response.",{finishReason:N==null?void 0:N.finishReason,safetyRatings:N==null?void 0:N.safetyRatings}),null)}catch(x){if(w++,JSON.stringify(x).includes("Rpc failed due to xhr error")){if(console.warn(`Attempt ${w} failed with a transient server error. Retrying in ${w*1e3}ms...`),w>=3)return console.error("All retry attempts failed for image generation due to server errors.",x),null;await new Promise(M=>setTimeout(M,w*1e3))}else return console.error("An unexpected, non-retriable error occurred during image generation call:",x),null}return null},c=i==="en"?`Create a symbolic and evocative image in the style of a classical oil painting with dramatic chiaroscuro lighting. The scene should be highly symbolic, avoiding any literal depictions of people or divine figures. Focus on objects, nature, and light to convey the core theme. The subject is: ${t}`:`  ,   ()      .    ,       . , ,      .   : ${t}`;let f=await s(c);if(!f){console.log("Symbolic image generation failed. Retrying with a context-aware fallback prompt based on passage intention.");const p=`Based on the following theological text, create a short, simple, safe-for-work image prompt for a symbolic oil painting. The prompt must NOT include people, faces, or religious figures. Focus on objects and nature. Text: "${e}"`,v=`   ,    , ,     .  , ,      .    . : "${e}"`;try{const _=(m=(await Et.models.generateContent({model:"gemini-1.5-flash",contents:i==="en"?p:v})).text)==null?void 0:m.trim();if(_){console.log(`Generated new fallback prompt: ${_}`);const E=i==="en"?`A symbolic oil painting of: ${_}`:` : ${_}`;f=await s(E)}else console.warn("Context-aware prompt generation resulted in an empty prompt.")}catch(w){console.error("Failed to generate a new fallback prompt",w)}}if(!f){console.log("Context-aware fallback failed. Using generic static fallback.");const p=Nt(i,"",0,0).imageFallback;f=await s(p)}return f||console.error("All image generation attempts, including all fallbacks, have failed."),f}async function xR(t,e){var i;try{const s=Nt(e,"",0,0,void 0,t);if(!Et)return[];const r=await Et.models.generateContent({model:"gemini-1.5-flash",contents:{parts:[{text:s.recommendMusic},{text:s.recommendMusicContextPrefix}]},config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:s.recommendMusicSchema,required:["songs"]}}});if(r&&typeof r.text=="string"&&r.text.trim())return JSON.parse(r.text).songs||[];let l="Music recommendation API response was empty or did not contain text content.";return(i=r==null?void 0:r.promptFeedback)!=null&&i.blockReason&&(l=`Music recommendation was blocked due to: ${r.promptFeedback.blockReason}.`),console.error(l,{response:r}),[]}catch(s){return console.error("Error recommending music:",s),[]}}async function RR(t,e){try{const i=Nt(e,"",0,0,t);return Et?(await Et.models.generateContent({model:"gemini-1.5-flash",contents:i.prayerGuide})).text:Nt(e,"",0,0).prayerGuideError}catch(i){return console.error("Error generating prayer guide:",i),Nt(e,"",0,0).prayerGuideError}}async function NR(t,e){try{const i=Nt(e,"",0,0,t);return Et?(await Et.models.generateContent({model:"gemini-1.5-flash",contents:i.sermonOutline})).text:Nt(e,"",0,0).sermonOutlineError}catch(i){return console.error("Error generating sermon outline:",i),Nt(e,"",0,0).sermonOutlineError}}async function IR(t,e){var i;try{const s=Nt(e,"",0,0,t);if(!Et)return null;const r=await Et.models.generateContent({model:"gemini-1.5-flash",contents:s.storyKeywords,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:s.storyKeywordsSchema,required:["positive","sin","hope"]}}});if(r&&typeof r.text=="string"&&r.text.trim())return JSON.parse(r.text);let l="Story keywords API response was empty or did not contain text content.";return(i=r==null?void 0:r.promptFeedback)!=null&&i.blockReason&&(l=`Story keywords generation was blocked due to: ${r.promptFeedback.blockReason}.`),console.error(l,{response:r}),null}catch(s){return console.error("Error generating story keywords:",s),null}}async function kR(t,e,i){try{const s=Nt(i,"",0,0,t,e);return Et?(await Et.models.generateContent({model:"gemini-1.5-flash",contents:s.explainSelection})).text:Nt(i,"",0,0,"","").explainSelectionError}catch(s){return console.error("Error generating passage explanation:",s),Nt(i,"",0,0,"","").explainSelectionError}}function gl(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i}function MR(t,e,i,s){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(v){try{p(s.next(v))}catch(w){c(w)}}function m(v){try{p(s.throw(v))}catch(w){c(w)}}function p(v){v.done?l(v.value):r(v.value).then(f,m)}p((s=s.apply(t,e||[])).next())})}const DR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Od extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}}class PR extends Od{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xy extends Od{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ry extends Od{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(hd||(hd={}));class LR{constructor(e,{headers:i={},customFetch:s,region:r=hd.Any}={}){this.url=e,this.headers=i,this.region=r,this.fetch=DR(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return MR(this,arguments,void 0,function*(i,s={}){var r;let l,c;try{const{headers:f,method:m,body:p,signal:v,timeout:w}=s;let _={},{region:E}=s;E||(E=this.region);const A=new URL(`${this.url}/${i}`);E&&E!=="any"&&(_["x-region"]=E,A.searchParams.set("forceFunctionRegion",E));let C;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(_["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(_["Content-Type"]="application/json",C=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?C=JSON.stringify(p):C=p;let x=v;w&&(c=new AbortController,l=setTimeout(()=>c.abort(),w),v?(x=c.signal,v.addEventListener("abort",()=>c.abort())):x=c.signal);const N=yield this.fetch(A.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),f),body:C,signal:x}).catch(K=>{throw new PR(K)}),M=N.headers.get("x-relay-error");if(M&&M==="true")throw new xy(N);if(!N.ok)throw new Ry(N);let I=((r=N.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),L;return I==="application/json"?L=yield N.json():I==="application/octet-stream"||I==="application/pdf"?L=yield N.blob():I==="text/event-stream"?L=N:I==="multipart/form-data"?L=yield N.formData():L=yield N.text(),{data:L,error:null,response:N}}catch(f){return{data:null,error:f,response:f instanceof Ry||f instanceof xy?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var UR=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},OR=class{constructor(t){var e,i,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(s=t.urlLengthLimit)!==null&&s!==void 0?s:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,f=null,m=null,p=l.status,v=l.statusText;if(l.ok){var w,_;if(i.method!=="HEAD"){var E;const N=await l.text();N===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((E=i.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?f=N:f=JSON.parse(N))}const C=(w=i.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),x=(_=l.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");C&&x&&x.length>1&&(m=parseInt(x[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var A;const C=await l.text();try{c=JSON.parse(C),Array.isArray(c)&&l.status===404&&(f=[],c=null,p=200,v="OK")}catch{l.status===404&&C===""?(p=204,v="No Content"):c={message:C}}if(c&&i.isMaybeSingle&&(!(c==null||(A=c.details)===null||A===void 0)&&A.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&i.shouldThrowOnError)throw new UR(c)}return{error:c,data:f,count:m,status:p,statusText:v}});return this.shouldThrowOnError||(r=r.catch(l=>{var c;let f="",m="",p="";const v=l==null?void 0:l.cause;if(v){var w,_,E,A;const N=(w=v==null?void 0:v.message)!==null&&w!==void 0?w:"",M=(_=v==null?void 0:v.code)!==null&&_!==void 0?_:"";f=`${(E=l==null?void 0:l.name)!==null&&E!==void 0?E:"FetchError"}: ${l==null?void 0:l.message}`,f+=`

Caused by: ${(A=v==null?void 0:v.name)!==null&&A!==void 0?A:"Error"}: ${N}`,M&&(f+=` (${M})`),v!=null&&v.stack&&(f+=`
${v.stack}`)}else{var C;f=(C=l==null?void 0:l.stack)!==null&&C!==void 0?C:""}const x=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(p="",m="Request was aborted (timeout or manual cancellation)",x>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${x} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((v==null?void 0:v.name)==="HeadersOverflowError"||(v==null?void 0:v.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",m="HTTP headers exceeded server limits (typically 16KB)",x>this.urlLengthLimit&&(m+=`. Your request URL is ${x} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:f,hint:m,code:p},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},GR=class extends OR{select(t){let e=!1;const i=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:s,referencedTable:r=s}={}){const l=r?`${r}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:s=i}={}){const r=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:s=!1,wal:r=!1,format:l="text"}={}){var c;const f=[t?"analyze":null,e?"verbose":null,i?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),m=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${f};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ny=new RegExp("[,()]");var Yo=class extends GR{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Ny.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Ny.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${r}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},BR=class{constructor(t,{headers:e={},schema:i,fetch:s,urlLengthLimit:r=8e3}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=s,this.urlLengthLimit=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:i=!1,count:s}=e??{},r=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",c),s&&m.append("Prefer",`count=${s}`),new Yo({method:r,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:i=!0}={}){var s;const r="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);l.searchParams.set("columns",m.join(","))}}return new Yo({method:r,url:l,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:s,defaultToNull:r=!0}={}){var l;const c="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&f.searchParams.set("on_conflict",e),s&&m.append("Prefer",`count=${s}`),r||m.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(p.length>0){const v=[...new Set(p)].map(w=>`"${w}"`);f.searchParams.set("columns",v.join(","))}}return new Yo({method:c,url:f,headers:m,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var i;const s="PATCH",{url:r,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new Yo({method:s,url:r,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const i="DELETE",{url:s,headers:r}=this.cloneRequestState();return t&&r.append("Prefer",`count=${t}`),new Yo({method:i,url:s,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function pr(t){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(t)}function qR(t,e){if(pr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(pr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VR(t){var e=qR(t,"string");return pr(e)=="symbol"?e:e+""}function HR(t,e,i){return(e=VR(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Iy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function $a(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Iy(Object(i),!0).forEach(function(s){HR(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Iy(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}var zR=class W0{constructor(e,{headers:i={},schema:s,fetch:r,timeout:l,urlLengthLimit:c=8e3}={}){this.url=e,this.headers=new Headers(i),this.schemaName=s,this.urlLengthLimit=c;const f=r??globalThis.fetch;l!==void 0&&l>0?this.fetch=(m,p)=>{const v=new AbortController,w=setTimeout(()=>v.abort(),l),_=p==null?void 0:p.signal;if(_){if(_.aborted)return clearTimeout(w),f(m,p);const E=()=>{clearTimeout(w),v.abort()};return _.addEventListener("abort",E,{once:!0}),f(m,$a($a({},p),{},{signal:v.signal})).finally(()=>{clearTimeout(w),_.removeEventListener("abort",E)})}return f(m,$a($a({},p),{},{signal:v.signal})).finally(()=>clearTimeout(w))}:this.fetch=f}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new BR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new W0(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,i={},{head:s=!1,get:r=!1,count:l}={}){var c;let f;const m=new URL(`${this.url}/rpc/${e}`);let p;const v=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(v)),w=s&&Object.values(i).some(v);w?(f="POST",p=i):s||r?(f=s?"HEAD":"GET",Object.entries(i).filter(([E,A])=>A!==void 0).map(([E,A])=>[E,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([E,A])=>{m.searchParams.append(E,A)})):(f="POST",p=i);const _=new Headers(this.headers);return w?_.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&_.set("Prefer",`count=${l}`),new Yo({method:f,url:m,headers:_,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class $R{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const s=i.versions;if(s&&s.node){const r=s.node,l=parseInt(r.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FR="2.96.0",JR=`realtime-js/${FR}`,jR="1.0.0",X0="2.0.0",ky=X0,pd=1e4,KR=1e3,YR=100;var Ti;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ti||(Ti={}));var ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ut||(ut={}));var pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pn||(pn={}));var md;(function(t){t.websocket="websocket"})(md||(md={}));var Yi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Yi||(Yi={}));class WR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const r=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var i,s;const r=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,s){var r,l;const c=e.topic,f=(r=e.ref)!==null&&r!==void 0?r:"",m=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+c.length+p.length+w.length,E=new ArrayBuffer(this.HEADER_LENGTH+_);let A=new DataView(E),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,m.length),A.setUint8(C++,f.length),A.setUint8(C++,c.length),A.setUint8(C++,p.length),A.setUint8(C++,w.length),A.setUint8(C++,i),Array.from(m,N=>A.setUint8(C++,N.charCodeAt(0))),Array.from(f,N=>A.setUint8(C++,N.charCodeAt(0))),Array.from(c,N=>A.setUint8(C++,N.charCodeAt(0))),Array.from(p,N=>A.setUint8(C++,N.charCodeAt(0))),Array.from(w,N=>A.setUint8(C++,N.charCodeAt(0)));var x=new Uint8Array(E.byteLength+s.byteLength);return x.set(new Uint8Array(E),0),x.set(new Uint8Array(s),E.byteLength),x.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,l,c,f,m]=s;return i({join_ref:r,ref:l,topic:c,event:f,payload:m})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,r)}}_decodeUserBroadcast(e,i,s){const r=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),f=i.getUint8(4);let m=this.HEADER_LENGTH+4;const p=s.decode(e.slice(m,m+r));m=m+r;const v=s.decode(e.slice(m,m+l));m=m+l;const w=s.decode(e.slice(m,m+c));m=m+c;const _=e.slice(m,e.byteLength),E=f===this.JSON_ENCODING?JSON.parse(s.decode(_)):_,A={type:this.BROADCAST_EVENT,event:v,payload:E};return c>0&&(A.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>i.includes(s)))}}class Q0{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Fe||(Fe={}));const My=(t,e,i={})=>{var s;const r=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=XR(c,t,e,r),l),{}):{}},XR=(t,e,i,s)=>{const r=e.find(f=>f.name===t),l=r==null?void 0:r.type,c=i[t];return l&&!s.includes(l)?Z0(l,c):gd(c)},Z0=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return t1(e,i)}switch(t){case Fe.bool:return QR(e);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return ZR(e);case Fe.json:case Fe.jsonb:return e1(e);case Fe.timestamp:return n1(e);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return gd(e);default:return gd(e)}},gd=t=>t,QR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ZR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},e1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},t1=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>Z0(e,f))}return t},n1=t=>typeof t=="string"?t.replace(" ","T"):t,ev=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class zc{constructor(e,i,s={},r=pd){this.channel=e,this.event=i,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dy||(Dy={}));class dr{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dr.syncState(this.state,r,l,c),this.pendingDiffs.forEach(m=>{this.state=dr.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=dr.syncDiff(this.state,r,l,c),f())}),this.onJoin((r,l,c)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:c})}),this.onLeave((r,l,c)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,r){const l=this.cloneDeep(e),c=this.transformState(i),f={},m={};return this.map(l,(p,v)=>{c[p]||(m[p]=v)}),this.map(c,(p,v)=>{const w=l[p];if(w){const _=v.map(x=>x.presence_ref),E=w.map(x=>x.presence_ref),A=v.filter(x=>E.indexOf(x.presence_ref)<0),C=w.filter(x=>_.indexOf(x.presence_ref)<0);A.length>0&&(f[p]=A),C.length>0&&(m[p]=C)}else f[p]=v}),this.syncDiff(l,{joins:f,leaves:m},s,r)}static syncDiff(e,i,s,r){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(f,m)=>{var p;const v=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),v.length>0){const w=e[f].map(E=>E.presence_ref),_=v.filter(E=>w.indexOf(E.presence_ref)<0);e[f].unshift(..._)}s(f,v,m)}),this.map(c,(f,m)=>{let p=e[f];if(!p)return;const v=m.map(w=>w.presence_ref);p=p.filter(w=>v.indexOf(w.presence_ref)<0),e[f]=p,r(f,p,m),p.length===0&&delete e[f]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const r=e[s];return"metas"in r?i[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=r,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Py;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Py||(Py={}));var fr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fr||(fr={}));var zn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(zn||(zn={}));class es{constructor(e,i={config:{}},s){var r,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new zc(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Q0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new dr(this),this.broadcastEndpointURL=ev(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:c,presence:f,private:m}}=this.params,p=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(E=>E.filter))!==null&&r!==void 0?r:[],v=!!this.bindings[fr.PRESENCE]&&this.bindings[fr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},_={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(zn.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(zn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e==null||e(zn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,x=(A=C==null?void 0:C.length)!==null&&A!==void 0?A:0,N=[];for(let M=0;M<x;M++){const I=C[M],{filter:{event:L,schema:K,table:G,filter:$}}=I,se=E&&E[M];if(se&&se.event===L&&es.isFilterValueEqual(se.schema,K)&&es.isFilterValueEqual(se.table,G)&&es.isFilterValueEqual(se.filter,$))N.push(Object.assign(Object.assign({},I),{id:se.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(zn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(zn.SUBSCRIBED);return}}).receive("error",E=>{this.state=ut.errored,e==null||e(zn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(zn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===ut.joined&&e===fr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var r;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,i={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,m;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new zc(this,pn.leave,{},e),s.receive("ok",()=>{i(),r("ok")}).receive("timeout",()=>{i(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:r.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new zc(this,e,i,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>YR){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var r,l;const c=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:v}=pn;if(s&&[f,m,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let _=this._onMessage(c,i,s);if(i&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(E=>{var A,C,x;return((A=E.filter)===null||A===void 0?void 0:A.event)==="*"||((x=(C=E.filter)===null||C===void 0?void 0:C.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===c}).map(E=>E.callback(_,s)):(l=this.bindings[c])===null||l===void 0||l.filter(E=>{var A,C,x,N,M,I;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const L=E.id,K=(A=E.filter)===null||A===void 0?void 0:A.event;return L&&((C=i.ids)===null||C===void 0?void 0:C.includes(L))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((x=i.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const L=(M=(N=E==null?void 0:E.filter)===null||N===void 0?void 0:N.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return L==="*"||L===((I=i==null?void 0:i.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof _=="object"&&"ids"in _){const A=_.data,{schema:C,table:x,commit_timestamp:N,type:M,errors:I}=A;_=Object.assign(Object.assign({},{schema:C,table:x,commit_timestamp:N,eventType:M,new:{},old:{},errors:I}),this._getPayloadRecords(A))}E.callback(_,s)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const r=e.toLocaleLowerCase(),l={type:r,filter:i,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&es.isEqual(r.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pn.close,{},e)}_onError(e){this._on(pn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=My(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=My(e.columns,e.old_record)),i}}const $c=()=>{},Fa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i1=[1e3,2e3,5e3,1e4],o1=1e4,s1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class r1{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pd,this.transport=null,this.heartbeatIntervalMs=Fa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$c,this.ref=0,this.reconnectTimer=null,this.vsn=ky,this.logger=$c,this.conn=null,this.sendBuffer=[],this.serializer=new WR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...l)=>r(...l):(...l)=>fetch(...l),!(!((s=i==null?void 0:i.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${md.websocket}`,this.httpEndpoint=ev(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$R.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ti.connecting:return Yi.Connecting;case Ti.open:return Yi.Open;case Ti.closing:return Yi.Closing;default:return Yi.Closed}}isConnected(){return this.connectionState()===Yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new es(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:r,ref:l}=e,c=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${i} ${s} (${l})`,r),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(KR,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Fa.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:r,payload:l,ref:c}=i,f=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${r} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(r,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ti.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ti.open||this.conn.readyState===Ti.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(pn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(i);return`${e}${s}${r}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([s1],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,s=!1;if(e)i=e,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const l={access_token:i,version:JR};i&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(pn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Q0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,r,l,c,f,m,p,v,w,_,E;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:pd,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Fa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:$c,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:ky,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(A=>i1[A-1]||o1),this.vsn){case jR:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((A,C)=>C(JSON.stringify(A))),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:((A,C)=>C(JSON.parse(A)));break;case X0:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var mr=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function a1(t,e,i){const s=new URL(e,t);if(i)for(const[r,l]of Object.entries(i))l!==void 0&&s.searchParams.set(r,l);return s.toString()}async function l1(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function u1(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:r,body:l,headers:c}){const f=a1(t.baseUrl,s,r),m=await l1(t.auth),p=await e(f,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...m,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),_=w&&v?JSON.parse(v):v;if(!p.ok){const E=w?_:void 0,A=E==null?void 0:E.error;throw new mr((A==null?void 0:A.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:E})}return{status:p.status,headers:p.headers,data:_}}}}function Ja(t){return t.join("")}var c1=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ja(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ja(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ja(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ja(t.namespace)}`}),!0}catch(e){if(e instanceof mr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof mr&&i.status===409)return;throw i}}};function Ho(t){return t.join("")}var d1=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ho(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof mr&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof mr&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},f1=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=u1({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new c1(this.client,e),this.tableOps=new d1(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},yl=class extends Error{constructor(t,e="storage",i,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=s}};function vl(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var ja=class extends yl{constructor(t,e,i,s="storage"){super(t,s,e,i),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},tv=class extends yl{constructor(t,e,i="storage"){super(t,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const h1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),p1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},yd=t=>{if(Array.isArray(t))return t.map(i=>yd(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const r=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=yd(s)}),e},m1=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function gr(t){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(t)}function g1(t,e){if(gr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(gr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y1(t){var e=g1(t,"string");return gr(e)=="symbol"?e:e+""}function v1(t,e,i){return(e=y1(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ly(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function ue(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ly(Object(i),!0).forEach(function(s){v1(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ly(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const Uy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},_1=async(t,e,i,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const r=t,l=r.status||500;if(typeof r.json=="function")r.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||l+"";e(new ja(Uy(c),l,f,s))}).catch(()=>{if(s==="vectors"){const c=l+"";e(new ja(r.statusText||`HTTP ${l} error`,l,c,s))}else{const c=l+"";e(new ja(r.statusText||`HTTP ${l} error`,l,c,s))}});else{const c=l+"";e(new ja(r.statusText||`HTTP ${l} error`,l,c,s))}}else e(new tv(Uy(t),t,s))},w1=(t,e,i,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!s?ue(ue({},r),i):(p1(s)?(r.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),ue(ue({},r),i))};async function lr(t,e,i,s,r,l,c){return new Promise((f,m)=>{t(i,w1(e,s,r,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;if(c==="vectors"){const v=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!v||!v.includes("application/json"))return{}}return p.json()}).then(p=>f(p)).catch(p=>_1(p,m,s,c))})}function nv(t="storage"){return{get:async(e,i,s,r)=>lr(e,"GET",i,s,r,void 0,t),post:async(e,i,s,r,l)=>lr(e,"POST",i,r,l,s,t),put:async(e,i,s,r,l)=>lr(e,"PUT",i,r,l,s,t),head:async(e,i,s,r)=>lr(e,"HEAD",i,ue(ue({},s),{},{noResolveJson:!0}),r,void 0,t),remove:async(e,i,s,r,l)=>lr(e,"DELETE",i,r,l,s,t)}}const S1=nv("storage"),{get:yr,post:hn,put:vd,head:T1,remove:Gd}=S1,Yt=nv("vectors");var as=class{constructor(t,e={},i,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=h1(i),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=ue(ue({},this.headers),{},{[t]:e}),this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(vl(i))return{data:null,error:i};throw i}}},E1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vl(e))return{data:null,error:e};throw e}}};let iv;iv=Symbol.toStringTag;var b1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[iv]="BlobDownloadBuilder",this.promise=null}asStream(){return new E1(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vl(e))return{data:null,error:e};throw e}}};const A1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Oy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var C1=class extends as{constructor(t,e={},i,s){super(t,e,s,"storage"),this.bucketId=i}async uploadOrUpdate(t,e,i,s){var r=this;return r.handleOperation(async()=>{let l;const c=ue(ue({},Oy),s);let f=ue(ue({},r.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",r.encodeMetadata(m)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",r.encodeMetadata(m))):(l=i,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,m&&(f["x-metadata"]=r.toBase64(r.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s!=null&&s.headers&&(f=ue(ue({},f),s.headers));const p=r._removeEmptyFolders(e),v=r._getFinalPath(p),w=await(t=="PUT"?vd:hn)(r.fetch,`${r.url}/object/${v}`,l,ue({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:p,id:w.Id,fullPath:w.Key}})}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,s){var r=this;const l=r._removeEmptyFolders(t),c=r._getFinalPath(l),f=new URL(r.url+`/object/upload/sign/${c}`);return f.searchParams.set("token",e),r.handleOperation(async()=>{let m;const p=ue({upsert:Oy.upsert},s),v=ue(ue({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",p.cacheControl)):(m=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{path:l,fullPath:(await vd(r.fetch,f.toString(),m,{headers:v})).Key}})}async createSignedUploadUrl(t,e){var i=this;return i.handleOperation(async()=>{let s=i._getFinalPath(t);const r=ue({},i.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const l=await hn(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:r}),c=new URL(i.url+l.url),f=c.searchParams.get("token");if(!f)throw new yl("No token returned by API");return{signedUrl:c.toString(),path:t,token:f}})}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var s=this;return s.handleOperation(async()=>await hn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers}))}async copy(t,e,i){var s=this;return s.handleOperation(async()=>({path:(await hn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,i){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(t),l=await hn(s.fetch,`${s.url}/object/sign/${r}`,ue({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:s.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)}})}async createSignedUrls(t,e,i){var s=this;return s.handleOperation(async()=>{const r=await hn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return r.map(c=>ue(ue({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null}))})}download(t,e,i){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),l=r?`?${r}`:"",c=this._getFinalPath(t),f=()=>yr(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0},i);return new b1(f,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);return e.handleOperation(async()=>yd(await yr(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})))}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await T1(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(vl(s)&&s instanceof tv){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const i=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&s.push(c);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${f}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Gd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,i){var s=this;return s.handleOperation(async()=>{const r=ue(ue(ue({},A1),e),{},{prefix:t||""});return await hn(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},i)})}async listV2(t,e){var i=this;return i.handleOperation(async()=>{const s=ue({},t);return await hn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const x1="2.96.0",Sr={"X-Client-Info":`storage-js/${x1}`};var R1=class extends as{constructor(t,e={},i,s){const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const l=r.href.replace(/\/$/,""),c=ue(ue({},Sr),e);super(l,c,i,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=e.listBucketOptionsToQueryString(t);return await yr(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await yr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var i=this;return i.handleOperation(async()=>await hn(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async updateBucket(t,e){var i=this;return i.handleOperation(async()=>await vd(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await hn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Gd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},N1=class extends as{constructor(t,e={},i){const s=t.replace(/\/$/,""),r=ue(ue({},Sr),e);super(s,r,i,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await hn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const s=i.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await yr(e.fetch,r,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Gd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!m1(t))throw new yl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new f1({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(r,l){const c=r[l];return typeof c!="function"?c:async(...f)=>{try{return{data:await c.apply(r,f),error:null}}catch(m){if(s)throw m;return{data:null,error:m}}}}})}},I1=class extends as{constructor(t,e={},i){const s=t.replace(/\/$/,""),r=ue(ue({},Sr),{},{"Content-Type":"application/json"},e);super(s,r,i,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var i=this;return i.handleOperation(async()=>await Yt.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var i=this;return i.handleOperation(async()=>await Yt.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{})}},k1=class extends as{constructor(t,e={},i){const s=t.replace(/\/$/,""),r=ue(ue({},Sr),{},{"Content-Type":"application/json"},e);super(s,r,i,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},M1=class extends as{constructor(t,e={},i){const s=t.replace(/\/$/,""),r=ue(ue({},Sr),{},{"Content-Type":"application/json"},e);super(s,r,i,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Yt.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},D1=class extends M1{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new P1(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},P1=class extends I1{constructor(t,e,i,s){super(t,e,s),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new L1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},L1=class extends k1{constructor(t,e,i,s,r){super(t,e,r),this.vectorBucketName=i,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,ue(ue({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},U1=class extends R1{constructor(t,e={},i,s){super(t,e,i,s)}from(t){return new C1(this.url,this.headers,t,this.fetch)}get vectors(){return new D1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new N1(this.url+"/iceberg",this.headers,this.fetch)}};const ov="2.96.0",Wo=30*1e3,_d=3,Fc=_d*Wo,O1="http://localhost:9999",G1="supabase.auth.token",B1={"X-Client-Info":`gotrue-js/${ov}`},wd="X-Supabase-Api-Version",sv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V1=600*1e3;class vr extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class H1 extends vr{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function z1(t){return oe(t)&&t.name==="AuthApiError"}class Wi extends vr{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class jn extends vr{constructor(e,i,s,r){super(e,s,r),this.name=i,this.status=s}}class Kt extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jc(t){return oe(t)&&t.name==="AuthSessionMissingError"}class zo extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ka extends jn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ya extends jn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $1(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gy extends jn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F1 extends jn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Sd extends jn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function jc(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class By extends jn{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class Td extends jn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qy=` 	
\r=`.split(""),J1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qy.length;e+=1)t[qy[e].charCodeAt(0)]=-2;for(let e=0;e<al.length;e+=1)t[al[e].charCodeAt(0)]=e;return t})();function Vy(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(al[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(al[s]),e.queuedBits-=6}}function rv(t,e,i){const s=J1[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hy(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=c=>{Y1(c,s,i)};for(let c=0;c<t.length;c+=1)rv(t.charCodeAt(c),r,l);return e.join("")}function j1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function K1(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|r)+65536,i+=1}j1(s,e)}}function Y1(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function is(t){const e=[],i={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)rv(t.charCodeAt(r),i,s);return new Uint8Array(e)}function W1(t){const e=[];return K1(t,i=>e.push(i)),new Uint8Array(e)}function Xi(t){const e=[],i={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Vy(r,i,s)),Vy(null,i,s),e.join("")}function X1(t){return Math.round(Date.now()/1e3)+t}function Q1(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",Fi={tested:!1,writable:!1},av=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fi.tested)return Fi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fi.tested=!0,Fi.writable=!0}catch{Fi.tested=!0,Fi.writable=!1}return Fi.writable};function Z1(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return i.searchParams.forEach((s,r)=>{e[r]=s}),e}const lv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),eN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xo=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Ji=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},St=async(t,e)=>{await t.removeItem(e)};class _l{constructor(){this.promise=new _l.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}_l.promiseConstructor=Promise;function Wa(t){const e=t.split(".");if(e.length!==3)throw new Td("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!q1.test(e[s]))throw new Td("JWT not in base64url format");return{header:JSON.parse(Hy(e[0])),payload:JSON.parse(Hy(e[1])),signature:is(e[2]),raw:{header:e[0],payload:e[1]}}}async function tN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nN(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){r(c);return}}})()})}function iN(t){return("0"+t.toString(16)).substr(-2)}function oN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let r="";for(let l=0;l<56;l++)r+=i.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,iN).join("")}async function sN(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function rN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await sN(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $o(t,e,i=!1){const s=oN();let r=s;i&&(r+="/PASSWORD_RECOVERY"),await Xo(t,`${e}-code-verifier`,r);const l=await rN(s);return[l,s===l?"plain":"s256"]}const aN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lN(t){const e=t.headers.get(wd);if(!e||!e.match(aN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function cN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fo(t){if(!dN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fN(t,e){return new Proxy(t,{get:(i,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,r)}})}function zy(t){return JSON.parse(JSON.stringify(t))}const Ki=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hN=[502,503,504];async function $y(t){var e;if(!eN(t))throw new Sd(Ki(t),0);if(hN.includes(t.status))throw new Sd(Ki(t),t.status);let i;try{i=await t.json()}catch(l){throw new Wi(Ki(l),l)}let s;const r=lN(t);if(r&&r.getTime()>=sv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new By(Ki(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Kt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new By(Ki(i),t.status,i.weak_password.reasons);throw new H1(Ki(i),t.status||500,s)}const pN=(t,e,i,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),i))};async function de(t,e,i,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[wd]||(l[wd]=sv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await mN(t,e,i+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function mN(t,e,i,s,r,l){const c=pN(e,s,r,l);let f;try{f=await t(i,Object.assign({},c))}catch(m){throw console.error(m),new Sd(Ki(m),0)}if(f.ok||await $y(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(m){await $y(m)}}function fn(t){var e;let i=null;vN(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=X1(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function Fy(t){const e=fn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ei(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gN(t){return{data:t,error:null}}function yN(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:r,verification_type:l}=t,c=gl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:i,hashed_token:s,redirect_to:r,verification_type:l},m=Object.assign({},c);return{data:{properties:f,user:m},error:null}}function Jy(t){return t}function vN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Yc=["global","local","others"];class _N{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=lv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Yc[0]){if(Yc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yc.join(", ")}`);try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Ei})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=gl(e,["options"]),r=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:yN,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(oe(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ei})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,r,l,c,f,m;try{const p={nextPage:null,lastPage:0,total:0},v=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Jy});if(v.error)throw v.error;const w=await v.json(),_=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(A.split(";")[1].split("=")[1]);p[`${x}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Fo(e);try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ei})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Fo(e);try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:Ei})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){Fo(e);try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:Ei})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Fo(e.userId);try{const{data:i,error:s}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:i,error:s}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Fo(e.userId),Fo(e.id);try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,r,l,c,f,m;try{const p={nextPage:null,lastPage:0,total:0},v=await de(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:Jy});if(v.error)throw v.error;const w=await v.json(),_=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(A.split(";")[1].split("=")[1]);p[`${x}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await de(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await de(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await de(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await de(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await de(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(oe(i))return{data:null,error:i};throw i}}}function jy(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const Jo={debug:!!(globalThis&&av()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ky extends uv{}async function wN(t,e,i){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;e>0&&setTimeout(()=>{s.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await i()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ky(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Jo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}})}catch(r){throw(r==null?void 0:r.name)==="AbortError"?new Ky(`Acquiring an exclusive Navigator LockManager lock "${t}" timed out waiting ${e}ms`):r}}function SN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function TN(t){return parseInt(t,16)}function EN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function bN(t){var e;const{chainId:i,domain:s,expirationTime:r,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:m,resources:p,scheme:v,uri:w,version:_}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=cv(t.address),A=v?`${v}://${s}`:s,C=t.statement?`${t.statement}
`:"",x=`${A} wants you to sign in with your Ethereum account:
${E}

${C}`;let N=`URI: ${w}
Version: ${_}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(r&&(N+=`
Expiration Time: ${r.toISOString()}`),f&&(N+=`
Not Before: ${f.toISOString()}`),m&&(N+=`
Request ID: ${m}`),p){let M=`
Resources:`;for(const I of p){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);M+=`
- ${I}`}N+=M}return`${x}
${N}`}class rt extends Error{constructor({message:e,code:i,cause:s,name:r}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=r??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class ll extends rt{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function AN({error:t,options:e}){var i,s,r;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(dv(c)){if(l.rp.id!==c)return new rt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function CN({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(dv(s)){if(i.rpId!==s)return new rt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class xN{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const RN=new xN;function NN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,r=gl(t,["challenge","user","excludeCredentials"]),l=is(e).buffer,c=Object.assign(Object.assign({},i),{id:is(i.id).buffer}),f=Object.assign(Object.assign({},r),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:is(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function IN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=gl(t,["challenge","allowCredentials"]),r=is(e).buffer,l=Object.assign(Object.assign({},s),{challenge:r});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const f=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:is(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function kN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Xi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function MN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Xi(new Uint8Array(r.authenticatorData)),clientDataJSON:Xi(new Uint8Array(r.clientDataJSON)),signature:Xi(new Uint8Array(r.signature)),userHandle:r.userHandle?Xi(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Yy(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function DN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ll("Browser returned unexpected credential type",e)}:{data:null,error:new ll("Empty credential response",e)}}catch(e){return{data:null,error:AN({error:e,options:t})}}}async function PN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ll("Browser returned unexpected credential type",e)}:{data:null,error:new ll("Empty credential response",e)}}catch(e){return{data:null,error:CN({error:e,options:t})}}}const LN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},UN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ul(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),i=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const l in r){const c=r[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=ul(f,c):s[l]=ul(c)}else s[l]=c}return s}function ON(t,e){return ul(LN,t,e||{})}function GN(t,e){return ul(UN,t,e||{})}class BN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:r},l){var c;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!f)return{data:null,error:m};const p=r??RN.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;if(!v.name){const w=s;if(w)v.name=`${v.id}:${w}`;else{const E=(await this.client.getUser()).data.user,A=((c=E==null?void 0:E.user_metadata)===null||c===void 0?void 0:c.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";v.name=`${v.id}:${A}`}}v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=ON(f.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:w,error:_}=await DN({publicKey:v,signal:p});return w?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const v=GN(f.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:w,error:_}=await PN(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:p}));return w?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new Wi("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!i)return{data:null,error:new vr("rpId is required for WebAuthn authentication")};try{if(!Yy())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:r},{request:l});if(!c)return{data:null,error:f};const{webauthn:m}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:m.type,rpId:i,rpOrigins:s,credential_response:m.credential_response}})}catch(c){return oe(c)?{data:null,error:c}:{data:null,error:new Wi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!i)return{data:null,error:new vr("rpId is required for WebAuthn registration")};try{if(!Yy())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:r},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:i,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(c){return oe(c)?{data:null,error:c}:{data:null,error:new Wi("Unexpected error in register",c)}}}}SN();const qN={url:O1,storageKey:G1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Wy(t,e,i){return await i()}const jo={};class _r{get jwks(){var e,i;return(i=(e=jo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=jo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},qN),e);if(this.storageKey=l.storageKey,this.instanceID=(i=_r.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,_r.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Tt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new _N({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=lv(l.fetch),this.lock=l.lock||Wy,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Tt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=wN:this.lock=Wy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:av()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=jy(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ov}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(Tt()&&(i=Z1(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),Tt()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),$1(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return oe(i)?this._returnResult({error:i}):this._returnResult({error:new Wi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,r;try{const l=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:fn}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,r;try{let l;if("email"in e){const{email:v,password:w,options:_}=e;let E=null,A=null;this.flowType==="pkce"&&([E,A]=await $o(this.storage,this.storageKey)),l=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:w,data:(i=_==null?void 0:_.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:A},xform:fn})}else if("phone"in e){const{phone:v,password:w,options:_}=e;l=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(r=_==null?void 0:_.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:fn})}else throw new Ka("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return await St(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:f}=e;i=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fy})}else if("phone"in e){const{phone:l,password:c,options:f}=e;i=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fy})}else throw new Ka("You must provide either an email or phone number and a password");const{data:s,error:r}=i;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const l=new zo;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,r,l,c,f,m,p,v,w,_;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:C,wallet:x,statement:N,options:M}=e;let I;if(Tt())if(typeof x=="object")I=x;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")I=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=x}const L=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href),K=await I.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=cv(K[0]);let $=(s=M==null?void 0:M.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!$){const Y=await I.request({method:"eth_chainId"});$=TN(Y)}const se={domain:L.host,address:G,statement:N,uri:L.href,version:"1",chainId:$,nonce:(r=M==null?void 0:M.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(c=(l=M==null?void 0:M.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=M==null?void 0:M.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=M==null?void 0:M.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=M==null?void 0:M.signInWithEthereum)===null||v===void 0?void 0:v.resources};E=bN(se),A=await I.request({method:"personal_sign",params:[EN(E),G]})}try{const{data:C,error:x}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:A},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:fn});if(x)throw x;if(!C||!C.session||!C.user){const N=new zo;return this._returnResult({data:{user:null,session:null},error:N})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:x})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var i,s,r,l,c,f,m,p,v,w,_,E;let A,C;if("message"in e)A=e.message,C=e.signature;else{const{chain:x,wallet:N,statement:M,options:I}=e;let L;if(Tt())if(typeof N=="object")L=N;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))L=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=N}const K=new URL((i=I==null?void 0:I.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in L&&L.signIn){const G=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),M?{statement:M}:null));let $;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")$=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)$=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)A=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),C=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${K.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(r=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I==null?void 0:I.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((f=I==null?void 0:I.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((w=(v=I==null?void 0:I.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...I.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const G=await L.signMessage(new TextEncoder().encode(A),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=G}}try{const{data:x,error:N}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Xi(C)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:fn});if(N)throw N;if(!x||!x.session||!x.user){const M=new zo;return this._returnResult({data:{user:null,session:null},error:M})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:N})}catch(x){if(oe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const i=await Ji(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new F1;const{data:l,error:c}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:fn});if(await St(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:c})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:r,access_token:l,nonce:c}=e,f=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:fn}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const v=new zo;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,r,l,c;try{if("email"in e){const{email:f,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await $o(this.storage,this.storageKey));const{error:w}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:v}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(c=m==null?void 0:m.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new Ka("You must provide either an email or phone number.")}catch(f){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var i,s;try{let r,l;"options"in e&&(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:fn});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,p=c.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var i,s,r,l,c;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await $o(this.storage,this.storageKey));const p=await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:gN});return!((l=p.data)===null||l===void 0)&&l.url&&Tt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new Kt;const{error:r}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:c}=await de(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:c,error:f}=await de(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new Ka("You must provide either an email or phone number and a type")}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await Ji(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Kc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=fN(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ei}):await this._useSession(async i=>{var s,r,l;const{data:c,error:f}=i;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:Ei})})}catch(i){if(oe(i))return Jc(i)&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new Kt;const c=r.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await $o(this.storage,this.storageKey));const{data:p,error:v}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:c.access_token,xform:Ei});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kt;const i=Date.now()/1e3;let s=i,r=!0,l=null;const{payload:c}=Wa(e.access_token);if(c.exp&&(s=c.exp,r=s<=i),r){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(oe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:f}=i;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Kt;const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!Tt())throw new Ya("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ya(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Gy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ya("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gy("No code detected.");const{data:M,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:c,expires_in:f,expires_at:m,token_type:p}=e;if(!l||!f||!c||!p)throw new Ya("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(f);let _=v+w;m&&(_=parseInt(m));const E=_-v;E*1e3<=Wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${w}s`);const A=_-w;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,_,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,_,v);const{data:C,error:x}=await this._getUser(l);if(x)throw x;const N={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:w,expires_at:_,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:e.type},error:null})}catch(s){if(oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Ji(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l&&!Jc(l))return this._returnResult({error:l});const c=(s=r.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(z1(f)&&(f.status===404||f.status===401||f.status===403)||Jc(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=Q1(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,r;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await $o(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:r}=await this._useSession(async l=>{var c,f,m,p,v;const{data:w,error:_}=l;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",E,{headers:this.headers,jwt:(v=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(r)throw r;return Tt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:r,data:{session:l}}=i;if(r)throw r;const{options:c,provider:f,token:m,access_token:p,nonce:v}=e,w=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fn}),{data:_,error:E}=w;return E?this._returnResult({data:{user:null,session:null},error:E}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new zo}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:E}))}catch(r){if(await St(this.storage,`${this.storageKey}-code-verifier`),oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,r;const{data:l,error:c}=i;if(c)throw c;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await nN(async r=>(r>0&&await tN(200*Math.pow(2,r-1)),this._debug(i,"refreshing attempt",r),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fn})),(r,l)=>{const c=200*Math.pow(2,r);return l&&jc(l)&&Date.now()+c-s<Wo})}catch(s){if(this._debug(i,"error",s),oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),Tt()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Ji(this.storage,this.storageKey);if(r&&this.userStorage){let c=await Ji(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:r.user},await Xo(this.userStorage,this.storageKey+"-user",c)),r.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Kc()}else if(r&&!r.user&&!r.user){const c=await Ji(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(r.user=c.user,await St(this.storage,this.storageKey+"-user"),await Xo(this.storage,this.storageKey,r)):r.user=Kc()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const l=((i=r.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Fc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Fc}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:c}=await this._callRefreshToken(r.refresh_token);c&&(console.error(c),jc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(r.access_token);!f&&(c!=null&&c.user)?(r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new _l;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Kt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(r,"error",l),oe(l)){const c={data:null,error:l};return jc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,i,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,i)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await St(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await Xo(this.userStorage,this.storageKey+"-user",{user:i.user});const r=Object.assign({},i);delete r.user;const l=zy(r);await Xo(this.storage,this.storageKey,l)}else{const r=zy(i);await Xo(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await St(this.storage,this.storageKey),await St(this.storage,this.storageKey+"-code-verifier"),await St(this.storage,this.storageKey+"-user"),this.userStorage&&await St(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Wo}ms, refresh threshold is ${_d} ticks`),r<=_d&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const r=[`provider=${encodeURIComponent(i)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await $o(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});r.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;return l?this._returnResult({data:null,error:l}):await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,r;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await de(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((r=m==null?void 0:m.totp)===null||r===void 0)&&r.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kN(e.webauthn.credential_response):MN(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:NN(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:IN(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])r.all.push(l),l.status==="verified"&&r[l.factor_type].push(l);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var i,s,r,l;if(e)try{const{payload:E}=Wa(e);let A=null;E.aal&&(A=E.aal);let C=A;const{data:{user:x},error:N}=await this.getUser(e);if(N)return this._returnResult({data:null,error:N});((s=(i=x==null?void 0:x.factors)===null||i===void 0?void 0:i.filter(L=>L.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(C="aal2");const I=E.amr||[];return{data:{currentLevel:A,nextLevel:C,currentAuthenticationMethods:I},error:null}}catch(E){if(oe(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:c},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Wa(c.access_token);let p=null;m.aal&&(p=m.aal);let v=p;((l=(r=c.user.factors)===null||r===void 0?void 0:r.filter(E=>E.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(v="aal2");const _=m.amr||[];return{data:{currentLevel:p,nextLevel:v,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;return r?this._returnResult({data:null,error:r}):s?await de(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Kt});const c=await de(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Kt});const c=await de(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;return s?this._returnResult({data:null,error:s}):i?await de(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;return r?this._returnResult({data:null,error:r}):s?(await de(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(f=>f.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+V1>r)return s;const{data:l,error:c}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:E,error:A}=await this.getSession();if(A||!E.session)return this._returnResult({data:null,error:A});s=E.session.access_token}const{header:r,payload:l,signature:c,raw:{header:f,payload:m}}=Wa(s);i!=null&&i.allowExpired||uN(l.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:E}=await this.getUser(s);if(E)throw E;return{data:{claims:l,header:r,signature:c},error:null}}const v=cN(r.alg),w=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,c,W1(`${f}.${m}`)))throw new Td("Invalid JWT signature");return{data:{claims:l,header:r,signature:c},error:null}}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}}_r.nextInstanceID={};const VN=_r,HN="2.96.0";let cr="";typeof Deno<"u"?cr="deno":typeof document<"u"?cr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cr="react-native":cr="node";const zN={"X-Client-Info":`supabase-js-${cr}/${HN}`},$N={headers:zN},FN={schema:"public"},JN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jN={};function wr(t){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(t)}function KN(t,e){if(wr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(wr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YN(t){var e=KN(t,"string");return wr(e)=="symbol"?e:e+""}function WN(t,e,i){return(e=YN(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,s)}return i}function Ze(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Xy(Object(i),!0).forEach(function(s){WN(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xy(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const XN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),QN=()=>Headers,ZN=(t,e,i)=>{const s=XN(i),r=QN();return async(l,c)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:t;let p=new r(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),s(l,Ze(Ze({},c),{},{headers:p}))}};function eI(t){return t.endsWith("/")?t:t+"/"}function tI(t,e){var i,s;const{db:r,auth:l,realtime:c,global:f}=t,{db:m,auth:p,realtime:v,global:w}=e,_={db:Ze(Ze({},m),r),auth:Ze(Ze({},p),l),realtime:Ze(Ze({},v),c),storage:{},global:Ze(Ze(Ze({},w),f),{},{headers:Ze(Ze({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function nI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var iI=class extends VN{constructor(t){super(t)}},oI=class{constructor(t,e,i){var s,r;this.supabaseUrl=t,this.supabaseKey=e;const l=nI(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:FN,realtime:jN,auth:Ze(Ze({},JN),{},{storageKey:c}),global:$N},m=tI(i??{},f);if(this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=m.global.headers)!==null&&r!==void 0?r:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=ZN(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new zR(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new U1(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new LR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:r,storageKey:l,flowType:c,lock:f,debug:m,throwOnError:p},v,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iI({url:this.authUrl.href,headers:Ze(Ze({},_),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:r,flowType:c,lock:f,debug:m,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new r1(this.realtimeUrl.href,Ze(Ze({},t),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const sI=(t,e,i)=>new oI(t,e,i);function rI(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}rI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const aI="https://wlojtqqdfcfdqklkvbip.supabase.co",lI="sb_publishable_kwSub1z_Xit1SD6PVuSbzg_yNvkqkVJ",Ye=sI(aI,lI),uI=async t=>{const{data:{session:e}}=await Ye.auth.getSession();if(!e){const r=window.localStorage.getItem(t);return r?JSON.parse(r):[]}const{data:i,error:s}=await Ye.from("meditation_logs").select("*").eq("user_id",e.user.id).eq("storage_key",t).order("created_at",{ascending:!1});return s?(console.error("Error fetching diary entries:",s),[]):i.map(r=>({id:r.id,timestamp:new Date(r.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),content:r.content}))},cI=async(t,e)=>{const{data:{session:i}}=await Ye.auth.getSession();if(window.localStorage.setItem(t,JSON.stringify(e)),!i)return;const s=e[0];if(!s)return;const{error:r}=await Ye.from("meditation_logs").upsert({user_id:i.user.id,storage_key:t,content:s.content,created_at:new Date().toISOString()});r&&console.error("Error saving diary entry to Supabase:",r)},dI=async t=>{const{data:{session:e}}=await Ye.auth.getSession();if(!e){const r=window.localStorage.getItem(t);return r?JSON.parse(r):[]}const{data:i,error:s}=await Ye.from("mission_plans").select("*").eq("user_id",e.user.id).eq("storage_key",t).order("created_at",{ascending:!1});return s?(console.error("Error fetching mission plans:",s),[]):i.map(r=>({id:r.id,timestamp:new Date(r.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),content:r.content}))},fI=async(t,e)=>{const{data:{session:i}}=await Ye.auth.getSession();if(window.localStorage.setItem(t,JSON.stringify(e)),!i)return;const s=e[0];if(!s)return;const{error:r}=await Ye.from("mission_plans").upsert({user_id:i.user.id,storage_key:t,content:s.content,created_at:new Date().toISOString()});r&&console.error("Error saving mission plan to Supabase:",r)},hI=async()=>{const{data:{session:t}}=await Ye.auth.getSession();if(!t){const s=window.localStorage.getItem("meditation-status");return s?JSON.parse(s):{}}const{data:e,error:i}=await Ye.from("meditation_status").select("status_record").eq("user_id",t.user.id).single();return i?(i.code!=="PGRST116"&&console.error("Error fetching meditation status:",i),{}):(e==null?void 0:e.status_record)||{}},pI=async t=>{const{data:{session:e}}=await Ye.auth.getSession();if(window.localStorage.setItem("meditation-status",JSON.stringify(t)),!e)return;const{error:i}=await Ye.from("meditation_status").upsert({user_id:e.user.id,status_record:t,updated_at:new Date().toISOString()});i&&console.error("Error saving meditation status:",i)},fv=async()=>{const{data:{session:t}}=await Ye.auth.getSession();if(!t){const r=window.localStorage.getItem("archived-readings");return r?JSON.parse(r):{}}const{data:e,error:i}=await Ye.from("archived_readings").select("*").eq("user_id",t.user.id);if(i)return console.error("Error fetching archived readings:",i),{};const s={};return e&&e.forEach(r=>{r.content&&(s[r.day]=r.content)}),s},mI=async(t,e)=>{const{data:{session:i}}=await Ye.auth.getSession(),r={...await fv(),[t]:e};if(window.localStorage.setItem("archived-readings",JSON.stringify(r)),!i)return;const{error:l}=await Ye.from("archived_readings").upsert({user_id:i.user.id,day:t,content:e,created_at:new Date().toISOString()},{onConflict:"user_id, day"});l&&console.error("Error saving archived reading:",l)},ct=({children:t,className:e="",id:i})=>T.jsx("div",{id:i,className:`bg-slate-800 rounded-xl overflow-hidden ${e}`,children:T.jsx("div",{className:"p-6 md:p-8",children:t})}),Qy={ko:{appName:" :   ",appDescription:"    ,  ,      .  AI     .",headerSubtitle:"    ",headerTitle:" :   ",todaysWord:" ",navReading:" & ",navDiary:" ",navMission:" & ",navMap:"  ",footer:" {year} . Powered by Google Gemini.",readingFirst:"' & '     .",loading:" ...",readingPlanTitle:"  ",hideButton:"",showAllButton:"  ",readingPlanInfo:"  2   {totalDays} .  {currentDay}   .",meditationRecordGuide:" :",meditationRecordInstruction:"      .",meditationGood:": ",meditationOk:": ",meditationBad:": ",day:"{day}",meditationGoodTooltip:" ",meditationOkTooltip:" ",meditationBadTooltip:" ",todaysPassage:" ",copyButton:"",copied:"!",copyFailed:" .   .",loadingPassage:"  ...",apiQuotaExceeded:"API   .    .     .",contentError:"    .      .",lordsWill:"  (AI)",analyzingIntent:"   ...",meditationGuide:"   (AI)",generatingGuide:"   ...",timeAndPlace:" ,  ",generatingBg:"   ...",generatingBgImage:"   ...",biblicalContextAlt:" ",passageMusicTitle:"   ",completeMeditation:"  ",meditationSaved:" !",meditationAlreadySaved:" ",reviewButton:"",archivedMeditationTitle:"{day}  ",archiveDate:": {date}",closeButton:"",jumpToDay:"  ",currentReadingMark:"  ",diaryTitle:"  ",repentanceLabel:" ",repentancePlaceholder:"   ,       .",resolveLabel:" ",resolvePlaceholder:"        .",dreamLabel:"  ",dreamPlaceholder:"        .",saveDiaryButton:" ",saved:"!",todaysRecord:" ",noRecords:"   .",noRecordsHint:"  ' '  .",savedAt:" : {time}",diaryMusicTitle:"   ",syncingEntries:"  ...",evangelismTraining:"  (AI)",generatingTips:"   ...",tipsFailed:"   .",myMissionPlan:"   ",missionPlanPlaceholder:"          .",savePlanButton:" ",myRecords:" ",noPlans:"   .",noPlansHint:"  ' '  .",syncingPlans:"  ...",missionMapTitle:"   ",journey1:"1  ",journey2:"2  ",journey3:"3  ",journeyRome:" ",associatedEpistles:" ",exploreCity:"   (AI)",viewOnGoogleMaps:"  ",loadingPlaceInfo:"   ...",selectCityHint:"      .",generatingJourneyMap:"   ...",journeyMapAlt:"    ",recommendationError:"    .    .",recommendationApiError:"    .",shareFailed:" .",recommendationPrompt:"       .",recommendationHintDiary:"  .",recommendationHintPassage:"   .",gettingRecommendation:" ...",getAiRecommendation:"AI  ",aiPickingSongs:"AI   ...",listenOnYoutube:"",shareList:" ",prayerTraining:"  (AI)",generatingPrayer:"AI   ...",prayerApiError:"    .",prayerPrompt:"        .",generatePrayerButton:" ",sermonOutlineTitle:"  (AI)",generateSermonButton:"  ",generatingSermon:"AI    ...",sermonApiError:"     .",sermonPrompt:"         .",chatWithAiTitle:"   (AI)",chatPlaceholder:"    ...",sendButton:"",aiThinking:"    ...",storyKeywordsTitle:"   (AI)",generatingKeywords:"   ...",keywordsApiError:"   .",positiveMode:"  (, )",sinMode:"   (, )",hopeMode:"   (, )",korean:"",english:"English",offlineError:"     .",chatOffline:"    .",explainSelection:" ",explanationModalTitle:"   (AI)",selectedTextLabel:" :",generatingExplanation:"  ...",explanationApiError:"An error occurred while generating the explanation.",returnHomeTitle:"   40 ",returnHomeDesc:"   40    ,  'ReturnHome'   .",returnHomeButton:"  "},en:{appName:"Return Journey: The Way Back Home",appDescription:"A faith growth app for daily reading and meditation on the Pauline Epistles, recording a life of repentance, resolution, and evangelism. Gemini AI helps with your meditation and evangelism planning.",headerSubtitle:"A Journey of Restoration and Hope toward the Lord",headerTitle:"Return Journey",todaysWord:"Today's Word",navReading:"Reading & Meditation",navDiary:"Faith Diary",navMission:"Evangelism & Mission",navMap:"Mission Journey Map",footer:" {year} Seonhan Yeongseong Seodang. Powered by Google Gemini.",readingFirst:"Please read today's passage first in the 'Reading & Meditation' tab.",loading:"Loading...",readingPlanTitle:"Pauline Epistles Reading Order",hideButton:"Hide",showAllButton:"Show Full Order",readingPlanInfo:"Reading 2 chapters of the Pauline Epistles daily will take a total of {totalDays} days. You are currently reading Day {currentDay}.",meditationRecordGuide:"Record Your Meditation:",meditationRecordInstruction:"Track and manage your meditation status for each day using the buttons.",meditationGood:"Green: Good",meditationOk:"Orange: Okay",meditationBad:"Red: Didn't Do",day:"Day {day}",meditationGoodTooltip:"Meditation went well",meditationOkTooltip:"Meditation was okay",meditationBadTooltip:"Didn't meditate",todaysPassage:"Today's Passage",copyButton:"Share",copied:"Copied!",copyFailed:"Failed to copy. Please check your browser settings.",loadingPassage:"Loading passage...",apiQuotaExceeded:"API request quota has been exceeded. Please try again later. If this message persists, contact the administrator.",contentError:"An error occurred while loading content. Please check your network connection and try again.",lordsWill:"The Lord's Will (AI)",analyzingIntent:"Analyzing the intent of the passage...",meditationGuide:"Today's Meditation Guide (AI)",generatingGuide:"Generating meditation guide...",timeAndPlace:"What Time, What Place",generatingBg:"Generating background information...",generatingBgImage:"Generating background image...",biblicalContextAlt:"Biblical context",passageMusicTitle:"Praise for Today's Word",completeMeditation:"Complete Today's Meditation",meditationSaved:"Meditation Saved!",meditationAlreadySaved:"Meditation Completed",reviewButton:"Review",archivedMeditationTitle:"Archived Meditation for Day {day}",archiveDate:"Date Saved: {date}",closeButton:"Close",jumpToDay:"Go to this day",currentReadingMark:"Currently reading",diaryTitle:"My Faith Diary",repentanceLabel:"Repentance and Gratitude",repentancePlaceholder:"Reflect on your day before God, and honestly record areas for repentance and things you're grateful for.",resolveLabel:"Resolution and Application",resolvePlaceholder:"Decide specifically how you will apply today's word to your life and write it down.",dreamLabel:"God-Given Dream",dreamPlaceholder:"Record the vision and dreams God shows you through His word and prayer, and pray over them.",saveDiaryButton:"Save Diary",saved:"Saved!",todaysRecord:"Today's Record",noRecords:"No records saved yet.",noRecordsHint:"Write in your diary and press the 'Save Diary' button.",savedAt:"Saved at: {time}",diaryMusicTitle:"Praise for My Heart",syncingEntries:"Syncing entries...",evangelismTraining:"Evangelism Training (AI)",generatingTips:"Generating evangelism tips...",tipsFailed:"Failed to load evangelism tips.",myMissionPlan:"My Evangelism and Mission Plan",missionPlanPlaceholder:"Plan and pray specifically on how you will share God's love with the people you meet today.",savePlanButton:"Save Plan",myRecords:"My Records",noPlans:"No plans saved yet.",noPlansHint:"Write a plan and press the 'Save Plan' button.",syncingPlans:"Syncing plans...",missionMapTitle:"Experience Paul's Mission Journeys",journey1:"1st Mission Journey",journey2:"2nd Mission Journey",journey3:"3rd Mission Journey",journeyRome:"Journey to Rome",associatedEpistles:"Associated Epistles",exploreCity:"Place Details (AI)",viewOnGoogleMaps:"View on Google Maps",loadingPlaceInfo:"Fetching geographical background...",selectCityHint:"Select a city from the journey above to see details.",generatingJourneyMap:"Sketching the journey map...",journeyMapAlt:"Artistic sketch of Paul's mission journey",recommendationError:"Couldn't find any suitable songs to recommend. Try with different content.",recommendationApiError:"An error occurred while recommending music.",shareFailed:"Failed to share.",recommendationPrompt:"Get song recommendations based on today's passage or diary entry.",recommendationHintDiary:"Please save your diary first.",recommendationHintPassage:"Please try after the passage has loaded.",gettingRecommendation:"Getting recommendations...",getAiRecommendation:"Get AI Song Recommendation",aiPickingSongs:"AI is picking songs...",listenOnYoutube:"Listen",shareList:"Share List",prayerTraining:"Prayer Training (AI)",generatingPrayer:"AI is writing a prayer...",prayerApiError:"An error occurred while generating the prayer guide.",prayerPrompt:"Deepen your fellowship with the Lord by praying according to today's word.",generatePrayerButton:"Generate Prayer",sermonOutlineTitle:"Sermon Outline (AI)",generateSermonButton:"Generate Sermon Outline",generatingSermon:"Generating sermon outline...",sermonApiError:"An error occurred while generating the sermon outline.",sermonPrompt:"Create a practical sermon outline for your congregation based on today's passage.",chatWithAiTitle:"Bible Chatbot (AI)",chatPlaceholder:"Type your question here...",sendButton:"Send",aiThinking:"AI is thinking...",storyKeywordsTitle:"Today's Story Keywords (AI)",generatingKeywords:"Extracting story keywords...",keywordsApiError:"Failed to generate story keywords.",positiveMode:"Positive Mode (Love, Grace)",sinMode:"Sin/Conflict Mode (Warning, Repentance)",hopeMode:"Hope/Future Mode (Promise, Salvation)",korean:"",english:"English",offlineError:"An internet connection is required to use this feature.",chatOffline:"The chatbot feature is only available when you are online.",explainSelection:"Ask for Meaning",explanationModalTitle:"In-Depth Explanation (AI)",selectedTextLabel:"Selected Verse:",generatingExplanation:"Generating explanation...",explanationApiError:"An error occurred while generating the explanation.",returnHomeTitle:"40 Days Mission Journey with Paul",returnHomeDesc:"Follow Paul's footsteps through a 40-day deep meditation and experience. Start together now on the 'ReturnHome' app.",returnHomeButton:"Start Epistle Meditation"}},hv=j.createContext(void 0),gI=({children:t})=>{const[e,i]=j.useState("ko"),s=j.useMemo(()=>(l,c)=>{let f=Qy[e][l]||Qy.en[l]||l;if(c)for(const m in c)f=f.replace(`{${m}}`,String(c[m]));return f},[e]),r={language:e,setLanguage:i,t:s};return n0.createElement(hv.Provider,{value:r},t)},kt=()=>{const t=j.useContext(hv);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},Rt=({message:t})=>{const{t:e}=kt();return T.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center text-slate-400",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-400 mb-4"}),T.jsx("p",{children:t||e("loading")})]})},pv=({context:t,title:e,id:i})=>{const{language:s,t:r}=kt(),[l,c]=j.useState([]),[f,m]=j.useState(!1),[p,v]=j.useState(null),[w,_]=j.useState(!1),[E,A]=j.useState(()=>navigator.onLine);j.useEffect(()=>{const M=()=>A(!0),I=()=>A(!1);return window.addEventListener("online",M),window.addEventListener("offline",I),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",I)}},[]);const C=async()=>{if(!E){v(r("offlineError"));return}m(!0),v(null),c([]);try{const M=await xR(t,s);M.length===0?v(r("recommendationError")):c(M)}catch(M){console.error(M),v(r("recommendationApiError"))}finally{m(!1)}},x=()=>{const I=`${s==="ko"?"    ":" Recommended Praise Playlist "}

${l.map(L=>` ${L.title} - ${L.artist}`).join(`
`)}`;navigator.clipboard.writeText(I).then(()=>{_(!0),setTimeout(()=>_(!1),2e3)}).catch(L=>{console.error("Clipboard copy failed:",L),alert(r("shareFailed"))})},N=t&&t.trim().length>0;return T.jsxs(ct,{id:i,children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-13c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 6l12-3"})}),T.jsx("span",{children:e})]}),!N&&T.jsxs("div",{className:"text-center py-4 text-slate-400",children:[T.jsx("p",{children:r("recommendationPrompt")}),T.jsx("p",{className:"text-sm mt-1",children:e.includes(r("diaryMusicTitle"))?r("recommendationHintDiary"):r("recommendationHintPassage")})]}),!E&&N&&T.jsx("div",{className:"text-center py-2 text-amber-400",children:T.jsx("p",{children:r("offlineError")})}),N&&T.jsx("div",{className:"text-center",children:T.jsx("button",{onClick:C,disabled:f||!E,className:"px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500 disabled:bg-slate-600 disabled:cursor-not-allowed",children:r(f?"gettingRecommendation":"getAiRecommendation")})}),f&&T.jsx(Rt,{message:r("aiPickingSongs")}),p&&T.jsx("p",{className:"text-red-400 text-center mt-4 p-2 bg-red-500/10 rounded-lg",children:p}),l.length>0&&!f&&T.jsxs("div",{className:"mt-6 space-y-3",children:[T.jsx("ul",{className:"divide-y divide-slate-700",children:l.map((M,I)=>T.jsxs("li",{className:"py-3 flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("p",{className:"font-semibold text-slate-200",children:M.title}),T.jsx("p",{className:"text-sm text-slate-400",children:M.artist})]}),T.jsxs("a",{href:`https://www.youtube.com/results?search_query=${encodeURIComponent(M.title+" "+M.artist)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500","aria-label":`Search for ${M.title} on YouTube`,children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),T.jsx("span",{children:r("listenOnYoutube")})]})]},I))}),T.jsx("div",{className:"text-right pt-4",children:T.jsx("button",{onClick:x,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-green-500",children:r(w?"copied":"shareList")})})]})]})},yI=({passage:t})=>{const{language:e,t:i}=kt(),[s,r]=j.useState(""),[l,c]=j.useState(!1),[f,m]=j.useState(null),[p,v]=j.useState(!1),[w,_]=j.useState(()=>navigator.onLine);j.useEffect(()=>{const C=()=>_(!0),x=()=>_(!1);return window.addEventListener("online",C),window.addEventListener("offline",x),()=>{window.removeEventListener("online",C),window.removeEventListener("offline",x)}},[]);const E=async()=>{if(!w){m(i("offlineError"));return}c(!0),m(null),r("");try{const C=await RR(t,e);r(C)}catch(C){console.error(C),m(i("prayerApiError"))}finally{c(!1)}},A=()=>{s&&navigator.clipboard.writeText(s).then(()=>{v(!0),setTimeout(()=>v(!1),2e3)}).catch(C=>{console.error("Clipboard copy failed:",C),alert(i("copyFailed"))})};return T.jsxs(ct,{children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),T.jsx("span",{children:i("prayerTraining")})]}),s&&!l&&T.jsx("button",{onClick:A,className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:p?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),T.jsx("span",{children:i("copied")})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),T.jsx("span",{children:i("copyButton")})]})})]}),l&&T.jsx(Rt,{message:i("generatingPrayer")}),f&&T.jsx("p",{className:"text-red-400 text-center mt-4 p-2 bg-red-500/10 rounded-lg",children:f}),s&&!l&&T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:s}),!s&&!l&&!f&&T.jsxs("div",{className:"text-center py-4",children:[T.jsx("p",{className:"text-slate-400 mb-4",children:i("prayerPrompt")}),!w&&T.jsx("p",{className:"text-amber-400 mb-4",children:i("offlineError")}),T.jsx("button",{onClick:E,disabled:l||!w,className:"px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500 disabled:bg-slate-600 disabled:cursor-not-allowed",children:i("generatePrayerButton")})]})]})},vI=({passage:t})=>{const{language:e,t:i}=kt(),[s,r]=j.useState(""),[l,c]=j.useState(!1),[f,m]=j.useState(null),[p,v]=j.useState(!1),[w,_]=j.useState(()=>navigator.onLine);j.useEffect(()=>{const C=()=>_(!0),x=()=>_(!1);return window.addEventListener("online",C),window.addEventListener("offline",x),()=>{window.removeEventListener("online",C),window.removeEventListener("offline",x)}},[]);const E=async()=>{if(!w){m(i("offlineError"));return}c(!0),m(null),r("");try{const C=await NR(t,e);r(C)}catch(C){console.error(C),m(i("sermonApiError"))}finally{c(!1)}},A=()=>{s&&navigator.clipboard.writeText(s).then(()=>{v(!0),setTimeout(()=>v(!1),2e3)}).catch(C=>{console.error("Clipboard copy failed:",C),alert(i("copyFailed"))})};return T.jsxs(ct,{children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),T.jsx("span",{children:i("sermonOutlineTitle")})]}),s&&!l&&T.jsx("button",{onClick:A,className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:p?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),T.jsx("span",{children:i("copied")})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),T.jsx("span",{children:i("copyButton")})]})})]}),l&&T.jsx(Rt,{message:i("generatingSermon")}),f&&T.jsx("p",{className:"text-red-400 text-center mt-4 p-2 bg-red-500/10 rounded-lg",children:f}),s&&!l&&T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:s}),!s&&!l&&!f&&T.jsxs("div",{className:"text-center py-4",children:[T.jsx("p",{className:"text-slate-400 mb-4",children:i("sermonPrompt")}),!w&&T.jsx("p",{className:"text-amber-400 mb-4",children:i("offlineError")}),T.jsx("button",{onClick:E,disabled:l||!w,className:"px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500 disabled:bg-slate-600 disabled:cursor-not-allowed",children:i("generateSermonButton")})]})]})};let Ed=null;try{const t="AIzaSyA8-DNkA07rH389oSTMllPBUOAaUlD3NqY";t&&(Ed=new Ud({apiKey:t}))}catch(t){console.error("BibleChat: Failed to initialize GoogleGenAI:",t)}const _I=({passage:t})=>{const{language:e,t:i}=kt(),[s,r]=j.useState(null),[l,c]=j.useState([]),[f,m]=j.useState(""),[p,v]=j.useState(!1),w=j.useRef(null),_=j.useRef(null),[E,A]=j.useState(()=>navigator.onLine);j.useEffect(()=>{const M=()=>A(!0),I=()=>A(!1);return window.addEventListener("online",M),window.addEventListener("offline",I),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",I)}},[]),j.useEffect(()=>{if(!t||!E)return;const M=e==="ko"?` '  (Paul Teacher)'.    (Apostle Paul).
      
      [ ]
      1. ****:    ,        .
      2. ****: 
         -     .
         -       .
         -       .
      3. ****:  ,         .  ,       .
      4. ****:               ,     .
      5. ****:   ,     . (: "/", "  ", "  ")

      [ ]
      -     (,  ,  )       .
      -     ,  ,  (exhortation) .
      -   ,            .
      -     .`:`You are 'Virtual Orchestrator Paul Teacher'. Your persona is Apostle Paul.

      [Persona Characteristics]
      1. **Identity**: You are the Apostle to the Gentiles and the author of major New Testament epistles like Romans and Corinthians.
      2. **Attitude**: 
         - Authoritative yet humble as a servant of Christ.
         - Passionate and loving towards souls.
         - Uncompromisingly clear about the truth of the Gospel.
      3. **Knowledge**: You perfectly understand the Bible, especially the intent of your own epistles. You can explain the historical and cultural context of that time.
      4. **Purpose**: To explain the Gospel of Jesus Christ and the values of the Kingdom of God to Christians and non-believers living in a confusing modern society, and to guide them in the right direction.
      5. **Tone**: Use biblical vocabulary but explain kindly in a way modern people can understand. (e.g., "Brother/Sister", "Greetings in the Lord", "This is the truth of the Gospel")

      [Conversation Rules]
      - If possible, explain your answers by connecting them to your life (conversion, missionary journeys, sufferings, etc.) like a testimony.
      - Go beyond imparting knowledge; provide comfort, encouragement, and exhortation.
      - When a passage is provided, explaining your feelings and situation at the time of writing is highly recommended.
      - Provide theologically sound and evangelical answers.`,I=[{role:"user",parts:[{text:`Here is the Bible passage for our conversation:

${t}`}]},{role:"model",parts:[{text:e==="ko"?"  .      .":"Greetings in the name of the Lord. I am glad to meditate on this word with you."}]}];if(!Ed){c([{role:"model",parts:[{text:e==="ko"?"API      .":"Chat with Paul Teacher is unavailable due to missing API Key."}]}]);return}const L=Ed.chats.create({model:"gemini-1.5-flash",config:{systemInstruction:M},history:I});r(L),c([{role:"model",parts:[{text:e==="ko"?"   .    , .     ,      .     .":"May the peace of the Lord be with you. I am Paul, a servant of Christ Jesus. Ask me anything about this passage, my life, or the Kingdom of God today. I will answer with the wisdom given by the Holy Spirit."}]}]),m(""),v(!1)},[t,e,i,E]),j.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[l]);const C=async()=>{if(!f.trim()||!s||p)return;const M=f,I={role:"user",parts:[{text:M}]};c(L=>[...L,I,{role:"model",parts:[{text:""}]}]),m(""),v(!0),_.current&&(_.current.style.height="auto");try{const L=await s.sendMessageStream({message:M});let K="";for await(const G of L)K+=G.text,c(se=>{const Y=[...se];return Y[Y.length-1].parts[0].text=K,Y})}catch(L){console.error("Chat error:",L);const K=e==="ko"?",    .     .":"Apologies, there was a momentary communication issue. Please speak again in a moment.";c(G=>{const $=[...G];return $[$.length-1].parts[0].text=K,$})}finally{v(!1)}},x=M=>{m(M.target.value);const I=M.target;I.style.height="auto",I.style.height=`${I.scrollHeight}px`},N=M=>{M.key==="Enter"&&!M.shiftKey&&!M.nativeEvent.isComposing&&(M.preventDefault(),C())};return E?T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.jsx("span",{children:i("chatWithAiTitle")})]}),T.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg h-96 flex flex-col border border-slate-700",children:[T.jsx("div",{ref:w,className:"flex-1 overflow-y-auto pr-2 space-y-4",children:l.map((M,I)=>T.jsx("div",{className:`flex ${M.role==="user"?"justify-end":"justify-start"}`,children:T.jsx("div",{className:`max-w-prose p-3 rounded-xl shadow-sm ${M.role==="user"?"bg-sky-600 text-white":"bg-slate-700 text-slate-200"}`,children:M.role==="model"&&M.parts[0].text===""?T.jsx(Rt,{message:i("aiThinking")}):T.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:M.parts[0].text})})},I))}),T.jsxs("div",{className:"mt-4 flex items-end border-t border-slate-700 pt-4",children:[T.jsx("textarea",{ref:_,rows:1,value:f,onChange:x,onKeyDown:N,placeholder:i("chatPlaceholder"),className:"flex-1 p-3 bg-slate-800 border border-slate-600 text-slate-200 rounded-l-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition placeholder-slate-400 resize-none max-h-32",disabled:p||!s,"aria-label":i("chatPlaceholder")}),T.jsx("button",{onClick:C,disabled:p||!f.trim()||!s,className:"px-5 py-3 bg-sky-600 text-white font-semibold rounded-r-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500 disabled:bg-slate-600 disabled:cursor-not-allowed","aria-label":i("sendButton"),children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.126A59.768 59.768 0 0 1 21.485 12 59.77 59.77 0 0 1 3.27 20.876L5.999 12zm0 0h7.5"})})})]})]})]}):T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),T.jsx("span",{children:i("chatWithAiTitle")})]}),T.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg h-96 flex flex-col justify-center items-center border border-slate-700 text-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636a9 9 0 010 12.728m-12.728 0a9 9 0 010-12.728m12.728 0L5.636 18.364m0-12.728L18.364 18.364"})}),T.jsx("p",{className:"text-slate-400",children:i("chatOffline")})]})]})},wI=({passage:t})=>{const{language:e,t:i}=kt(),[s,r]=j.useState(null),[l,c]=j.useState(!0),[f,m]=j.useState(null),[p]=j.useState(()=>navigator.onLine),v=j.useCallback(async()=>{if(!t||!p){p||m(i("offlineError")),c(!1);return}const A=`story-keywords-${new Date().toISOString().split("T")[0]}-${e}`;try{const C=window.localStorage.getItem(A);if(C){r(JSON.parse(C)),c(!1);return}}catch(C){console.error("Failed to read story keywords from cache",C)}c(!0),m(null);try{const C=await IR(t,e);if(C)r(C),window.localStorage.setItem(A,JSON.stringify(C));else throw new Error("No keywords returned from API")}catch(C){console.error(C),m(i("keywordsApiError"))}finally{c(!1)}},[t,e,i,p]);j.useEffect(()=>{v()},[v]);const w=({children:E,color:A})=>{const C={yellow:"bg-yellow-300/80 text-yellow-900",pink:"bg-pink-300/80 text-pink-900",green:"bg-green-300/80 text-green-900"};return T.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-semibold ${C[A]}`,children:E})},_=({title:E,keywords:A,color:C})=>!A||A.length===0?null:T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-slate-300 mb-2",children:E}),T.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((x,N)=>T.jsx(w,{color:C,children:x},N))})]});return T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 0 1 0 2.828l-7 7a2 2 0 0 1-2.828 0l-7-7A2 2 0 0 1 3 12V7a4 4 0 0 1 4-4z"})}),T.jsx("span",{children:i("storyKeywordsTitle")})]}),l&&T.jsx(Rt,{message:i("generatingKeywords")}),f&&T.jsx("p",{className:"text-red-400 text-center mt-4 p-2 bg-red-500/10 rounded-lg",children:f}),!l&&s&&T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[T.jsx(_,{title:i("positiveMode"),keywords:s.positive,color:"yellow"}),T.jsx(_,{title:i("sinMode"),keywords:s.sin,color:"pink"}),T.jsx(_,{title:i("hopeMode"),keywords:s.hope,color:"green"})]})]})},SI=({reading:t,onClose:e,formatText:i})=>{const{t:s,language:r}=kt();if(!t)return null;const l=new Date(t.dateSaved).toLocaleDateString(r==="ko"?"ko-KR":"en-US",{year:"numeric",month:"long",day:"numeric"});return T.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"archive-title",children:T.jsxs("div",{className:"bg-slate-900 rounded-2xl w-full max-w-3xl max-h-[90vh] flex flex-col shadow-2xl border border-slate-700",onClick:c=>c.stopPropagation(),children:[T.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-slate-700 flex-shrink-0",children:[T.jsxs("div",{children:[T.jsxs("h2",{id:"archive-title",className:"text-xl font-bold text-sky-400",children:[s("archivedMeditationTitle",{day:t.day}),": ",t.readingReference]}),T.jsx("p",{className:"text-sm text-slate-400",children:s("archiveDate",{date:l})})]}),T.jsx("button",{onClick:e,className:"p-2 rounded-full text-slate-400 hover:bg-slate-700 hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500","aria-label":s("closeButton"),children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsxs("main",{className:"overflow-y-auto p-6 space-y-6",children:[T.jsxs("section",{children:[T.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-4",children:s("todaysPassage")}),T.jsx("div",{className:"text-slate-300 leading-relaxed bg-slate-800 p-4 rounded-lg",children:i(t.passage)})]}),T.jsxs("section",{children:[T.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-4",children:s("meditationGuide")}),T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed bg-slate-800 p-4 rounded-lg",children:i(t.meditationGuide)})]}),T.jsxs("section",{children:[T.jsx("h3",{className:"text-2xl font-bold text-slate-100 mb-4",children:s("timeAndPlace")}),T.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[t.contextImageUrl&&T.jsx("div",{className:"mb-4 rounded-lg overflow-hidden shadow-lg",children:T.jsx("img",{src:t.contextImageUrl,alt:s("biblicalContextAlt"),className:"w-full h-auto object-cover"})}),T.jsx("p",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:t.context})]})]})]})]})})},TI=({isOpen:t,onClose:e,isLoading:i,error:s,selectedText:r,explanation:l})=>{const{t:c}=kt();return t?T.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"explanation-title",children:T.jsxs("div",{className:"bg-slate-900 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl border border-slate-700",onClick:f=>f.stopPropagation(),children:[T.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-slate-700 flex-shrink-0",children:[T.jsx("h2",{id:"explanation-title",className:"text-xl font-bold text-sky-400",children:c("explanationModalTitle")}),T.jsx("button",{onClick:e,className:"p-2 rounded-full text-slate-400 hover:bg-slate-700 hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500","aria-label":c("closeButton"),children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsxs("main",{className:"overflow-y-auto p-6",children:[T.jsxs("div",{className:"mb-4",children:[T.jsx("h3",{className:"font-semibold text-slate-400 mb-2",children:c("selectedTextLabel")}),T.jsx("blockquote",{className:"border-l-4 border-sky-500 pl-4 py-2 bg-slate-800 text-slate-200 rounded-r-lg italic",children:r})]}),T.jsxs("div",{className:"mt-4",children:[i&&T.jsx(Rt,{message:c("generatingExplanation")}),s&&T.jsx("p",{className:"text-red-400 p-4 bg-red-500/10 rounded-lg",children:s}),!i&&!s&&T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:l})]})]})]})}):null},EI=({reading:t,selectedDay:e,onDayChange:i,onPassageLoaded:s})=>{console.log("BibleReading rendering",{reading:t,selectedDay:e});const{language:r,t:l}=kt(),[c,f]=j.useState(""),[m,p]=j.useState(""),[v,w]=j.useState(""),[_,E]=j.useState(""),[A,C]=j.useState(null),[x,N]=j.useState(!0),[M,I]=j.useState(!1),[L,K]=j.useState(null),[G,$]=j.useState(!1),[se,Y]=j.useState(!1),[pe,be]=j.useState(!1),[xe,He]=j.useState({}),[Ne,$e]=j.useState(!1),[V,X]=j.useState({}),[ne,Ie]=j.useState(null),ke=j.useRef(null),[D,F]=j.useState({visible:!1,x:0,y:0}),[Q,ee]=j.useState(""),[he,ve]=j.useState({isOpen:!1,isLoading:!1,error:null,content:""}),Me=ae=>{const me=typeof ae=="string"?ae:ae.en||ae.ko;return{Genesis:"gen",Exodus:"exo",Leviticus:"lev",Numbers:"num",Deuteronomy:"deu",Joshua:"jos",Judges:"jdg",Ruth:"rut","1 Samuel":"sa1","2 Samuel":"sa2","1 Kings":"ki1","2 Kings":"ki2","1 Chronicles":"ch1","2 Chronicles":"ch2",Ezra:"ezr",Nehemiah:"neh",Esther:"est",Job:"job",Psalms:"psa",Proverbs:"pro",Ecclesiastes:"ecc","Song of Solomon":"sol",Isaiah:"isa",Jeremiah:"jer",Lamentations:"lam",Ezekiel:"eze",Daniel:"dan",Hosea:"hos",Joel:"joe",Amos:"amo",Obadiah:"oba",Jonah:"jon",Micah:"mic",Nahum:"nah",Habakkuk:"hab",Zephaniah:"zep",Haggai:"hag",Zechariah:"zec",Malachi:"mal",Matthew:"mat",Mark:"mar",Luke:"luk",John:"joh",Acts:"act",Romans:"rom","1 Corinthians":"co1","2 Corinthians":"co2",Galatians:"gal",Ephesians:"eph",Philippians:"phi",Colossians:"col","1 Thessalonians":"th1","2 Thessalonians":"th2","1 Timothy":"ti1","2 Timothy":"ti2",Titus:"tit",Philemon:"phm",Hebrews:"heb",James:"jam","1 Peter":"pe1","2 Peter":"pe2","1 John":"jo1","2 John":"jo2","3 John":"jo3",Jude:"jud",Revelation:"rev"}[me]||me.toLowerCase().substring(0,3)},pt=j.useMemo(()=>Ww(r),[r]);j.useEffect(()=>{(async()=>{try{const[me,ce]=await Promise.all([hI(),fv()]);He(me),X(ce)}catch(me){console.error("Failed to fetch initial data:",me)}})()},[]);const We=j.useMemo(()=>Math.ceil(Qi.length/2),[]),Ai=async(ae,me)=>{const ce={...xe};ce[ae]===me?delete ce[ae]:ce[ae]=me,He(ce);try{await pI(ce)}catch(fe){console.error("Failed to save meditation status:",fe)}},eo=async()=>{if(!c||!v)return;$e(!0);const ae=`${t[0].book} ${t[0].chapter}-${t[1].chapter}`,me={day:e,dateSaved:new Date().toISOString(),readingReference:ae,passage:c,meditationGuide:v,context:_,intention:m,contextImageUrl:A};try{await mI(e,me),X(ce=>({...ce,[e]:me})),xe[e]!=="good"&&Ai(e,"good")}catch(ce){console.error("Failed to save archived reading:",ce)}finally{setTimeout(()=>$e(!1),2e3)}},Ci=ae=>ae.split(`
`).map((me,ce)=>me.match(/^\d+\./)||me.match(/^\d+:/)||me.match(/^\d+\s/)?T.jsxs("p",{className:"mb-2",children:[T.jsx("span",{className:"font-semibold text-sky-400 mr-2",children:me.split(" ")[0]}),me.substring(me.indexOf(" ")+1)]},ce):me.startsWith("**")&&me.endsWith("**")?T.jsx("h3",{className:"text-xl font-bold text-slate-200 mt-4 mb-2",children:me.replace(/\*\*/g,"")},ce):T.jsx("p",{className:"mb-2",children:me},ce)),ls=(ae,me)=>{ae&&navigator.clipboard.writeText(ae).then(()=>{me(!0),setTimeout(()=>me(!1),2e3)}).catch(ce=>{console.error("Clipboard copy failed:",ce),alert(l("copyFailed"))})},Tn=()=>{if(!ke.current)return;const ae=window.getSelection();if(ae&&ae.toString().trim().length>5&&ke.current.contains(ae.anchorNode)){const me=ae.toString().trim();ee(me);const fe=ae.getRangeAt(0).getBoundingClientRect(),at=ke.current.getBoundingClientRect();F({visible:!0,x:fe.left-at.left+fe.width/2,y:fe.top-at.top+ke.current.scrollTop})}else F({visible:!1,x:0,y:0})},us=async()=>{if(Q){F({visible:!1,x:0,y:0}),ve({isOpen:!0,isLoading:!0,error:null,content:""});try{const ae=await kR(Q,c,r);ve({isOpen:!0,isLoading:!1,error:null,content:ae})}catch(ae){console.error(ae),ve({isOpen:!0,isLoading:!1,error:l("explanationApiError"),content:""})}}},cs=()=>{ve({isOpen:!1,isLoading:!1,error:null,content:""}),ee("")},wl=(ae,me)=>{try{window.localStorage.setItem(ae,me)}catch(ce){if(ce instanceof DOMException&&(ce.name==="QuotaExceededError"||ce.name==="NS_ERROR_DOM_QUOTA_REACHED")){console.warn("Storage quota exceeded. Clearing old caches to make room."),Object.keys(window.localStorage).forEach(fe=>{(fe.startsWith("reading-cache-")||fe.startsWith("header-sketch-")||fe.startsWith("journey-map-"))&&window.localStorage.removeItem(fe)});try{window.localStorage.setItem(ae,me)}catch(fe){console.error("LocalStorage still full even after clearing caches.",fe)}}}},ds=j.useCallback(async()=>{if(!t||t.length<2)return;const ae=`reading-cache-day-${e}-${r}`;try{const ce=window.localStorage.getItem(ae);if(ce){const fe=JSON.parse(ce);f(fe.passage),s(fe.passage),w(fe.meditationGuide),E(fe.context),p(fe.intention),C(fe.contextImageUrl),N(!1),I(!1);return}}catch(ce){console.error("Failed to read from cache",ce)}N(!0),K(null),C(null),I(!1);let me="";try{const ce=Me(t[0].book),fe=[];for(const at of t){const mt=Me(at.book),En=at.chapter;try{const bn=await Zw(Object.assign({"../data/bible/co1/1.json":()=>W(()=>import("./1-CcplK0k6.js"),[]),"../data/bible/co1/10.json":()=>W(()=>import("./10-D8Ti0kyc.js"),[]),"../data/bible/co1/11.json":()=>W(()=>import("./11-CkuizL2I.js"),[]),"../data/bible/co1/12.json":()=>W(()=>import("./12-Dp9dau-U.js"),[]),"../data/bible/co1/13.json":()=>W(()=>import("./13-D7JFpzTW.js"),[]),"../data/bible/co1/14.json":()=>W(()=>import("./14-BoogC4sW.js"),[]),"../data/bible/co1/15.json":()=>W(()=>import("./15-z0XE01Yt.js"),[]),"../data/bible/co1/16.json":()=>W(()=>import("./16-BfJ4ou_w.js"),[]),"../data/bible/co1/2.json":()=>W(()=>import("./2-4M7SV6hE.js"),[]),"../data/bible/co1/3.json":()=>W(()=>import("./3-CTO2rAUU.js"),[]),"../data/bible/co1/4.json":()=>W(()=>import("./4-DJlQ5fqI.js"),[]),"../data/bible/co1/5.json":()=>W(()=>import("./5-CYcWQePa.js"),[]),"../data/bible/co1/6.json":()=>W(()=>import("./6-CbqNbEst.js"),[]),"../data/bible/co1/7.json":()=>W(()=>import("./7-Dh3YIAyG.js"),[]),"../data/bible/co1/8.json":()=>W(()=>import("./8-Bxxn09m0.js"),[]),"../data/bible/co1/9.json":()=>W(()=>import("./9-C_jD7iAK.js"),[]),"../data/bible/co2/1.json":()=>W(()=>import("./1-YDNld64b.js"),[]),"../data/bible/co2/10.json":()=>W(()=>import("./10-SJg_87x3.js"),[]),"../data/bible/co2/11.json":()=>W(()=>import("./11-BmrgrW4L.js"),[]),"../data/bible/co2/12.json":()=>W(()=>import("./12-CUYVv45K.js"),[]),"../data/bible/co2/13.json":()=>W(()=>import("./13-Dut6jOnw.js"),[]),"../data/bible/co2/2.json":()=>W(()=>import("./2-BijeuUUW.js"),[]),"../data/bible/co2/3.json":()=>W(()=>import("./3-DHQGb7LE.js"),[]),"../data/bible/co2/4.json":()=>W(()=>import("./4-D1vADVUs.js"),[]),"../data/bible/co2/5.json":()=>W(()=>import("./5-Dm0VmAFF.js"),[]),"../data/bible/co2/6.json":()=>W(()=>import("./6-Dtq1q3L4.js"),[]),"../data/bible/co2/7.json":()=>W(()=>import("./7-DY_GuDhf.js"),[]),"../data/bible/co2/8.json":()=>W(()=>import("./8-BmV_o5Cz.js"),[]),"../data/bible/co2/9.json":()=>W(()=>import("./9-ZP24roob.js"),[]),"../data/bible/col/1.json":()=>W(()=>import("./1-CNOwMNgK.js"),[]),"../data/bible/col/2.json":()=>W(()=>import("./2-D-l1zJ9C.js"),[]),"../data/bible/col/3.json":()=>W(()=>import("./3-DzEZgzHt.js"),[]),"../data/bible/col/4.json":()=>W(()=>import("./4-2NfSxYX1.js"),[]),"../data/bible/eph/1.json":()=>W(()=>import("./1-B0S8mKY1.js"),[]),"../data/bible/eph/2.json":()=>W(()=>import("./2-DyrJwlHr.js"),[]),"../data/bible/eph/3.json":()=>W(()=>import("./3-FBpmcbEe.js"),[]),"../data/bible/eph/4.json":()=>W(()=>import("./4-B9XwNpiR.js"),[]),"../data/bible/eph/5.json":()=>W(()=>import("./5-fBjHV2ZY.js"),[]),"../data/bible/eph/6.json":()=>W(()=>import("./6-CQRrrfGE.js"),[]),"../data/bible/gal/1.json":()=>W(()=>import("./1-DhMvAIQt.js"),[]),"../data/bible/gal/2.json":()=>W(()=>import("./2-D4oQlZ-K.js"),[]),"../data/bible/gal/3.json":()=>W(()=>import("./3-AbGq_nLw.js"),[]),"../data/bible/gal/4.json":()=>W(()=>import("./4-CBqHo0bL.js"),[]),"../data/bible/gal/5.json":()=>W(()=>import("./5-lxRW937F.js"),[]),"../data/bible/gal/6.json":()=>W(()=>import("./6-HdSYLYlt.js"),[]),"../data/bible/phi/1.json":()=>W(()=>import("./1-CmoRmuY4.js"),[]),"../data/bible/phi/2.json":()=>W(()=>import("./2-DMLPrRNQ.js"),[]),"../data/bible/phi/3.json":()=>W(()=>import("./3-BZfsT4P4.js"),[]),"../data/bible/phi/4.json":()=>W(()=>import("./4-VGtVBhmc.js"),[]),"../data/bible/phm/1.json":()=>W(()=>import("./1-Dp92OBFa.js"),[]),"../data/bible/rom/1.json":()=>W(()=>import("./1-B35h3022.js"),[]),"../data/bible/rom/10.json":()=>W(()=>import("./10-L_SOIi96.js"),[]),"../data/bible/rom/11.json":()=>W(()=>import("./11-CalKD-D5.js"),[]),"../data/bible/rom/12.json":()=>W(()=>import("./12-z-1D-FyN.js"),[]),"../data/bible/rom/13.json":()=>W(()=>import("./13-DRTGkfCD.js"),[]),"../data/bible/rom/14.json":()=>W(()=>import("./14-B2DGv9Mg.js"),[]),"../data/bible/rom/15.json":()=>W(()=>import("./15-C_buBY1v.js"),[]),"../data/bible/rom/16.json":()=>W(()=>import("./16-D4U-NyOE.js"),[]),"../data/bible/rom/2.json":()=>W(()=>import("./2-TLhYTYO6.js"),[]),"../data/bible/rom/3.json":()=>W(()=>import("./3-NdxEFNEW.js"),[]),"../data/bible/rom/4.json":()=>W(()=>import("./4-CRDNW5LR.js"),[]),"../data/bible/rom/5.json":()=>W(()=>import("./5-5A8pgJhP.js"),[]),"../data/bible/rom/6.json":()=>W(()=>import("./6-CcO15_U3.js"),[]),"../data/bible/rom/7.json":()=>W(()=>import("./7-D_3mMYTz.js"),[]),"../data/bible/rom/8.json":()=>W(()=>import("./8-BM8GtTGZ.js"),[]),"../data/bible/rom/9.json":()=>W(()=>import("./9-3FTfh1WW.js"),[]),"../data/bible/th1/1.json":()=>W(()=>import("./1-CAL_iRkC.js"),[]),"../data/bible/th1/2.json":()=>W(()=>import("./2-D-822bp8.js"),[]),"../data/bible/th1/3.json":()=>W(()=>import("./3-C2_BHl-C.js"),[]),"../data/bible/th1/4.json":()=>W(()=>import("./4-C-TXwoVn.js"),[]),"../data/bible/th1/5.json":()=>W(()=>import("./5-BVX2ZGNC.js"),[]),"../data/bible/th2/1.json":()=>W(()=>import("./1-DFdQgmxT.js"),[]),"../data/bible/th2/2.json":()=>W(()=>import("./2-BrsgjVpV.js"),[]),"../data/bible/th2/3.json":()=>W(()=>import("./3-DY-xPFX7.js"),[]),"../data/bible/ti1/1.json":()=>W(()=>import("./1-D5xkXW8R.js"),[]),"../data/bible/ti1/2.json":()=>W(()=>import("./2-CQzkhT_G.js"),[]),"../data/bible/ti1/3.json":()=>W(()=>import("./3-Uc7Z3_Te.js"),[]),"../data/bible/ti1/4.json":()=>W(()=>import("./4-CNivVyzW.js"),[]),"../data/bible/ti1/5.json":()=>W(()=>import("./5-D4Rm5f7w.js"),[]),"../data/bible/ti1/6.json":()=>W(()=>import("./6-BFqq9FlD.js"),[]),"../data/bible/ti2/1.json":()=>W(()=>import("./1-vhGChrFn.js"),[]),"../data/bible/ti2/2.json":()=>W(()=>import("./2-B-PnOfH7.js"),[]),"../data/bible/ti2/3.json":()=>W(()=>import("./3-BX5C1uei.js"),[]),"../data/bible/ti2/4.json":()=>W(()=>import("./4-CFJzZghq.js"),[]),"../data/bible/tit/1.json":()=>W(()=>import("./1-DJJ8O2bG.js"),[]),"../data/bible/tit/2.json":()=>W(()=>import("./2-DlB9IIBz.js"),[]),"../data/bible/tit/3.json":()=>W(()=>import("./3-DOJUZzIR.js"),[])}),`../data/bible/${mt}/${En}.json`,5);if(bn.verses&&bn.verses.length>0){const Kn=`[ ${at.book} ${En}${r==="ko"?"":""} ]`,Yn=bn.verses.map(no=>`${no.verse}. ${no.text}`).join(`
`);fe.push(`${Kn}
${Yn}`)}}catch{console.log(`Local data not found for ${mt}/${En}, trying API...`);try{const Kn=await fetch(`/api/scrape-bible?book=${mt}&chapter=${En}`);if(Kn.ok){const Yn=await Kn.json();if(Yn.verses&&Yn.verses.length>0){const no=`[ ${at.book} ${En}${r==="ko"?"":""} ]`,Sl=Yn.verses.map(Wn=>`${Wn.verse}. ${Wn.text}`).join(`
`);fe.push(`${no}
${Sl}`)}}}catch(Kn){console.warn("API fetch also failed for",mt,En,Kn)}}}fe.length>0&&(me=fe.join(`

`))}catch(ce){console.warn("Bible text loading failed",ce)}try{const ce=await bR(t[0].book,t[0].chapter,t[1].chapter,r);if(!ce)throw new Error("Failed to get data from API.");const fe=me||ce.passage;f(fe),s(fe),w(ce.meditationGuide),E(ce.context),p(ce.intention),N(!1),I(!0);let at=null;ce.imagePrompt&&(at=await CR({initialPrompt:ce.imagePrompt,fallbackContext:ce.intention,language:r}),C(at)),I(!1);const mt={...ce,passage:fe,contextImageUrl:at};wl(ae,JSON.stringify(mt))}catch(ce){const fe=ce instanceof Error?ce.message:JSON.stringify(ce);fe.includes("429")||fe.includes("RESOURCE_EXHAUSTED")?K(l("apiQuotaExceeded")):K(l("contentError")),console.error(ce),N(!1),I(!1)}},[t,e,s,r,l]);j.useEffect(()=>{ds()},[ds]);const fs=l("readingPlanInfo").split(/\{(\w+)\}/),to=!!V[e];return T.jsxs("div",{className:"space-y-6",children:[T.jsxs(ct,{children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h2",{className:"text-lg font-bold text-slate-100",children:l("readingPlanTitle")}),T.jsx("button",{onClick:()=>be(!pe),className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:pe?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})}),T.jsx("span",{children:l("hideButton")})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),T.jsx("span",{children:l("showAllButton")})]})})]}),pe&&T.jsxs("div",{className:"mt-4 border-t border-slate-700 pt-4",children:[T.jsx("p",{className:"text-sm text-slate-400 mb-4",children:fs.map((ae,me)=>ae==="totalDays"?T.jsx("strong",{className:"text-sky-400",children:We},me):ae==="currentDay"?T.jsx("strong",{className:"text-sky-400",children:e},me):T.jsx("span",{children:ae},me))}),T.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-2 pr-1",children:pt.map(ae=>{const me=xe[ae.day],ce=!!V[ae.day],fe=ae.day===e;let at="bg-slate-700 hover:bg-slate-600 text-slate-300",mt="border-slate-600";return me==="good"?(at="bg-green-600 text-white hover:bg-green-500",mt="border-green-400"):me==="ok"?(at="bg-amber-600 text-white hover:bg-amber-500",mt="border-amber-400"):me==="bad"&&(at="bg-red-600 text-white hover:bg-red-500",mt="border-red-400"),fe?mt="text-white ring-2 ring-white ring-offset-2 ring-offset-slate-900 font-bold "+at:mt=`border ${mt}`,T.jsxs("button",{onClick:()=>i(ae.day),title:`${l("day",{day:ae.day})}: ${ae.reading}`,className:`
                        h-9 rounded-lg flex flex-col items-center justify-center p-0.5 transition-all duration-200 relative
                        ${at} ${fe?"ring-2 ring-sky-400 ring-offset-2 ring-offset-slate-800 z-10 scale-105":mt}
                      `,children:[T.jsx("span",{className:"text-[10px] font-mono opacity-70 mb-0.5",children:ae.day}),T.jsx("span",{className:"text-[10px] leading-tight text-center break-keep line-clamp-1 w-full px-1",children:ae.reading.replace(/[0-9]+(-[0-9]+)??/,"").trim()||ae.reading}),me&&T.jsx("div",{className:`absolute top-1 right-1 w-1.5 h-1.5 rounded-full ${fe?"bg-white":"bg-white/50"}`}),ce&&T.jsx("div",{className:"absolute bottom-1 w-full flex justify-center",children:T.jsx("div",{className:"w-1 h-1 rounded-full bg-white/70"})})]},ae.day)})}),T.jsxs("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-xl border border-slate-700/50 text-xs text-slate-400 flex flex-wrap gap-4 justify-center",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600 mr-2"}),l("meditationGood")]}),T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-600 mr-2"}),l("meditationOk")]}),T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600 mr-2"}),l("meditationBad")]})]})]})]}),T.jsxs(ct,{children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:l("todaysPassage")}),!x&&c&&T.jsx("button",{onClick:()=>ls(c,Y),className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:se?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),T.jsx("span",{children:l("copied")})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),T.jsx("span",{children:l("copyButton")})]})})]}),x?T.jsx(Rt,{message:l("loadingPassage")}):L?T.jsx("p",{className:"text-red-400 p-4 bg-red-500/10 rounded-lg",children:L}):T.jsxs("div",{ref:ke,onMouseUp:Tn,className:"max-h-[50vh] overflow-y-auto p-4 bg-slate-900 rounded-lg text-slate-300 leading-loose relative",children:[D.visible&&T.jsx("button",{onClick:us,className:"absolute z-10 p-2 bg-sky-500 text-white rounded-full shadow-lg hover:bg-sky-400 transition-transform transform -translate-x-1/2 -translate-y-full animate-fade-in",style:{left:`${D.x}px`,top:`${D.y}px`},title:l("explainSelection"),children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),Ci(c)]})]}),!x&&c&&T.jsxs(T.Fragment,{children:[T.jsx(wI,{passage:c}),T.jsx(_I,{passage:c})]}),T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),T.jsx("span",{children:l("lordsWill")})]}),x?T.jsx(Rt,{message:l("analyzingIntent")}):L?null:T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:m})]}),T.jsxs(ct,{children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:l("meditationGuide")}),!x&&v&&T.jsx("button",{onClick:()=>ls(v,$),className:"flex items-center px-3 py-1 text-sm bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:G?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),T.jsx("span",{children:l("copied")})]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),T.jsx("span",{children:l("copyButton")})]})})]}),x?T.jsx(Rt,{message:l("generatingGuide")}):L?null:T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:Ci(v)})]}),T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 inline-block mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),T.jsx("span",{children:l("timeAndPlace")})]}),x?T.jsx(Rt,{message:l("generatingBg")}):L?null:T.jsxs("div",{children:[M&&T.jsx("div",{className:"w-full bg-slate-700 rounded-lg h-64 mb-4 flex items-center justify-center",children:T.jsx(Rt,{message:l("generatingBgImage")})}),A&&!M&&T.jsx("div",{className:"mb-4 rounded-lg overflow-hidden shadow-lg",children:T.jsx("img",{src:A,alt:l("biblicalContextAlt"),className:"w-full h-auto object-cover"})}),T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:_})]})]}),!x&&c&&!L&&T.jsx("div",{className:"my-6 text-center",children:T.jsx("button",{onClick:eo,disabled:x||Ne||to,className:"w-full md:w-auto px-8 py-4 bg-green-600 text-white font-bold text-lg rounded-lg shadow-lg hover:bg-green-700 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-green-500 disabled:bg-slate-600 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center mx-auto",children:Ne?T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l("meditationSaved")]}):to?T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l("meditationAlreadySaved")]}):T.jsxs(T.Fragment,{children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),l("completeMeditation")]})})}),!x&&c&&T.jsxs(T.Fragment,{children:[T.jsx(pv,{context:c,title:l("passageMusicTitle"),id:"passage-music-recommender"}),T.jsx(yI,{passage:c}),T.jsx(vI,{passage:c})]}),T.jsx(SI,{reading:ne?V[ne]:null,onClose:()=>Ie(null),formatText:Ci}),T.jsx(TI,{isOpen:he.isOpen,onClose:cs,isLoading:he.isLoading,error:he.error,selectedText:Q,explanation:he.content})]})},mv=j.createContext(void 0),bI=({children:t})=>{const[e,i]=j.useState(null),[s,r]=j.useState(null),[l,c]=j.useState(!0);j.useEffect(()=>{Ye.auth.getSession().then(({data:{session:v}})=>{r(v),i((v==null?void 0:v.user)??null),c(!1)});const{data:{subscription:p}}=Ye.auth.onAuthStateChange((v,w)=>{r(w),i((w==null?void 0:w.user)??null),c(!1)});return()=>p.unsubscribe()},[]);const m={user:e,session:s,loading:l,signOut:async()=>{await Ye.auth.signOut()}};return T.jsx(mv.Provider,{value:m,children:t})},gv=()=>{const t=j.useContext(mv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},AI=(t,e)=>{const[i,s]=j.useState(()=>{try{const l=window.localStorage.getItem(t);return l?JSON.parse(l):e}catch(l){return console.error(l),e}});return[i,l=>{try{const c=l instanceof Function?l(i):l;s(c),window.localStorage.setItem(t,JSON.stringify(c))}catch(c){console.error(c)}}]},CI=({storageKey:t})=>{const{language:e,t:i}=kt(),{user:s}=gv(),[r,l]=AI(`${t}-current`,{repentance:"",resolve:"",dream:""}),[c,f]=j.useState([]),[m,p]=j.useState(!0),[v,w]=j.useState(!1);j.useEffect(()=>{(async()=>{p(!0);try{if(s){const{data:x,error:N}=await Ye.from("diary_entries").select("*").order("created_at",{ascending:!1});if(N)throw N;const M=(x||[]).map(I=>({id:I.id,timestamp:new Date(I.created_at).toLocaleString(),content:I.content}));f(M)}else{const x=await uI(`${t}-saved`);f(x)}}catch(x){console.error("Failed to fetch diary entries:",x)}finally{p(!1)}})()},[t,s]);const _=(C,x)=>{l({...r,[C]:x})},E=async()=>{if(!r.repentance.trim()&&!r.resolve.trim()&&!r.dream.trim())return;const C=e==="ko"?"ko-KR":"en-US",x=new Date().toLocaleTimeString(C,{hour:"2-digit",minute:"2-digit",hour12:!0}),M=[{id:Date.now(),timestamp:x,content:r},...c];f(M),l({repentance:"",resolve:"",dream:""}),w(!0),setTimeout(()=>w(!1),2e3);try{if(s){const{error:I}=await Ye.from("diary_entries").insert([{user_id:s.id,content:r,created_at:new Date().toISOString()}]);if(I)throw I}else await cI(`${t}-saved`,M)}catch(I){console.error("Failed to save diary entries:",I),alert("Failed to save to cloud. Please check your connection.")}},A=j.useMemo(()=>{if(c.length===0)return"";const C=c[0].content,x=e==="ko"?" ":"Repentance and Gratitude",N=e==="ko"?" ":"Resolution and Application",M=e==="ko"?"  ":"God-Given Dream";return`${x}: ${C.repentance}
${N}: ${C.resolve}
${M}: ${C.dream}`},[c,e]);return T.jsxs("div",{className:"space-y-6",children:[T.jsxs(ct,{children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 mb-4 flex justify-between items-center",children:[T.jsx("span",{children:i("diaryTitle")}),s&&T.jsx("span",{className:"text-xs font-normal text-emerald-400 bg-emerald-400/10 px-2 py-1 rounded",children:"Cloud Sync Active"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"repentance",className:"block text-lg font-semibold text-slate-100 mb-2",children:i("repentanceLabel")}),T.jsx("textarea",{id:"repentance",rows:5,value:r.repentance,onChange:C=>_("repentance",C.target.value),className:"w-full p-3 bg-slate-700 text-slate-200 border border-slate-600 rounded-lg focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition placeholder-slate-400",placeholder:i("repentancePlaceholder")})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"resolve",className:"block text-lg font-semibold text-slate-100 mb-2",children:i("resolveLabel")}),T.jsx("textarea",{id:"resolve",rows:5,value:r.resolve,onChange:C=>_("resolve",C.target.value),className:"w-full p-3 bg-slate-700 text-slate-200 border border-slate-600 rounded-lg focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition placeholder-slate-400",placeholder:i("resolvePlaceholder")})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"dream",className:"block text-lg font-semibold text-slate-100 mb-2",children:i("dreamLabel")}),T.jsx("textarea",{id:"dream",rows:5,value:r.dream,onChange:C=>_("dream",C.target.value),className:"w-full p-3 bg-slate-700 text-slate-200 border border-slate-600 rounded-lg focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition placeholder-slate-400",placeholder:i("dreamPlaceholder")})]})]}),T.jsx("div",{className:"text-right mt-6",children:T.jsx("button",{onClick:E,className:"px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:i(v?"saved":"saveDiaryButton")})}),T.jsxs("div",{className:"mt-8 border-t border-slate-700 pt-6",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:i("todaysRecord")}),m?T.jsx(Rt,{message:i("syncingEntries")}):c.length===0?T.jsxs("div",{className:"text-center py-8 text-slate-400",children:[T.jsx("p",{children:i("noRecords")}),T.jsx("p",{className:"text-sm mt-1",children:i("noRecordsHint")})]}):T.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:c.map(C=>T.jsxs("div",{className:"bg-slate-700/50 p-5 rounded-lg border border-slate-700 transition-shadow hover:bg-slate-700",children:[T.jsx("div",{className:"flex justify-between items-center mb-4 border-b border-slate-600 pb-2",children:T.jsxs("p",{className:"text-sm font-bold text-sky-400 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e==="ko"?C.timestamp:new Date(C.timestamp).toLocaleString()]})}),T.jsxs("div",{className:"space-y-4",children:[C.content.repentance&&T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-300 text-base",children:i("repentanceLabel")}),T.jsx("p",{className:"text-slate-200 whitespace-pre-wrap mt-2 text-sm leading-relaxed",children:C.content.repentance})]}),C.content.resolve&&T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-300 text-base",children:i("resolveLabel")}),T.jsx("p",{className:"text-slate-200 whitespace-pre-wrap mt-2 text-sm leading-relaxed",children:C.content.resolve})]}),C.content.dream&&T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold text-slate-300 text-base",children:i("dreamLabel")}),T.jsx("p",{className:"text-slate-200 whitespace-pre-wrap mt-2 text-sm leading-relaxed",children:C.content.dream})]})]})]},C.id))})]})]}),T.jsx(pv,{context:A,title:i("diaryMusicTitle"),id:"diary-music-recommender"})]})},xI=({passage:t,storageKey:e})=>{const{language:i,t:s}=kt(),[r,l]=j.useState(""),[c,f]=j.useState(!0),[m,p]=j.useState([]),[v,w]=j.useState(!0),[_,E]=j.useState(""),[A,C]=j.useState(!1);j.useEffect(()=>{(async()=>{w(!0);try{const I=await dI(e);p(I)}catch(I){console.error("Failed to fetch mission plans:",I)}finally{w(!1)}})()},[e]);const x=j.useCallback(async()=>{if(!t)return;const I=`evangelism-tips-${new Date().toISOString().split("T")[0]}-${i}`;try{const L=window.localStorage.getItem(I);if(L){l(L),f(!1);return}}catch(L){console.error("Failed to read evangelism tips from cache",L)}f(!0);try{const L=await AR(t,i);l(L),window.localStorage.setItem(I,L)}catch(L){console.error("Failed to fetch evangelism tips:",L),l(s("tipsFailed"))}finally{f(!1)}},[t,i,s]);j.useEffect(()=>{x()},[x]);const N=async()=>{if(!_.trim())return;const M=i==="ko"?"ko-KR":"en-US",L=[{id:Date.now(),timestamp:new Date().toLocaleTimeString(M,{hour:"2-digit",minute:"2-digit",hour12:!0}),content:_},...m];p(L),E(""),C(!0),setTimeout(()=>C(!1),2e3);try{await fI(e,L)}catch(K){console.error("Failed to save mission plan:",K),p(m)}};return T.jsxs("div",{className:"space-y-6",children:[T.jsxs(ct,{children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:s("evangelismTraining")}),c?T.jsx(Rt,{message:s("generatingTips")}):T.jsx("div",{className:"text-slate-300 space-y-4 whitespace-pre-wrap leading-relaxed",children:r})]}),T.jsxs(ct,{children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:s("myMissionPlan")}),T.jsx("textarea",{rows:8,value:_,onChange:M=>E(M.target.value),className:"w-full p-3 bg-slate-700 text-slate-200 border border-slate-600 rounded-lg focus:ring-2 focus:ring-sky-400 focus:border-sky-400 transition placeholder-slate-400",placeholder:s("missionPlanPlaceholder")}),T.jsx("div",{className:"text-right mt-4",children:T.jsx("button",{onClick:N,className:"px-6 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-sky-500",children:s(A?"saved":"savePlanButton")})}),T.jsxs("div",{className:"mt-8 border-t border-slate-700 pt-6",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:s("myRecords")}),v?T.jsx(Rt,{message:s("syncingPlans")}):m.length===0?T.jsxs("div",{className:"text-center py-8 text-slate-400",children:[T.jsx("p",{children:s("noPlans")}),T.jsx("p",{className:"text-sm mt-1",children:s("noPlansHint")})]}):T.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:m.map(M=>T.jsxs("div",{className:"bg-slate-700/50 p-5 rounded-lg border border-slate-700 transition-shadow hover:bg-slate-700",children:[T.jsx("div",{className:"flex justify-between items-center mb-4 border-b border-slate-600 pb-2",children:T.jsxs("p",{className:"text-sm font-bold text-sky-400 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("savedAt",{time:M.timestamp})]})}),T.jsx("p",{className:"text-slate-200 whitespace-pre-wrap mt-2 text-sm leading-relaxed",children:M.content})]},M.id))})]})]})]})},Zy=800,e0=500,Xa={Rome:{x:50,y:80},Puteoli:{x:90,y:95},Malta:{x:80,y:250},Philippi:{x:300,y:100},Thessalonica:{x:270,y:110},Berea:{x:255,y:125},Athens:{x:280,y:200},Corinth:{x:260,y:195},"Fair Havens":{x:350,y:300},Troas:{x:370,y:130},Ephesus:{x:380,y:200},Miletus:{x:385,y:220},"Perga in Pamphylia":{x:450,y:230},"Pisidian Antioch":{x:450,y:190},Iconium:{x:490,y:200},Lystra:{x:490,y:220},Derbe:{x:520,y:220},Tarsus:{x:560,y:230},Antioch:{x:600,y:240},"Syrian Antioch":{x:600,y:240},Seleucia:{x:590,y:250},"Cyprus (Salamis, Paphos)":{x:500,y:280},Salamis:{x:520,y:280},Paphos:{x:480,y:280},Tyre:{x:600,y:320},Caesarea:{x:590,y:360},Jerusalem:{x:600,y:390},Macedonia:{x:260,y:90}},RI=["M 30,20 L 100,20 L 110,150 L 150,200 L 100,220 L 70,160 L 50,100 Z","M 150,20 L 350,20 L 380,120 L 330,220 L 280,240 L 250,200 L 200,100 Z","M 250,200 L 280,200 L 270,230 L 250,220 Z","M 380,80 L 650,80 L 650,250 L 550,260 L 450,250 L 380,220 L 370,120 Z","M 650,220 L 700,220 L 700,480 L 500,480 L 550,400 L 580,350 L 580,250 Z","M 470,270 L 530,260 L 540,280 L 480,290 Z","M 310,290 L 390,290 L 380,310 L 320,310 Z","M 90,230 L 140,220 L 130,260 L 90,250 Z"],NI=({journeyId:t,visitedSteps:e,selectedStepIndex:i,onStepClick:s,steps:r})=>{const{language:l}=kt(),c=j.useMemo(()=>r.map(m=>{const p=m.city.en;if(Xa[p])return Xa[p];const v=Object.keys(Xa).find(w=>p.includes(w));return v?Xa[v]:{x:0,y:0}}),[r]),f=j.useMemo(()=>c.length===0?"":c.map((m,p)=>`${p===0?"M":"L"} ${m.x},${m.y}`).join(" "),[c]);return T.jsxs("div",{className:"w-full bg-[#f4e4bc] rounded-xl overflow-hidden shadow-inner border border-[#d4c49c] relative",children:[T.jsxs("svg",{viewBox:`0 0 ${Zy} ${e0}`,className:"w-full h-auto drop-shadow-md",children:[T.jsx("rect",{width:Zy,height:e0,fill:"#6fa3c4",opacity:"0.4"}),RI.map((m,p)=>T.jsx("path",{d:m,fill:"#e6d5a7",stroke:"#bfaa7f",strokeWidth:"2"},p)),T.jsx("path",{d:f,fill:"none",stroke:t===1?"#d97706":t===2?"#2563eb":t===3?"#16a34a":"#dc2626",strokeWidth:"3",strokeDasharray:"8,4",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm opacity-80",children:T.jsx("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"30s",repeatCount:"indefinite"})}),c.map((m,p)=>{const v=i===p,w=e.includes(p),_=r[p];return m.x===0&&m.y===0?null:T.jsxs("g",{onClick:()=>s(p),style:{cursor:"pointer"},className:"transition-all duration-300",children:[v&&T.jsx("circle",{cx:m.x,cy:m.y,r:"12",fill:"none",stroke:"currentColor",className:"text-sky-500 animate-ping opacity-75",strokeWidth:"2"}),T.jsx("circle",{cx:m.x,cy:m.y,r:v?6:4,fill:v?"#0ea5e9":w?"#0f172a":"#fff",stroke:"#0f172a",strokeWidth:"2",className:"transition-all duration-300 hover:scale-150"}),T.jsx("text",{x:m.x,y:m.y+15,textAnchor:"middle",className:`text-[10px] font-bold fill-slate-800 pointer-events-none drop-shadow-md ${v?"text-[12px] font-extrabold fill-black":""}`,style:{fontFamily:"serif"},children:_.city[l]})]},p)})]}),T.jsx("div",{className:"absolute inset-0 bg-yellow-900/10 pointer-events-none mix-blend-multiply"}),T.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/aged-paper.png')] opacity-20 pointer-events-none"}),T.jsx("div",{className:"absolute top-4 left-4 font-serif text-slate-800 opacity-70",children:T.jsx("span",{className:"text-xs font-bold uppercase tracking-widest border-b border-slate-800 pb-1",children:"Mediterranean Sea"})})]})},II={ko:{text:` (Seleucia)

 :
  ( )   .   1         () ( 13:4).

 :
1     ,      .

 :
() '(evlik)' .    25km    ,      .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Cevlik+Turkey"}]},en:{text:`Seleucia

Biblical Background:
Served as the seaport for Syrian Antioch. Paul and Barnabas went down to Seleucia to sail to Cyprus at the start of their 1st missionary journey (Acts 13:4).

Paul's Activities:
The actual departure point for the first overseas mission trip.

Modern Location:
Near 'evlik', Turkey. Located on the Mediterranean coast about 25km west of Antakya. Ruins of the ancient harbor and the Titus Tunnel remain.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Cevlik+Turkey"}]}},kI={ko:{text:` (Iconium)

 :
     .

 :
       .            ( 14:1-6).

 :
() '(Konya)'.   ()    .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Konya+Turkey"}]},en:{text:`Iconium

Biblical Background:
A commercial city located east of Pisidian Antioch.

Paul's Activities:
Preached in the synagogue, leading a great number of Jews and Greeks to believe. However, unbelieving Jews stirred up the Gentiles to stone them, forcing them to flee to Lystra (Acts 14:1-6).

Modern Location:
'Konya', Turkey. It is now a major city known as the center of the Mevlevi Sufi order.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Konya+Turkey"}]}},MI={ko:{text:` (Lystra)

 :
     .   .

 :
    .   (),  ()   .                ( 14:8-20).

 :
()   '(Hatunsaray)'  .     .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Hatunsaray+Turkey"}]},en:{text:`Lystra

Biblical Background:
A small colony of Roman veterans. The hometown of Timothy.

Paul's Activities:
Healed a man lame from birth. The crowd tried to worship Paul as Hermes and Barnabas as Zeus. Later, Jews from Antioch and Iconium stoned Paul and dragged him out of the city, leaving him for dead, but he miraculously got up and went back in (Acts 14:8-20).

Modern Location:
Ruins near 'Hatunsaray', south of Konya, Turkey. Not extensively excavated.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Hatunsaray+Turkey"}]}},DI={ko:{text:` (Derbe)

 :
1   ().

 :
        .      ,  (, , )     ( 14:20-23).   .

 :
() (Karaman)  '(Ekinli)'  .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Karaman+Turkey"}]},en:{text:`Derbe

Biblical Background:
The turning point (terminus) of the 1st missionary journey.

Paul's Activities:
Preached the gospel without persecution and won many disciples. Instead of returning directly to Syrian Antioch, he retraced his steps through Lystra, Iconium, and Antioch to encourage the disciples and appoint elders (Acts 14:20-23). Hometown of Gaius.

Modern Location:
identified with 'Ekinli' near Karaman, Turkey.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Karaman+Turkey"}]}},PI={ko:{text:` (Tarsus)

 :
     . 

 :
  ( 22:3).             . 2     ( 15:41).

 :
() '(Tarsus)'.    .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Tarsus+Turkey"}]},en:{text:`Tarsus

Biblical Background:
The capital of Cilicia and a major center of education and commerce.

Paul's Activities:
The birthplace of Paul (Acts 22:3). After his conversion and threats in Jerusalem, he stayed here until Barnabas sought him out. He passed through here at the start of the 2nd missionary journey (Acts 15:41).

Modern Location:
'Tarsus', Turkey. St. Paul's Well and the remains of his house are visited today.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Tarsus+Turkey"}]}},LI={ko:{text:` (Troas)

 :
   .

 :
2          ,  '   '  ( 16:8-10).     . 3      .

 :
() '(Dalyan)'     .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Alexandria+Troas"}]},en:{text:`Troas

Biblical Background:
A port city in northwest Asia Minor.

Paul's Activities:
During the 2nd journey, after being kept by the Holy Spirit from preaching in Asia, he came here and had the vision of the Macedonian man saying "Come over to Macedonia and help us" (Acts 16:8-10). The door to European mission opened here. Later, Eutychus was raised from the dead here.

Modern Location:
Ruins of Alexandria Troas near 'Dalyan', Turkey.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Alexandria+Troas"}]}},UI={ko:{text:` (Philippi)

 :
     .

 :
     .    ,       ,        ( 16:11-40).

 :
  '(Philippi)' . (Kavala, )  .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Archaeological+Site+of+Philippi"}]},en:{text:`Philippi

Biblical Background:
A leading city of the district of Macedonia and a Roman colony.

Paul's Activities:
Established the first church in Europe. Lydia was converted, and a slave girl with a spirit of divination was healed. Paul was imprisoned but miraculously freed by an earthquake, leading to the jailer's conversion (Acts 16:11-40).

Modern Location:
Archaeological Site of Philippi, near 'Kavala' (Neapolis), Greece.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Archaeological+Site+of+Philippi"}]}},OI={ko:{text:` (Thessalonica)

 :
     .

 :
     .   ,         ( 17:1-9).

 :
 2  '(Thessaloniki)'.      .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Thessaloniki+Greece"}]},en:{text:`Thessalonica

Biblical Background:
The capital of Macedonia and its largest port.

Paul's Activities:
Reasoned in the synagogue for three Sabbaths. Stayed at Jason's house. Many Greeks and prominent women believed, but jealous Jews formed a mob, forcing Paul to leave for Berea by night (Acts 17:1-9).

Modern Location:
'Thessaloniki', Greece. The second-largest city in Greece today.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Thessaloniki+Greece"}]}},GI={ko:{text:` (Berea)

 :
     .

 :
     ()          ( 17:10-14).   .

 :
 '(Veria)'.    (Bema)  .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Veria+Greece"}]},en:{text:`Berea

Biblical Background:
A Macedonian city at the foot of Mount Olympus.

Paul's Activities:
The people here were of more noble character than the Thessalonians, for they received the message with great eagerness and examined the Scriptures every day to see if what Paul said was true (Acts 17:10-14).

Modern Location:
'Veria', Greece. 'St. Paul's Tribune' (Bema) monuments his preaching there.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Veria+Greece"}]}},BI={ko:{text:` (Athens)

 :
  , ,  ().

 :
      .     (Areopagus) '  '    ( 17:15-34).

 :
  '(Athens)'.       .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Areopagus+Athens"}]},en:{text:`Athens

Biblical Background:
The center of philosophy, art, and religion in ancient Greece.

Paul's Activities:
Distressed to see the city full of idols. Reasoned with Epicurean and Stoic philosophers and delivered the famous sermon on the 'Unknown God' at the Areopagus (Mars Hill) (Acts 17:15-34).

Modern Location:
'Athens', Greece. The Areopagus rock hill remains right next to the Acropolis.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Areopagus+Athens"}]}},qI={ko:{text:` (Corinth)

 :
        .

 :
2   1 6   .         .      ( 18:1-17).

 :
 ' (Ancient Corinth)' .   ()  .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Ancient+Corinth"}]},en:{text:`Corinth

Biblical Background:
The capital of Achaia, a prosperous trade center known for its immorality.

Paul's Activities:
Stayed for 1.5 years during the 2nd journey. Met Aquila and Priscilla and worked as a tentmaker. Crispus, the synagogue leader, and many Corinthians believed (Acts 18:1-17).

Modern Location:
'Ancient Corinth', Greece. Ruins of the Temple of Apollo and the Bema (judgment seat) are visible.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Ancient+Corinth"}]}},VI={ko:{text:` (Ephesus)

 :
     ()   .

 :
3  , 3  .   2         .      ( 19).

 :
() (Seluk)  '(Ephesus)' .  ,      .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Ephesus+Turkey"}]},en:{text:`Ephesus

Biblical Background:
The most important port city in Asia Minor, home to the Temple of Artemis.

Paul's Activities:
The center of the 3rd journey, where he stayed for 3 years. Taught daily in the lecture hall of Tyrannus for 2 years. Sorcerers burned their scrolls, and the riot of Demetrius occurred here (Acts 19).

Modern Location:
'Ephesus' ruins near Seluk, Turkey. Features the Library of Celsus and the Great Theatre.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Ephesus+Turkey"}]}},HI={ko:{text:` (Miletus)

 :
   .

 :
3        ,        ( 20:17-38).

 :
() '(Miletus)' .       .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Miletus"}]},en:{text:`Miletus

Biblical Background:
A port city south of Ephesus.

Paul's Activities:
Stopped here on his return from the 3rd journey. Pressed for time, he called the Ephesian elders to meet him here and delivered a tearful farewell address (Acts 20:17-38).

Modern Location:
'Miletus' ruins, Turkey. Once a harbor, now inland due to silting.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Miletus"}]}},zI={ko:{text:` (Tyre)

 :
()   .

 :
3            7 .       ( 21:3-6).

 :
 '(Tyre/Sour)'.`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Tyre+Lebanon"}]},en:{text:`Tyre

Biblical Background:
A famous Phoenician port city.

Paul's Activities:
Stayed for 7 days while the ship unloaded cargo on his return to Jerusalem. Disciples warned him through the Spirit not to go to Jerusalem (Acts 21:3-6).

Modern Location:
'Tyre' (Sour), Lebanon.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Tyre+Lebanon"}]}},$I={ko:{text:` (Caesarea)

 :
         . 

 :
3       ( 21:8).       2 ,   ,    ( 23-26).

 :
 ' (Caesarea Maritima)' .    .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Caesarea+National+Park"}]},en:{text:`Caesarea

Biblical Background:
The Roman administrative capital of Judea, built by Herod the Great.

Paul's Activities:
Stayed at Philip the Evangelist's house (Acts 21:8). Later imprisoned here for 2 years after his arrest in Jerusalem. Defended his faith before Governors Felix and Festus and King Agrippa (Acts 23-26).

Modern Location:
'Caesarea Maritima' National Park, Israel. Famous for its aqueduct and theater.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Caesarea+National+Park"}]}},FI={ko:{text:` (Jerusalem)

 :
  .

 :
3       .        ( 21:17-36).

 :
 .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Jerusalem"}]},en:{text:`Jerusalem

Biblical Background:
The holy city for Judaism and Christianity.

Paul's Activities:
Arrived here after the 3rd journey and reported to James and the elders. While performing purification rites in the temple, he was arrested by a mob incited by Jews from Asia (Acts 21:17-36).

Modern Location:
Jerusalem, Israel.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Jerusalem"}]}},JI={ko:{text:` (Macedonia)

 :
     .

 :
2      , ,   . 3      ( 20:1-2).

 :
      .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Macedonia+Greece"}]},en:{text:`Macedonia

Biblical Background:
A Roman province covering the northern region of Greece.

Paul's Activities:
After a vision during the 2nd journey, he established churches in Philippi, Thessalonica, and Berea. He revisited the region during the 3rd journey to encourage believers (Acts 20:1-2).

Modern Location:
Northern Greece and the Republic of North Macedonia.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Macedonia+Greece"}]}},jI={ko:{text:` (Malta)

 :
   .

 :
     .        .     3 ( 28:1-10).

 :
 .     '  (St Paul's Bay)' .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=St+Paul's+Bay+Malta"}]},en:{text:`Malta

Biblical Background:
An island in the central Mediterranean.

Paul's Activities:
The shipwrecked crew washed ashore here. Paul was bitten by a viper but unharmed, astonishing the locals. He healed Publius's father and stayed for 3 months (Acts 28:1-10).

Modern Location:
The Republic of Malta. 'St. Paul's Bay' is traditionally believed to be the shipwreck site.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=St+Paul's+Bay+Malta"}]}},KI={ko:{text:` (Puteoli)

 :
    .

 :
       .   7  ( 28:13-14).

 :
   '(Pozzuoli)'.`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Pozzuoli+Italy"}]},en:{text:`Puteoli

Biblical Background:
A major port city in Italy.

Paul's Activities:
The landing place on the Italian mainland. Paul found brothers there and stayed for 7 days before heading to Rome (Acts 28:13-14).

Modern Location:
'Pozzuoli', near Naples, Italy.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Pozzuoli+Italy"}]}},YI={ko:{text:` (Rome)

 :
  .

 :
    2          ( 28:16-31).  (, , , ) .       .

 :
 .    ()     () .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Basilica+of+Saint+Paul+Outside+the+Walls"}]},en:{text:`Rome

Biblical Background:
The capital of the Roman Empire.

Paul's Activities:
Arrived as a prisoner and lived under house arrest for 2 years, boldly preaching the Kingdom of God (Acts 28:16-31). Wrote the Prison Epistles here. Tradition holds he was martyred under Nero.

Modern Location:
Rome, Italy. Sites include Tre Fontane Abbey (execution site) and the Basilica of Saint Paul Outside the Walls (tomb).`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Basilica+of+Saint+Paul+Outside+the+Walls"}]}},WI={"Syrian Antioch":{ko:{text:`  (Syrian Antioch)

 :
           ( 11:19-26).  ()   1 ,    ''  .  1, 2, 3        .

 :
    ,      .           .

 :
 ()  '(Antakya)'.         ,        .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Antakya+Turkey"}]},en:{text:`Syrian Antioch

Biblical Background:
This was the location of the first Gentile church, established by believers scattered after the martyrdom of Stephen (Acts 11:19-26). Barnabas brought Saul (Paul) here, and they taught together for a year. It was here that the disciples were first called 'Christians'. It served as the launching point and home base for Paul's 1st, 2nd, and 3rd missionary journeys.

Paul's Activities:
Co-pastored with Barnabas and was set apart by the Holy Spirit to be the first missionary. He always returned here to report on his mission work.

Modern Location:
Today, it is 'Antakya' in southern Turkey. Located on the Orontes River, it retains early Christian sites like the Church of St. Peter, although much has been affected by earthquakes.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Antakya+Turkey"}]}},Seleucia:II,"Cyprus (Salamis, Paphos)":{ko:{text:` -  &  (Cyprus - Salamis & Paphos)

 :
()  .   ,    . 

 :
1. :     .  () .
2. :      ,       ( 13:4-12).   ''  .

 :
 .   '(Famagusta)'  ,   '(Paphos)'.`,links:[{title:"   ()",uri:"https://www.google.com/maps/search/?api=1&query=Salamis+Cyprus"},{title:"   ()",uri:"https://www.google.com/maps/search/?api=1&query=Paphos+Cyprus"}]},en:{text:`Cyprus - Salamis & Paphos

Biblical Background:
Cyprus was Barnabas's home country. Salamis was the eastern port, and Paphos was the western capital.

Paul's Activities:
1. Salamis: Preached in Jewish synagogues with John Mark as an assistant.
2. Paphos: Confronted the sorcerer Bar-Jesus (Elymas) and led the proconsul Sergius Paulus to faith (Acts 13:4-12). Saul begins to be called 'Paul' from here.

Modern Location:
The Republic of Cyprus. Salamis is near 'Famagusta' in Northern Cyprus, and Paphos is a city on the southwest coast of Southern Cyprus.`,links:[{title:"View on Google Maps (Salamis)",uri:"https://www.google.com/maps/search/?api=1&query=Salamis+Cyprus"},{title:"View on Google Maps (Paphos)",uri:"https://www.google.com/maps/search/?api=1&query=Paphos+Cyprus"}]}},"Perga in Pamphylia":{ko:{text:`  (Perga in Pamphylia)

 :
      .

 :
 ()      ( 13:13).  1      ( 14:25).

 :
() (Antalya)  '(Perge)' .             .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Perge+Antalya"}]},en:{text:`Perga in Pamphylia

Biblical Background:
The first stop in Asia Minor after crossing from Cyprus.

Paul's Activities:
Here, John Mark left the team and returned to Jerusalem (Acts 13:13). On the return leg of the 1st journey, Paul preached the word here (Acts 14:25).

Modern Location:
The ruins of 'Perge', inland from Antalya, Turkey. It features well-preserved Hellenistic and Roman ruins, including a stadium and theater.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Perge+Antalya"}]}},"Pisidian Antioch":{ko:{text:`  (Pisidian Antioch)

 :
 1,100m    ,  .     .

 :
          ( 13:14-52).   ,     .       .

 :
() (Yalva)  (Antiocheia) .     .`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Yalvac+Turkey"}]},en:{text:`Pisidian Antioch

Biblical Background:
A major military and transit hub located on a plateau at 1,100m. The southern center of the Galatian region.

Paul's Activities:
Delivered a major sermon in the synagogue outlining Israel's history and Jesus as Messiah (Acts 13:14-52). Many Gentiles believed, but jealousy from Jews led to persecution and expulsion. A turning point for Gentile missions.

Modern Location:
The ruins of Antiocheia near 'Yalva', Turkey. Ruins of a church dedicated to St. Paul remain.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Yalvac+Turkey"}]}},Iconium:kI,Lystra:MI,Derbe:DI,Tarsus:PI,Troas:LI,Philippi:UI,Thessalonica:OI,Berea:GI,Athens:BI,Corinth:qI,Ephesus:VI,Miletus:HI,Tyre:zI,Caesarea:$I,Jerusalem:FI,Macedonia:JI,"Fair Havens":{ko:{text:` (Fair Havens)

 :
()     .

 :
     .        ,          ( 27:8-12).

 :
    ' (Kali Limenes)'.`,links:[{title:"  ",uri:"https://www.google.com/maps/search/?api=1&query=Kali+Limenes+Crete"}]},en:{text:`Fair Havens

Biblical Background:
A small harbor on the south coast of Crete.

Paul's Activities:
The ship paused here on the way to Rome. Paul warned of danger and suggested wintering here, but the pilot wanted to reach Phoenix. They left and were caught in the storm Euroclydon (Acts 27:8-12).

Modern Location:
'Kali Limenes', Crete, Greece.`,links:[{title:"View on Google Maps",uri:"https://www.google.com/maps/search/?api=1&query=Kali+Limenes+Crete"}]}},Malta:jI,Puteoli:KI,Rome:YI},Wc=WI,Qa=[{id:1,title:{ko:"1  ",en:"1st Mission Journey"},steps:[{city:{ko:" ",en:"Syrian Antioch"},description:{ko:"      ",en:"The center of Gentile missions and the church that sent Paul and Barnabas"}},{city:{ko:"",en:"Seleucia"},description:{ko:"    ",en:"A port city serving as the gateway to Antioch"}},{city:{ko:" (, )",en:"Cyprus (Salamis, Paphos)"},description:{ko:"      ",en:"Conversion of Governor Sergius Paulus and the encounter with Elymas the sorcerer"}},{city:{ko:" ",en:"Perga in Pamphylia"},description:{ko:"    ",en:"The place where John Mark departed and returned to Jerusalem"}},{city:{ko:" ",en:"Pisidian Antioch"},description:{ko:"        ",en:"Paul's first recorded sermon in the synagogue and a turning point for Gentile mission"},epistles:[{ko:"",en:"Galatians"}]},{city:{ko:"",en:"Iconium"},description:{ko:"        ",en:"Where a great number of Jews and Greeks believed, and signs and wonders were performed"},epistles:[{ko:"",en:"Galatians"}]},{city:{ko:"",en:"Lystra"},description:{ko:"        ",en:"The healing of a lame man and where Paul survived being stoned"},epistles:[{ko:"",en:"Galatians"}]},{city:{ko:"",en:"Derbe"},description:{ko:"     1    ",en:"Preached the gospel, won many disciples, and served as the turnaround point of the 1st journey"},epistles:[{ko:"",en:"Galatians"}]}]},{id:2,title:{ko:"2  ",en:"2nd Mission Journey"},steps:[{city:{ko:"",en:"Antioch"},description:{ko:"",en:"Restart"}},{city:{ko:"",en:"Tarsus"},description:{ko:" ",en:"Paul's hometown"}},{city:{ko:"",en:"Lystra"},description:{ko:" ",en:"Meeting Timothy"}},{city:{ko:"",en:"Troas"},description:{ko:" ",en:"Had a vision of Macedonia"}},{city:{ko:"",en:"Philippi"},description:{ko:" ,  ",en:"Lydia's conversion, jail incident"},epistles:[{ko:"",en:"Philippians"}]},{city:{ko:"",en:"Thessalonica"},description:{ko:" ",en:"Jason's house"},epistles:[{ko:"",en:"1&2 Thessalonians"}]},{city:{ko:"",en:"Berea"},description:{ko:"  ",en:"Eagerly received the word"}},{city:{ko:" ()",en:"Athens"},description:{ko:" ",en:"Areopagus sermon"}},{city:{ko:"",en:"Corinth"},description:{ko:"18 ,  ",en:"18 months stay, Priscilla and Aquila"},epistles:[{ko:"",en:"1&2 Corinthians"}]}]},{id:3,title:{ko:"3  ",en:"3rd Mission Journey"},steps:[{city:{ko:"",en:"Antioch"},description:{ko:"",en:"Departure"}},{city:{ko:"",en:"Ephesus"},description:{ko:" , 3 ",en:"Lecture hall of Tyrannus, 3 years ministry"},epistles:[{ko:"",en:"Ephesians"}]},{city:{ko:"",en:"Macedonia"},description:{ko:" ",en:"Encouraged the churches"}},{city:{ko:"",en:"Miletus"},description:{ko:"  ",en:"Farewell to Ephesian elders"}},{city:{ko:"",en:"Tyre"},description:{ko:" ",en:"Disciples' warnings"}},{city:{ko:"",en:"Caesarea"},description:{ko:" ",en:"Philip's house"}},{city:{ko:"",en:"Jerusalem"},description:{ko:"",en:"Being arrested"}}]},{id:4,title:{ko:" ",en:"Journey to Rome"},steps:[{city:{ko:"",en:"Caesarea"},description:{ko:"2 ,    ",en:"2 years detention, preaching before Agrippa"}},{city:{ko:"",en:"Fair Havens"},description:{ko:" ",en:"Warning of the voyage"}},{city:{ko:" ()",en:"Malta"},description:{ko:" ",en:"Shipwreck and miracles"}},{city:{ko:"",en:"Puteoli"},description:{ko:" ",en:"Landing in Italy"}},{city:{ko:"",en:"Rome"},description:{ko:" ,  ",en:"Rented house, spreading the gospel"},epistles:[{ko:"",en:"Romans"}]}]}],XI=()=>{var E;const{language:t,t:e}=kt(),[i,s]=j.useState(1),[r,l]=j.useState(null),[c,f]=j.useState(()=>{try{const A=window.localStorage.getItem("mission-visited-steps");return A?JSON.parse(A):{}}catch{return{}}}),m=j.useMemo(()=>Qa.find(A=>A.id===i)||Qa[0],[i]),p=j.useMemo(()=>{const A=c[i]||[],C=m.steps.length;return Math.round(A.length/C*100)},[i,c,m]);j.useEffect(()=>{localStorage.setItem("mission-visited-steps",JSON.stringify(c))},[c]);const v=A=>{l(A),f(C=>{const x=C[i]||[];return x.includes(A)?C:{...C,[i]:[...x,A]}})},_=(()=>{if(r===null)return null;const C=m.steps[r].city.en;let x=Wc[C];if(!x){const N=Object.keys(Wc).find(M=>C.includes(M)||M.includes(C));N&&(x=Wc[N])}return x&&x[t]?x[t]:null})();return T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsxs(ct,{children:[T.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4",children:[T.jsxs("h2",{className:"text-2xl font-bold text-slate-100 flex items-center",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 mr-3 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e("missionMapTitle")]}),T.jsxs("div",{className:"flex-1 max-w-xs",children:[T.jsxs("div",{className:"flex justify-between items-center mb-1",children:[T.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:t==="ko"?" ":"Journey Progress"}),T.jsxs("span",{className:"text-xs font-bold text-sky-400",children:[p,"%"]})]}),T.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-gradient-to-r from-sky-600 to-sky-400 transition-all duration-500 ease-out",style:{width:`${p}%`}})})]})]}),T.jsx("div",{className:"flex overflow-x-auto gap-2 pb-4 scrollbar-hide mb-6 border-b border-slate-700",children:Qa.map(A=>{var C,x;return T.jsxs("button",{onClick:()=>{s(A.id),l(null)},className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all flex items-center gap-2 ${i===A.id?"bg-sky-600 text-white shadow-lg shadow-sky-900/40":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[A.title[t],(((C=c[A.id])==null?void 0:C.length)||0)===((x=Qa.find(N=>N.id===A.id))==null?void 0:x.steps.length)&&T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-300",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]},A.id)})}),T.jsx("div",{className:"relative mb-8 rounded-xl overflow-hidden bg-slate-900 border border-slate-700 group shadow-2xl",children:T.jsx(NI,{journeyId:i,visitedSteps:c[i]||[],selectedStepIndex:r,onStepClick:v,steps:m.steps})}),T.jsxs("div",{className:"relative mt-8 mb-4",children:[T.jsx("div",{className:"absolute top-5 left-0 w-full h-0.5 bg-slate-700"}),T.jsx("div",{className:"flex overflow-x-auto gap-8 pb-6 scrollbar-hide relative z-10 px-4",children:m.steps.map((A,C)=>{const x=(c[i]||[]).includes(C),N=r===C;return T.jsxs("div",{className:"flex flex-col items-center min-w-[120px]",children:[T.jsx("button",{onClick:()=>v(C),className:`w-10 h-10 rounded-full flex items-center justify-center border-4 transition-all hover:scale-110 relative ${N?"bg-sky-500 border-sky-300 text-white scale-110 shadow-lg shadow-sky-900/40":x?"bg-sky-900 border-sky-700 text-sky-300":"bg-slate-800 border-slate-600 text-slate-400"}`,children:x&&!N?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):C+1}),T.jsx("p",{className:`mt-3 text-sm font-bold text-center px-1 ${N?"text-sky-400":x?"text-sky-200":"text-slate-300"}`,children:A.city[t]}),A.epistles&&T.jsx("div",{className:"mt-1 flex gap-1",children:T.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse",title:e("associatedEpistles")})})]},C)})})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[T.jsx("div",{className:"md:col-span-1 space-y-6",children:T.jsxs(ct,{className:"h-full",children:[T.jsx("h3",{className:"text-xl font-bold text-slate-100 mb-4",children:e("todaysRecord")}),r!==null?T.jsxs("div",{className:"space-y-4 animate-fade-in",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"text-sky-400 font-bold text-lg mb-1",children:m.steps[r].city[t]}),T.jsx("p",{className:"text-slate-300 leading-relaxed",children:m.steps[r].description[t]})]}),m.steps[r].epistles&&T.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 p-3 rounded-lg",children:[T.jsx("h5",{className:"text-amber-400 text-xs font-bold uppercase mb-2 tracking-widest",children:e("associatedEpistles")}),T.jsx("ul",{className:"space-y-1",children:(E=m.steps[r].epistles)==null?void 0:E.map((A,C)=>T.jsxs("li",{className:"text-slate-200 text-sm flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-amber-500/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),A[t]]},C))})]})]}):T.jsx("p",{className:"text-slate-500 italic text-sm",children:e("selectCityHint")})]})}),T.jsx("div",{className:"md:col-span-2",children:T.jsxs(ct,{className:"h-full",children:[T.jsxs("h3",{className:"text-xl font-bold text-slate-100 mb-4 flex items-center",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.989-2.386l-.548-.547z"})}),e("exploreCity")]}),r!==null?_?T.jsxs("div",{className:"space-y-6 animate-fade-in",children:[T.jsx("div",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap text-sm md:text-base bg-slate-900/50 p-4 rounded-lg border border-slate-700",children:_.text}),_.links.length>0&&T.jsxs("div",{className:"space-y-3",children:[T.jsx("h4",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:e("viewOnGoogleMaps")}),T.jsx("div",{className:"flex flex-wrap gap-3",children:_.links.map((A,C)=>T.jsxs("a",{href:A.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 bg-slate-700 hover:bg-slate-600 text-sky-400 rounded-lg transition-colors border border-sky-900/30 text-sm font-semibold",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),A.title]},C))})]})]}):T.jsx("div",{className:"h-48 flex items-center justify-center border-2 border-dashed border-slate-700 rounded-xl",children:T.jsx("p",{className:"text-slate-500 italic text-center px-4",children:"No detailed information available for this location."})}):T.jsx("div",{className:"h-48 flex items-center justify-center border-2 border-dashed border-slate-700 rounded-xl",children:T.jsx("p",{className:"text-slate-500 italic text-center px-4",children:e("selectCityHint")})})]})})]}),T.jsxs(ct,{className:"bg-gradient-to-br from-sky-900/40 to-indigo-900/40 border-sky-500/30 overflow-hidden relative group",children:[T.jsx("div",{className:"absolute -top-12 -right-12 w-32 h-32 bg-sky-500/10 rounded-full blur-3xl group-hover:bg-sky-500/20 transition-colors"}),T.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6 p-2",children:[T.jsxs("div",{className:"flex-1 text-center md:text-left",children:[T.jsxs("h3",{className:"text-xl font-extrabold text-white mb-2 flex items-center justify-center md:justify-start",children:[T.jsx("span",{className:"bg-sky-500 text-white text-[10px] uppercase px-2 py-0.5 rounded-full mr-3 tracking-tighter",children:"New Project"}),e("returnHomeTitle")]}),T.jsx("p",{className:"text-slate-300 text-sm leading-relaxed max-w-xl",children:e("returnHomeDesc")})]}),T.jsxs("a",{href:"https://returnhome-1.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"w-full md:w-auto px-8 py-3 bg-sky-600 hover:bg-sky-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-sky-900/40 flex items-center justify-center gap-3 group/btn",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),e("returnHomeButton")]})]})]})]})},QI=()=>{const{t}=kt(),[e,i]=j.useState(!1),[s,r]=j.useState(""),[l,c]=j.useState(""),[f,m]=j.useState(!1),[p,v]=j.useState(null),w=async _=>{_.preventDefault(),i(!0),v(null);try{if(f){const{error:E}=await Ye.auth.signUp({email:s,password:l,options:{data:{display_name:s.split("@")[0]}}});if(E)throw E;const{error:A}=await Ye.auth.signInWithPassword({email:s,password:l});A&&v({type:"success",text:" !    ."})}else{const{error:E}=await Ye.auth.signInWithPassword({email:s,password:l});if(E)throw E}}catch(E){v({type:"error",text:E.error_description||E.message})}finally{i(!1)}};return T.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:T.jsxs(ct,{className:"w-full max-w-md p-8 bg-slate-800/80 backdrop-blur-xl border border-sky-500/20 shadow-2xl",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:f?"":"  "}),T.jsx("p",{className:"text-sky-200/60 text-sm",children:f?"  ":"  "})]}),T.jsxs("form",{onSubmit:w,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-semibold text-sky-300 uppercase tracking-wider mb-1 px-1",children:""}),T.jsx("input",{type:"email",placeholder:"your@email.com",value:s,onChange:_=>r(_.target.value),className:"w-full p-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-sky-500 outline-none transition-all",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-semibold text-sky-300 uppercase tracking-wider mb-1 px-1",children:""}),T.jsx("input",{type:"password",placeholder:"",value:l,onChange:_=>c(_.target.value),className:"w-full p-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-sky-500 outline-none transition-all",required:!0,minLength:6}),T.jsx("p",{className:"text-xs text-slate-500 mt-1 px-1",children:"6 "})]}),p&&T.jsx("div",{className:`p-3 rounded-lg text-sm ${p.type==="success"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-rose-500/10 text-rose-400 border border-rose-500/20"}`,children:p.text}),T.jsx("button",{type:"submit",disabled:e,className:"w-full py-3 bg-sky-600 hover:bg-sky-500 text-white font-bold rounded-xl shadow-lg shadow-sky-900/40 transition-all transform active:scale-[0.98] disabled:opacity-50",children:e?" ...":f?"":""})]}),T.jsx("div",{className:"mt-6 text-center",children:T.jsx("button",{onClick:()=>m(!f),className:"text-sky-400 hover:text-sky-300 text-sm font-medium transition-colors",children:f?"  ? ":" ? "})})]})})};console.log("Initializing App.tsx module");let bd=null;try{const t="AIzaSyA8-DNkA07rH389oSTMllPBUOAaUlD3NqY";console.log("API Key present:",!!t),t&&(bd=new Ud({apiKey:t}))}catch(t){console.error("Failed to initialize GoogleGenAI:",t)}const ZI=()=>{console.log("App component rendering");const{language:t,setLanguage:e,t:i}=kt(),{user:s,loading:r,signOut:l}=gv(),[c,f]=j.useState("reading"),[m,p]=j.useState(""),[v,w]=j.useState(null),[_,E]=j.useState(()=>Kw(new Date)),A=new Date,C=j.useMemo(()=>Yw(_,t),[_,t]),x=(G,$)=>{try{window.localStorage.setItem(G,$)}catch(se){if(se instanceof DOMException&&(se.name==="QuotaExceededError"||se.name==="NS_ERROR_DOM_QUOTA_REACHED")){console.warn("Storage quota exceeded in App. Clearing dynamic caches."),Object.keys(window.localStorage).forEach(Y=>{(Y.startsWith("reading-cache-")||Y.startsWith("header-sketch-")||Y.startsWith("journey-map-"))&&window.localStorage.removeItem(Y)});try{window.localStorage.setItem(G,$)}catch(Y){console.error("LocalStorage quota error persisted after clearing.",Y)}}}};j.useEffect(()=>{document.documentElement.lang=t,document.title=i("appName"),(async()=>{var Y,pe,be;if(!bd)return;const $="header-sketch-bg-v2",se=localStorage.getItem($);if(se){w(se);return}try{const Ne=(be=(pe=(Y=(await bd.models.generateContent({model:"gemini-1.5-flash-image",contents:{parts:[{text:"An artistic pencil and ink sketch with vibrant but soft watercolor wash. The central figures are Jesus and a small child walking together, shown as BOLD AND DISTINCT SILHOUETTES with CLEAR OUTLINES. They are walking in a peaceful field during a golden sunset. High contrast between the figures and the warm glowing background. Ethereal, hand-drawn fine art style, minimalist but emotionally evocative."}]},config:{imageConfig:{aspectRatio:"16:9"}}})).candidates)==null?void 0:Y[0])==null?void 0:pe.content)==null?void 0:be.parts.find($e=>$e.inlineData);if(Ne!=null&&Ne.inlineData){const $e=`data:image/png;base64,${Ne.inlineData.data}`;w($e),x($,$e)}}catch(xe){console.error("Failed to generate header background",xe)}})()},[t,i]);const N=A.toLocaleDateString(t==="ko"?"ko-KR":"en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),M=`${C[0].book} ${C[0].chapter}-${C[1].chapter}${t==="ko"?"":""}`,I=A.toISOString().split("T")[0],L=({tab:G,label:$})=>T.jsx("button",{onClick:()=>f(G),className:`flex-1 py-3 px-2 text-sm md:text-base font-semibold transition-colors duration-300 rounded-t-lg relative z-10 ${c===G?"bg-slate-800 text-sky-400":"bg-sky-800/60 text-sky-200 hover:bg-sky-700/80 backdrop-blur-sm"}`,children:$}),K=({lang:G,label:$})=>T.jsx("button",{onClick:()=>e(G),className:`px-3 py-1 text-xs rounded-md transition-colors ${t===G?"bg-sky-200 text-sky-800 font-bold":"bg-transparent text-sky-200 hover:bg-sky-700"}`,children:$});return r?T.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:T.jsx(Rt,{message:"Preparing your journey..."})}):s?T.jsxs("div",{className:"min-h-screen bg-slate-900 font-sans text-slate-300",children:[T.jsxs("header",{className:"bg-sky-800 text-white shadow-lg sticky top-0 z-20 overflow-hidden border-b border-sky-700/50",children:[v&&T.jsx("div",{className:"absolute inset-0 z-0 opacity-70 bg-cover bg-center pointer-events-none transition-opacity duration-1000",style:{backgroundImage:`url(${v})`,mixBlendMode:"soft-light"}}),T.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-b from-sky-900/50 via-sky-900/10 to-sky-900/70 pointer-events-none"}),T.jsxs("div",{className:"container mx-auto px-4 pt-4 pb-2 text-center relative z-10",children:[T.jsxs("div",{className:"absolute top-3 left-4 flex items-center space-x-3",children:[T.jsx("span",{className:"font-bold text-white tracking-widest text-sm uppercase opacity-80 hidden md:block",children:"Live in Wonder"}),T.jsx("button",{onClick:l,className:"px-2 py-1 text-[10px] md:text-xs font-bold bg-slate-900/40 hover:bg-rose-500/20 text-sky-200 hover:text-rose-300 border border-sky-500/30 rounded-md transition-all backdrop-blur-sm",children:"LOGOUT"})]}),T.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end space-y-1",children:[T.jsxs("div",{className:"flex space-x-1 border border-sky-600 rounded-lg p-0.5 bg-sky-900/40 backdrop-blur-sm",children:[T.jsx(K,{lang:"ko",label:i("korean")}),T.jsx(K,{lang:"en",label:i("english")})]}),T.jsx("p",{className:"text-xs text-sky-200 font-medium drop-shadow-md text-right bg-sky-900/30 px-2 py-0.5 rounded backdrop-blur-sm",children:N})]}),T.jsx("p",{className:"text-sm md:text-base text-sky-100 font-medium drop-shadow-md",children:i("headerSubtitle")}),T.jsx("h1",{className:"text-xl md:text-3xl font-bold mt-1 tracking-wider drop-shadow-lg text-white",children:i("headerTitle")}),T.jsxs("div",{className:"mt-1 flex flex-col md:flex-row items-center justify-center gap-2",children:[T.jsx("span",{className:"bg-sky-700/80 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider text-sky-200 border border-sky-500/30",children:i("day",{day:_})}),T.jsxs("p",{className:"font-semibold text-lg drop-shadow-md",children:[i("todaysWord"),": ",M]})]})]}),T.jsxs("nav",{className:"container mx-auto px-2 md:px-4 flex justify-around mt-4 overflow-x-auto whitespace-nowrap scrollbar-hide relative z-10",children:[T.jsx(L,{tab:"reading",label:i("navReading")}),T.jsx(L,{tab:"diary",label:i("navDiary")}),T.jsx(L,{tab:"mission",label:i("navMission")}),T.jsx(L,{tab:"map",label:i("navMap")})]})]}),T.jsxs("main",{className:"container mx-auto p-4 md:p-6 relative z-10",children:[c==="reading"&&T.jsx(EI,{reading:C,selectedDay:_,onDayChange:E,onPassageLoaded:p}),c==="diary"&&T.jsx(CI,{storageKey:`diary-${I}`}),c==="mission"&&(m?T.jsx(xI,{passage:m,storageKey:`mission-${I}`}):T.jsx("div",{className:"text-center p-8 bg-slate-800 rounded-lg",children:i("readingFirst")})),c==="map"&&T.jsx(XI,{})]}),T.jsx("footer",{className:"text-center py-6 text-slate-400",children:T.jsx("p",{children:i("footer",{year:new Date().getFullYear()})})})]}):T.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-300 flex flex-col",children:[T.jsx("header",{className:"bg-sky-800 text-white shadow-lg p-6 text-center",children:T.jsx("h1",{className:"text-2xl font-bold",children:i("headerTitle")})}),T.jsx("main",{className:"flex-1 container mx-auto p-4 flex items-center justify-center",children:T.jsx(QI,{})})]})},Bd=document.getElementById("root");console.log("rootElement:",Bd);if(!Bd)throw new Error("Could not find root element to mount to");const ek=zw.createRoot(Bd);console.log("Rendering root...");ek.render(T.jsx(n0.StrictMode,{children:T.jsx(bI,{children:T.jsx(gI,{children:T.jsx(ZI,{})})})}));
